## dist/templates/__blocks__.vm
## branch: master
## release: v2.2.2
## 2016-07-19 2:40:09
##################################################### 
## DONT EVER EVER EVER EDIT THIS FILE ON OMNIX 
## USE REPOSITORY INSTEAD 
## /app/templates/macros and /app/templates/blocks 
## are concatenated here 
#####################################################
#macro (printAdsDFPCall)
<!-- DoubleClick -->
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') +
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>
<script type='text/javascript'>
window.GLOBALS.adsSection = '';
window.GLOBALS.adsSubSection = '';
window.GLOBALS.adsParams = {};
#set ($_escapedQuote = "\\'")
#set ($_escapedQuote = $_escapedQuote.SubString(0,1))
#set ($_escapedQuote = "$_escapedQuote'")
#set ($currentSection = $URLParser.Url.Split($Converter.ToChar('?')).get_Item(0))
#if ($currentSection.StartsWith($Country))
#set ($currentSection = $currentSection.SubString(2).ToLower())
#end
#set ($currentSection = $currentSection.Replace("index.html", ""))
#set ($currentSection = $currentSection.Trim($Converter.ToChar("/")))
#set ($currentSection = $currentSection.Split($Converter.ToChar("/")))
#if ($currentSection.get_Item(0) == "")
window.GLOBALS.adsSection = 'home';
#else
window.GLOBALS.adsSection = '$!currentSection.get_Item(0)';
#if ($currentSection.get_Item(0) == "competition")
#set($urlWoCountryAndComp = $URLParser.Url.SubString(14))
#set($competitionType = $urlWoCountryAndComp.Split($Converter.ToChar("/")).get_Item(1))
#set ($urlParts = $urlWoCountryAndComp.Split($Converter.ToChar('/')))
#set ($competitionUrl = '')
#set ($urlIsMatch = false)
#set ($competitionMatch = '')
#set ($urlIsExtra = false)
#foreach ($_part in $urlParts)
## Check for known endpoints
#if($_part == "match" || $urlIsMatch)
#set ($urlIsMatch = true)
#set ($competitionMatch = "${competitionMatch}$_part/")
#elseif($_part == "extra")
#set ($urlIsExtra = true)
#else
#set ($competitionUrl = "${competitionUrl}$_part/")
#end
#end
#set ($competitionUrl = $competitionUrl.TrimEnd($Converter.ToChar("/")))
#getCompetitionByUrl($competitionUrl)
window.GLOBALS.adsSubSection = '$!competitionTitle';
window.GLOBALS.adsParams.contentId = '$!competitionId';
#if ($competitionKeywords != "")
window.GLOBALS.adsParams.competitionKwds = ['$!competitionKeywords.Replace("'", $_escapedQuote).Replace(", ", ",").Trim($Converter.ToChar(",")).Replace(",", "','").Trim()'];
#end
#elseif ($currentSection.get_Item(0) == "news")
#if ($currentSection.Count == 2)
#set($idArticle = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")).get_Item(0).Trim())
#getArticleById($idArticle)
#if ($articleCategory && $articleCategory != "")
#getCompetitionByCategory($articleCategories)
window.GLOBALS.adsSubSection = '$!competitionTitle';
#if ($competitionKeywords != "")
window.GLOBALS.adsParams.competitionKwds = ['$!competitionKeywords.Replace("'", $_escapedQuote).Replace(", ", ",").Trim($Converter.ToChar(",")).Replace(",", "','").Trim()'];
#end
#else
window.GLOBALS.adsSubSection = '$!articleShowTitle';
#end
window.GLOBALS.adsParams.contentId = '$!articleId';
#end
#elseif ($currentSection.get_Item(0) == "blogs")
#if ($currentSection.Count == 3)
#if ($currentSection.get_Item(1) == "view")
#set($idArticle = $URLParser.get_Item(3).ToString().Split($Converter.ToChar("-")).get_Item(0).Trim())
#getArticleById($idArticle)
#if ($articleCategory && $articleCategory != "")
#getCompetitionByCategory($articleCategories)
window.GLOBALS.adsSubSection = '$!competitionTitle';
#else
window.GLOBALS.adsSubSection = '$!articleShowTitle';
#end
window.GLOBALS.adsParams.contentId = '$!articleId';
#if ($competitionKeywords != "")
window.GLOBALS.adsParams.competitionKwds = ['$!competitionKeywords.Replace("'", $_escapedQuote).Replace(", ", ",").Trim($Converter.ToChar(",")).Replace(",", "','").Trim()'];
#end
#end
#end
#elseif ($currentSection.get_Item(0) == "videos")
#if ($currentSection.Count == 2)
#if($URLParser.get_Item(2) == "embed")
#set($_videoId = $URLParser.get_Item(3).ToString().Split($Converter.ToChar("-")).get_Item(0))
#else
#set($_videoId = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")).get_Item(0))
#end
#getVideoById($_videoId)
#if ($videoCompetition && $videoCompetition != "")
#getCompetitionByVideoCategory($videoCompetition)
window.GLOBALS.adsSubSection = '$!competitionTitle';
#else
window.GLOBALS.adsSubSection = '$!videoShowName';
#end
window.GLOBALS.adsParams.contentId = '$!videoId';
#if ($competitionKeywords != "")
window.GLOBALS.adsParams.competitionKwds = ['$!competitionKeywords.Replace("'", $_escapedQuote).Replace(", ", ",").Trim($Converter.ToChar(",")).Replace(",", "','").Trim()'];
#end
#end
#end
#end
#set ($debugAds = $Query.get_Item("__debug-ads__"))
#if($debugAds && $debugAds != "")
window.GLOBALS.adsSubProduct = '-$debugAds';
#end
#if($competitionTitle && $competitionTitle != '')
dataLayer = top.dataLayer || new Array();
dataLayer.push({'Competition': '$competitionTitle'});
#end
</script>
#end
#macro (printAd $_format)
#set ($bannerClass = '')
#set ($insertAdNotice = true)
#if ($_format == "320x50")
#set ($bannerClass = 'banner-300-100')
#end
#if ($_format == "320x50inline")
#set ($bannerClass = 'banner-300-100')
#end
#if ($_format == "300x100")
#set ($bannerClass = 'banner-300-100')
#end
#if ($_format == "300x250")
#set ($bannerClass = 'banner-300-250')
#set ($bannerClass = 'banner-300-250 onlyfromtablet') ## Temporary to show ads during JJOO
#end
#if ($_format == "300x250home")
#set ($bannerClass = 'banner-300-250-home')
#set ($bannerClass = 'banner-300-250-home onlyfromtablet') ## Temporary to show ads during JJOO
#end
#if ($_format == "728x90home")
#set ($bannerClass = 'banner-728-90-home')
#end
#if ($_format == "728x90article")
#set ($bannerClass = 'banner-728-90-article')
#end
#if ($_format == "300x600home")
#set ($bannerClass = 'banner-300-600-home')
#end
#if ($_format == "300x600article")
#set ($bannerClass = 'banner-300-600-article')
#end
#if ($_format == "300x250inline")
#set ($bannerClass = 'banner-300-250')
#set ($bannerClass = 'banner-300-250-home onlyfromtablet') ## Temporary to show ads during JJOO
#end
#if ($_format == "adhesion")
#set ($bannerClass = 'banner-320-50-oop banner-catfish')
#set ($insertAdNotice = false)
#end
#if ($_format == "catfish")
#set ($bannerClass = 'banner-320-50-oop banner-catfish')
#set ($insertAdNotice = false)
#end
#if ($_format == "960x50pushblue")
#set ($bannerClass = 'banner-960-50-push-blue')
#end
#if ($_format == "960x50push")
#set ($bannerClass = 'banner-960-50-push')
#end
#if ($_format == "960x50pushhome")
#set ($bannerClass = 'banner-960-50-push home')
#end
#if ($_format == "1x1layer")
#set ($bannerClass = 'banner-1-1-oop')
#set ($insertAdNotice = false)
#end
<article class="banner ${bannerClass}"></article>
#if ($_format == "300x250")
<article class="banner banner-300-100 onlymobile"></article> ## Temporary to show ads during JJOO
#end
#if ($_format == "300x250home")
<article class="banner banner-300-100 onlymobile"></article> ## Temporary to show ads during JJOO
#end
#if ($_format == "300x250inline")
<article class="banner banner-300-100 onlymobile"></article> ## Temporary to show ads during JJOO
#end
#end
#macro(getArticlesByTag $_type $i_keyword $_quantity $_page)
#set($articlesByTag = false)
#set($_quantity = $Converter.ToInteger($_quantity))
#getArticlesCountry()
#if($_type == "news" && $articlesCountry == "br")
#set($_type = "materia")
#end
#set($_keyword = $i_keyword)
#if($articlesCountry != "br")
#set($_keyword = $i_keyword.Replace("-", " "))
#end
#if ($_page)
## old services uses 0 based indexes
#set ($_page = $Converter.ToInteger($_page))
#if ($_page > 0)
#set ($_page = $_page - 1)
#end
#end
#set($_serviceUrl = "http://services.ficfiles.com/v2/notes/${articlesCountry}/foxsports/${_type}/default/desc/tag/${_quantity}/${_page}?p=${_keyword}")
#set($articlesByTag = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#macro(getArticlesByShow $showId $_quantity)
#set($articlesByShow = false)
#set($_quantity = $Converter.ToInteger($_quantity))
#set($_type = "news")
#set($_keyword = $showId)
#getArticlesCountry()
#if($articlesCountry == "br")
#set($_type = "materia")
#end
#if($articlesCountry != "br")
#set($_keyword = $showId.Replace("-", " "))
#end
#set($serviceUrl = "http://services.ficfiles.com/v2/notes/${articlesCountry}/foxsports/${_type}/default/desc/show/${_quantity}/1/$showId")
#set($articlesByShow = $ct_rss.ReadRss($serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#macro(getArticlesByCompetition $_competitionCategory $_quantity)
#set($articlesByCompetition = false)
#set($_quantity = $Converter.ToInteger($_quantity))
#getArticlesCountry()
#set($_type = "news")
#if($articlesCountry == "br")
#set($_type = "materia")
#end
#set($_serviceUrl = "http://services.ficfiles.com/v2/notes/${articlesCountry}/foxsports/${_type}/default/desc/category/${_quantity}/1?p=${competitionCategory}")
#set($articlesByCompetition = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#macro (getArticleIdsByHome)
#set ($articleIdsByHome = false)
#set ($_articleIdsByHome = "")
## #macro getIdFromLink($_link)
##   $_links.Replace('http://www.foxsports.com.br/news/', '').Split($Converter.ToChar("-")).get_Item(0)
## #end
## Load Editorial Info from the production servers
##/?ver=$ServerTimer.Format('mm')
#if ($Post.get_Item("__fixedEdition__"))
#set($_editionXml = $Post.get_Item("__fixedEdition__"))
#else
#if ($Country == 'br')
#set($_editionXmlUrl = "http://xml.foxsports.com.br/index.xml?ver=$ServerTimer.Format('mm')")
#else
#calculateEditorialCountry()
#set($_editionXmlUrl = "http://xml.foxsportsla.com/$editorialCountry/index.xml?ver=$ServerTimer.Format('mm')")
#end
#set($_editionXml = $IncludePageHelper.GetPage("15", $_editionXmlUrl))
#end
#getXmlContent($_editionXml "Zone" 'id="1"')
#set($xmlZoneHeros = $xmlContent)
#set($start = 2)
#set($end = 7)
#set($range = [$start..$end])
#set($_sId = 'id="%blockId%"')
#foreach($i_index in $range)
#set($_currentBlockI = "$i_index")
#set($_currentBlockId = $_sId.Replace("%blockId%", $_currentBlockI))
#getXmlContent($xmlZoneHeros "Block" $_currentBlockId)
#set($xmlZoneBlock = $xmlContent)
#if ($Country == "br")
#getXmlContent($xmlZoneBlock "link" '')
#getArticleIdFromLink($xmlContent)
#set($HighlightId = $articleId)
#else
#getXmlContent($xmlZoneBlock "idArticle" '')
#set($HighlightId = $xmlContent)
#end
#set ($_articleIdsByHome = "$_articleIdsByHome,$!HighlightId")
#end
#set ($_articleIdsList = $_articleIdsByHome.Split($Converter.ToChar(',')))
#foreach($_articleId in $_articleIdsList)
#if($_articleId != '')
#getArticleById($_articleId)
#if(!$article || $articleRedirectUrl != '' || ($articleEmbed && $articleEmbed.Contains("tableau")))
#set($_articleIdsByHome = $_articleIdsByHome.Replace(",$_articleId", ''))
#end
#end
#end
#set($articleIdsByHome = $_articleIdsByHome.Replace(',,', ',').Trim($Converter.ToChar(',')).Split($Converter.ToChar(',')))
#end
######## getHighlightArticles ########
## Used in Desktop Home for bringing three super highlight
#macro (getHighlightArticles)
#set ($superHighlightsHome = false)
#set ($_superHighlightsHome = "")
## Load Editorial Info from the production servers
#if ($Post.get_Item("__fixedEdition__"))
#set($_editionXml = $Post.get_Item("__fixedEdition__"))
#else
#if ($Country == 'br')
#set($_editionXmlUrl = "http://xml2.foxsports.com.br/index.xml?ver=$ServerTimer.Format('mm')")
#else
#calculateEditorialCountry()
#set($_editionXmlUrl = "http://xml2.foxsportsla.com/$editorialCountry/index.xml?ver=$ServerTimer.Format('mm')")
#end
#set($_editionXml = $IncludePageHelper.GetPage("15", $_editionXmlUrl))
#end
## Demo content for MAM testing
## #set($_editionXml = '<?xml version="1.0" encoding="utf-8"?><EditionData><Zone id="1"><Block id="1"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256601]]></idArticle><titleRef><![CDATA[Messi debut]]></titleRef><title><![CDATA[Pasado]]></title><link><![CDATA[http://www.foxsports.com.ar/news/254172-el-tierno-mensaje-de-antonella-para-messi-campeon]]></link><label><![CDATA[]]></label><image><![CDATA[http://assets.diario.apps.tadevelapps.com/legacy/news/diarioregistrado/559d52316d7b5.jpg]]></image><matchVendor><![CDATA[stats]]></matchVendor><matchCompetition><![CDATA[COPA]]></matchCompetition><matchCode><![CDATA[2016060610659]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="2"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256584]]></idArticle><titleRef><![CDATA[AFA ELECCIONES]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[stats]]></matchVendor><matchCompetition><![CDATA[LIB]]></matchCompetition><matchCode><![CDATA[2016071310603]]></matchCode><matchFoxPlay><![CDATA[http://foxplay.com]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="3"><hlEnabled><![CDATA[]]></hlEnabled><idArticle><![CDATA[256556]]></idArticle><titleRef><![CDATA[MOYANO MACRI]]></titleRef><title><![CDATA[Moyano: "No le tengo miedo a Mauricio Macri"]]></title><label><![CDATA[]]></label><image><![CDATA[http://cdn.foxsportsla.com/sites/foxsports-la/files/img/952x460/moya111.jpg?ver=f5c22ca2-d0d4-4fea-b0e4-40f6416ea12a]]></image><matchVendor><![CDATA[stats]]></matchVendor><matchCompetition><![CDATA[LIB]]></matchCompetition><matchCode><![CDATA[2016071410121]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block></Zone><Zone id="2"><Block id="1"><titleRef><![CDATA[Nápoli]]></titleRef><title><![CDATA[]]></title><code><![CDATA[]]></code><vendor><![CDATA[stats]]></vendor></Block><Block id="2"><titleRef><![CDATA[Milan]]></titleRef><title><![CDATA[]]></title><code><![CDATA[]]></code><vendor><![CDATA[stats]]></vendor></Block><Block id="3"><titleRef><![CDATA[Vacio]]></titleRef><title><![CDATA[]]></title><code><![CDATA[]]></code><vendor><![CDATA[]]></vendor></Block></Zone><Zone id="3"><Block id="1"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256525]]></idArticle><titleRef><![CDATA[Calendario Chicas]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="2"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256605]]></idArticle><titleRef><![CDATA[Sedes]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="3"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256583]]></idArticle><titleRef><![CDATA[Biglia]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="4"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256578]]></idArticle><titleRef><![CDATA[BOCHA DINERO]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="5"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256574]]></idArticle><titleRef><![CDATA[Bochini Riquelme]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block></Zone><Zone id="4"><Block id="1"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[superhighlights]]></moduleType></Block><Block id="2"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[FOXPlay]]></moduleType></Block><Block id="3"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[highlights]]></moduleType></Block><Block id="4"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Ad]]></title><moduleTag><![CDATA[]]></moduleTag><moduleType><![CDATA[ad728x90]]></moduleType></Block><Block id="5"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Copa América]]></title><moduleTag><![CDATA[GLO_Copa América]]></moduleTag><moduleType><![CDATA[videos]]></moduleType></Block><Block id="6"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Central FOX]]></title><moduleTag><![CDATA[Central FOX]]></moduleTag><moduleType><![CDATA[news]]></moduleType></Block><Block id="7"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[WWE]]></title><moduleTag><![CDATA[GLO_WWE]]></moduleTag><moduleType><![CDATA[videos]]></moduleType></Block></Zone></EditionData>')
## Get Super Highlight Information
## Get Zone 1
#getXmlContent($_editionXml "Zone" 'id="1"')
#set($xmlHighlightsHome = $xmlContent)
## Get Articles from 3 Blocks
#set($start = 1)
#set($end = 3)
#set($range = [$start..$end])
#set($_sId = 'id="%blockId%"')
#foreach($i_index in $range)
#set($_currentBlockI = "$i_index")
#set($_currentBlockId = $_sId.Replace("%blockId%", $_currentBlockI))
#getXmlContent($xmlHighlightsHome "Block" $_currentBlockId)
#set($xmlZoneBlock = $xmlContent)
#getXmlContent($xmlZoneBlock "idArticle" '')
#set($HighlightId = $xmlContent)
#getXmlContent($xmlZoneBlock "link" '')
#set($HighlightLink = $xmlContent)
#if ($HighlightId != "")
#set ($_superHighlightsHome = "$_superHighlightsHome,$!HighlightId")
#elseif($HighlightLink != "")
#set ($_superHighlightsHome = "$_superHighlightsHome,$!HighlightLink")
#end
#end
#set($superHighlightsHome = $_superHighlightsHome.Replace(',,', ',').Trim($Converter.ToChar(',')).Split($Converter.ToChar(',')))
#end
######## getFeaturedArticles ########
## Used in Desktop Home for bringing three super highlight
#macro (getFeaturedArticles)
#set ($featuredHome = false)
#set ($_featuredHome = "")
## Load Editorial Info from the production servers
#if ($Post.get_Item("__fixedEdition__"))
#set($_editionXml = $Post.get_Item("__fixedEdition__"))
#else
#if ($Country == 'br')
#set($_editionXmlUrl = "http://xml2.foxsports.com.br/index.xml?ver=$ServerTimer.Format('mm')")
#else
#calculateEditorialCountry()
#set($_editionXmlUrl = "http://xml2.foxsportsla.com/$editorialCountry/index.xml?ver=$ServerTimer.Format('mm')")
#end
#set($_editionXml = $IncludePageHelper.GetPage("15", $_editionXmlUrl))
#end
## Get Super Highlight Information
## Get Zone 3
#getXmlContent($_editionXml "Zone" 'id="3"')
#set($xmlZoneHeros = $xmlContent)
## Get Articles from 5 Blocks
#set($start = 1)
#set($end = 5)
#set($range = [$start..$end])
#set($_sId = 'id="%blockId%"')
#foreach($i_index in $range)
#set($_currentBlockI = "$i_index")
#set($_currentBlockId = $_sId.Replace("%blockId%", $_currentBlockI))
#getXmlContent($xmlZoneHeros "Block" $_currentBlockId)
#set($xmlZoneBlock = $xmlContent)
#getXmlContent($xmlZoneBlock "link" '')
#set($HighlightLink = $xmlContent)
#if ($Country == "br")
#getArticleIdFromLink($xmlContent)
#set($HighlightId = $articleId)
#else
#getXmlContent($xmlZoneBlock "idArticle" '')
#set($HighlightId = $xmlContent)
#end
#if ($HighlightId != "")
#set ($_featuredHome = "$_featuredHome,$!HighlightId")
#elseif($HighlightLink != "")
#set ($_featuredHome = "$_featuredHome,$!HighlightLink")
#end
#end
#set($featuredHome = $_featuredHome.Replace(',,', ',').Trim($Converter.ToChar(',')).Split($Converter.ToChar(',')))
#end
################ getArticleById ################
#macro (getArticleById $_articleId)
#set ($_articleId = $_articleId.ToString().Trim())
#set ($article = false)
#isNumber($_articleId)
#if($isNumber)
#getArticlesCountry()
#set ($_articlesById = $ct_rss.ReadRss("http://services.ficfiles.com/v2/note/$articlesCountry/foxsports/${_articleId}", 1, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#foreach($i_article in $_articlesById)
#set ($article = $i_article)
#break
#end
#end
#getArticleVars($article)
#end
#macro (getArticlesByIds $_articlesIds)
#set ($_articleIds = $_articlesIds.ToString().Trim())
#set ($articlesByIds = false)
#isNumericArray($_articlesIds)
#if($isNumericArray)
#getArticlesCountry()
#set($_idsCount = $_articlesIds.Split($Converter.ToChar(",")).Count)
#set($_serviceUrl = "http://services.ficfiles.com/v2/notes/${articlesCountry}/foxsports/${_articlesIds}")
#set($articlesByIds = $ct_rss.ReadRss($_serviceUrl, $_idsCount, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#end
#macro (getArticleIdFromLink $_link)
#set($articleId = '')
#if($_link.Contains('noticias'))
#set($_foundToken = false)
#foreach($_urlParts in $_link.Split($Converter.ToChar('/')))
#if(!$_foundToken)
#if($_urlParts == 'noticias')
#set($_foundToken = true)
#end
#else
#set($articleId = $_urlParts.Split($Converter.ToChar('-')).get_Item(0))
#break
#end
#end
#end
#end
################ getArticlesCountry ################
#macro(getArticlesCountry)
#set($articlesCountry = "ar")
#if($Country == "br")
#set($articlesCountry = "br")
#end
#end
################ getArticlesByLast ################
#macro(getArticlesByLast $_type $_quantity $_page)
#getArticlesCountry()
#set ($articlesByLast = false)
#set ($_quantity = $Converter.ToInteger($_quantity))
#set ($_page = $Converter.ToInteger($_page))
## The "news" type is called "materia" in br for some reason.
#if($_type == "news" && $articlesCountry == "br")
#set($_type = "materia")
#end
#set ($articlesByLast = $ct_rss.ReadRss("http://services.ficfiles.com/v2/notes/$articlesCountry/foxsports/$_type/default/desc/$_quantity/$_page", $_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
################ getArticlesByLast with v3 service for home ################
#macro(getArticlesByLastHome $_quantity)
#calculateEditorialCountry()
#set ($articlesByLast = false)
#if ($Country == 'br')
#set($articlesByLast = $OX2.Services.Articles.Query("pt").Country("br").Match("visible", "true").SortDesc("publishDate").Size($_quantity))
#else
#getArticlesCountry()
#set($articlesByLast = $OX2.Services.Articles.Query("es").Country("ar").Match("ref1", "$editorialCountry").Match("visible", "true").SortDesc("publishDate").Size($_quantity))
#end
#end
################ getArticlesByViews ################
#macro(getArticlesByViews $_type $_quantity)
#set ($articlesByViews = false)
#set ($_quantity = $Converter.ToInteger($_quantity))
## The "news" type is called "materia" in br for some reason.
#if($_type == "news" && $Country == "br")
#set($_type = "materia")
#end
#set ($articlesByViews = $ct_rss.ReadRss("http://services.ficfiles.com/v2/noteView/day/$Country/foxsports/$_quantity/$_type", $_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
################ getArticleVars ################
#macro(getArticleVars $_article)
#set ($article = $_article)
#set ($articleAuthorId = false)
#set ($articleAuthorPicture = '')
#set ($articleAuthorTitle = false)
#set ($articleCanonicalUrl = "#")
#set ($articleCategories = false)
#set ($articleCategory = false)
#set ($articleDate = "")
#set ($articleDescription = "")
#set ($articleEmbed = false)
#set ($articleId = false)
#set ($articleImage = false)
#set ($articleImageCaption = false)
#set ($articleOverride = false)
#set ($articlePubDate = "")
#set ($articleRedirectUrl = "")
#set ($articleShowTitle = false)
#set ($articleTags = false)
#set ($articleTitle = "")
#set ($articleTitleSEO = "")
#set ($articleType = false)
#set ($articleUrl = "#")
#set ($articleVisits = false)
#getAbsoluteURL()
#if($_article)
#set ($articleId = $_article.guid.InnerText)
#set ($articleTitle = $_article.title.InnerText)
#set ($articleTitleSEO = $_article.title_seo.InnerText)
#if($articleTitleSEO == '')
#set ($articleTitleSEO = $articleTitle)
#end
#set ($articleDate = $_article.date.InnerText)
#set ($articlePubDate = $_article.pubDate.InnerText)
#set ($articleImage = $_article.image.InnerText)
#if ($articleImage)
#set ($articleImageCaption = $article.image_caption.get_Item("values").get_Item(0).caption.InnerText)
#end
#set ($articleImage = $_article.image.InnerText)
## Encode image file
#if(!$is_local)
#set ($_articleImageParts = $articleImage.Split($Converter.ToChar("/")))
#set ($_counter = $_articleImageParts.Count - 1)
#set ($articleImageFile = $VelocityHelper.UrlEncode($_articleImageParts.get_Item($_counter).Replace(" ", "%20")).Replace("%2520", "%20").Replace("%3f","?").Replace("%3d","="))
#set($_encodedUrl = "")
#foreach($part in $_articleImageParts)
#if($velocityCount != $_articleImageParts.Count)
#set($_encodedUrl = "${_encodedUrl}${part}/")
#else
#set($_encodedUrl = "${_encodedUrl}$articleImageFile")
#end
#end
#set($articleImage = $_encodedUrl)
#end
#set ($articleDescription = $_article.description.InnerText)
#set ($articleAuthorId = $_article.author.InnerText)
#set ($articleType = $_article.type.InnerText)
#set ($articleTags = $_article.tags)
#set ($articleVisits = $_article.visits)
## Parse Match Vars
#if ($articleOverride)
#set ($articleMatchVendor = '')
#set ($articleMatchCompetition = '')
#set ($articleMatchCode = '')
#getArticleMatchVars($_article)
#end
#if ($_article.url_redirect)
#set ($articleRedirectUrl = $_article.url_redirect.get_Item("values").get_Item(0).url_redirect.InnerText)
#end
#if ($_article.embed)
#set ($articleEmbed = $_article.embed.get_Item("values").get_Item(0).embed_code.InnerText)
#end
#if($_article.AuthorInfo && $_article.AuthorInfo.title.InnerText != "")
#set ($articleAuthorTitle = $_article.AuthorInfo.title.InnerText)
#end
#if($_article.AuthorInfo && $_article.AuthorInfo.Picture.InnerText != "")
#set ($articleAuthorPicture = $_article.AuthorInfo.Picture.InnerText)
#end
#if($_article.ShowInfo && $_article.ShowInfo.title.InnerText != "")
#set ($articleShowTitle = $_article.ShowInfo.title.InnerText)
#end
#if ($articleType == "materia")
#set ($articleType = "news")
#end
#generateSlug($articleTitleSEO)
#if ($articleType == "news")
#set ($articleUrl = "$rootWWWURL/news/${_article.guid.InnerText}-${__slug}")
#else
#set ($articleUrl = "$rootWWWURL/blogs/view/${_article.guid.InnerText}-${__slug}")
#end
## This is to keep the old news URL's structure in facebook comments [FOXS-1879]
#if ($articleType == "news")
#set ($articleCanonicalUrl = "$rootWWWURL/noticias/${articleId}-${__slug}")
#else
#if ($Country == 'br')
#set ($articleCanonicalUrl = "$rootWWWURL/blogs/view/${articleId}-${__slug}")
#else
#set ($articleCanonicalUrl = "$rootWWWURL/columnistas/view/${articleId}-${__slug}")
#end
#end
#if($_article.categories.Count>0)
#if($_article.categories.get_Item('category').Count == 0)
#set ($articleCategories = $_article.categories.get_Item('category').InnerText)
#else
#set ($articleCategories = $_article.categories.get_Item('category').get_Item(0))
#end
#end
#if($articleCategories)
#set ($articleCategory = $articleCategories.Split($Converter.ToChar(">")))
#set ($_counter = $articleCategory.Count - 1)
#set ($articleCategory = $articleCategory.get_Item($_counter))
#end
#end
#end
################ getArticleVars ################
#macro(getArticleVarsV3 $_article)
#set ($article = $_article)
#set ($articleAuthorId = false)
#set ($articleAuthorPicture = '')
#set ($articleAuthorTitle = false)
#set ($articleCanonicalUrl = "#")
#set ($articleCategories = "")
#set ($articleCategory = "")
#set ($articleDate = "")
#set ($articleDescription = "")
#set ($articleEmbed = false)
#set ($articleId = false)
#set ($articleImage = "")
#set ($articleImageCaption = false)
#set ($articleOverride = false)
#set ($articlePubDate = "")
#set ($articleRedirectUrl = "")
#set ($articleShowTitle = false)
#set ($articleTags = false)
#set ($articleTitle = "")
#set ($articleTitleSEO = "")
#set ($articleType = false)
#set ($articleUrl = "#")
#set ($articleVisits = false)
#getAbsoluteURL()
#if($_article)
#set ($articleId = "$_article.code")
#set ($articleTitle = $_article.title)
#set ($articleTitleSEO = $_article.seotitle)
#if($articleTitleSEO == '')
#set ($articleTitleSEO = $articleTitle)
#end
## #set ($articleDate = ??) ## This seems to be no longer available in v3
#set ($articlePubDate = $_article.get_Item('publishDate').ToString("R").Replace("GMT", "0000"))
#set ($articleImage = "$_article.get_Item('image')") ## careful: we need this to be a string and is not
#if(!$is_local)
#set ($_articleImageParts = $articleImage.Split($Converter.ToChar("/")))
#set ($_counter = $_articleImageParts.Count - 1)
#set ($articleImageFile = $VelocityHelper.UrlEncode($_articleImageParts.get_Item($_counter).Replace(" ", "%20")).Replace("%2520", "%20").Replace("%3f","?").Replace("%3d","="))
#set($_encodedUrl = "")
#foreach($part in $_articleImageParts)
#if($velocityCount != $_articleImageParts.Count)
#set($_encodedUrl = "${_encodedUrl}${part}/")
#else
#set($_encodedUrl = "${_encodedUrl}$articleImageFile")
#end
#end
#set($articleImage = $_encodedUrl)
#end
#set ($articleDescription = $_article.description)
#set ($articleAuthorId = $_article.get_Item("author").get_Item("id"))
#set ($articleType = $_article.get_Item("type").get_Item("description"))
#set ($articleTags = $_article.get_Item("tags"))
#set ($articleVisits = $_article.get_Item("viewsByWeek").get_Item(0).get_Item("qty"))
## I haven't found these ones being fetched from a service request yet
##
##    #if ($_article.url_redirect)
##      #set ($articleRedirectUrl = $_article.url_redirect.get_Item("values").get_Item(0).url_redirect.InnerText)
##    #end
##    #if ($_article.embed)
##      #set ($articleEmbed = $_article.embed.get_Item("values").get_Item(0).embed_code.InnerText)
##    #end
#if($_article.get_Item("author") && $_article.get_Item("author").get_Item("name") != "")
#set($articleAuthorTitle = $_article.get_Item("author").get_Item("name"))
#end
## #if($_article.AuthorInfo && $_article.AuthorInfo.title.InnerText != "")
##   #set ($articleAuthorTitle = $_article.AuthorInfo.title.InnerText)
## #end
##    #if($_article.AuthorInfo && $_article.AuthorInfo.Picture.InnerText != "")
##      #set ($articleAuthorPicture = $_article.AuthorInfo.Picture.InnerText)
##    #end
#if($_article.get_Item("show") && $_article.get_Item("name") != "")
#set ($articleShowTitle = $_article.get_Item("show").get_Item("name"))
#end
#if ($articleType == "materia")
#set ($articleType = "news")
#end
#generateSlug($articleTitleSEO)
#if ($articleType == "news")
#set ($articleUrl = "$rootWWWURL/news/${_article.code}-${__slug}")
#else
#set ($articleUrl = "$rootWWWURL/blogs/view/${_article.code}-${__slug}")
#end
## This is to keep the old news URL's structure in facebook comments [FOXS-1879]
#if ($articleType == "news")
#set ($articleCanonicalUrl = "$rootWWWURL/noticias/${articleId}-${__slug}")
#else
#if ($Country == 'br')
#set ($articleCanonicalUrl = "$rootWWWURL/blogs/view/${articleId}-${__slug}")
#else
#set ($articleCanonicalUrl = "$rootWWWURL/columnistas/view/${articleId}-${__slug}")
#end
#end
#set ($str_categoriesObj = "$_article.get_Item('categories').get_Item(0).get_Item('category')")
#set ($ar_categories = $str_categoriesObj.Split($Converter.ToChar(">")))
#set ($_counter = $ar_categories.Count - 1)
#set ($ar_categories = $ar_categories.get_Item($_counter).Trim())
#set($articleCategory = $ar_categories)
## #if($_article.categories.Count > 0)
## #end
#end
#end
################ getArticleMatchVars ################
#macro(getArticleMatchVars $_article)
#set ($_articleMatch = '')
#set ($articleMatchVendor = '')
#set ($articleMatchCompetition = '')
#set ($articleMatchCode = '')
#set ($articleMatchLogo = '')
#set ($articleMatchFoxPlayId = false)
#if($_article.match)
#set ($_articleMatch = $_article.match)
#set ($articleMatch = $_articleMatch)
#if($_articleMatch && $_articleMatch.get_Item("values").get_Item(0).matchId.InnerText != '')
#set ($articleMatch = $_articleMatch.get_Item("values").get_Item(0))
#set ($articleMatchVendor = $articleMatch.vendor.InnerText)
#set ($articleMatchCompetition = $articleMatch.competition_code.InnerText)
#set ($articleMatchCode = $articleMatch.matchId.InnerText)
#set ($articleMatchLogo = $articleMatch.logo.InnerText)
#set ($articleMatchFoxPlayId = $articleMatch.foxplay_id.InnerText)
#end
#end
#end
################ getArticleVideoVars ################
#macro(getArticleVideoVars $_articleVideo)
#set ($articleVideo = $_articleVideo)
#set ($articleVideoIds = false)
#if($_articleVideo && $_articleVideo.get_Item("values").get_Item(0).video.InnerText != '')
#set ($articleVideoIds = $_articleVideo.get_Item("values").get_Item(0).video.InnerText.Split($Converter.ToChar(',')))
#end
#end
#macro (getArticleRelated $_article)
#set ($relatedArticles = false)
#getArticleVars($_article)
#if($_article.related)
#set($_related_ids = $_article.related.get_Item("values").get_Item(0).article_codes.InnerText)
#getArticlesByIds($_related_ids)
#set ($relatedArticles = $articlesByIds)
#else
## No articles related defined on article. Getting last news from same category
## If no category defined get lastest news overall
#if($articleCategory)
#getArticlesByCompetition($articleCategory 6)
#set ($relatedArticles = $articlesByCompetition)
#if($relatedArticles.Count <= 1)
#set ($_is_lastNews = true)
#end
#else
#set ($_is_lastNews = true)
#getArticlesByLast("news" 6 1)
#set ($relatedArticles = $articlesByLast)
#end
#end
#end
#macro (getBlogById $_blogId)
##set ($_blogId = $_blogId.ToString().Trim())
#set ($blogById = false)
#isNumber($_blogId)
#if($isNumber)
#set ($_blogsById = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/false/${_blogId}", 1, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#foreach($i_blog in $_blogsById)
#set ($blogById = $i_blog)
#break
#end
#end
#getBlogVars($blogById)
#end
#macro (getBlog $blogUrl)
#set($blog = false)
#set ($blogUrl = $blogUrl.Replace("/index.html","").TrimEnd($Converter.ToChar("/")).ToLower())
#set($blogUrl = $blogUrl.Replace("${Country}/", ""))
#if($Country != 'br')
#set($blogUrl = $blogUrl.Replace("blogs", "columnistas"))
#end
#set ($blogData = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/false/Notes_Author?p={Blog==/$blogUrl}", 10, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems )
#if($blogData.Count>0)
#set ($blog = $blogData.get_Item(0))
#end
#getBlogVars($blog)
#end
#macro(getArticlesByBlog $i_blogCode $i_quantity)
#set($blogArticles = false)
#set ($i_quantity = $Converter.ToInteger($i_quantity))
#getArticlesCountry()
#set ($blogArticles = $ct_rss.ReadRss("http://services.ficfiles.com/v2/notes/$articlesCountry/foxsports/blogpost/date/desc/author/$i_quantity/1/${i_blogCode}", $i_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#macro (getBlogVars $i_blog)
#set($blog = $i_blog)
#set($blogId = '')
#set($blogName = '')
#set($blogDescription = '')
#set($blogTitle = '')
#set($blogLogo = 'http://cdn-flac.ficfiles.com/sites/foxsports-la/objects/img/fs-default.png')
#set($blogPicture = 'http://cdn-flac.ficfiles.com/sites/foxsports-br/objects/img/fs-default.png')
#set($blogBlog = '')
#set($blogBackground = '')
#set($blogTwitter = '')
#if($i_blog)
#set ($blogName = $i_blog.title.InnerText)
#set ($blogTitle = $i_blog.Blogname.InnerText)
#set ($blogId = $i_blog.code.InnerText)
#set ($blogDescription = $i_blog.blogDescription.InnerText)
#set ($blogTwitter = $i_blog.Twitter.InnerText)
#set ($blogBlog = $i_blog.Blog.InnerText)
#set ($blogBackground = $i_blog.Background.InnerText)
#set ($blogPicture = $i_blog.Picture.InnerText)
#if($i_blog.Logo.InnerText != '')
#set ($blogLogo = $i_blog.Logo.InnerText)
#end
#end
#end
#macro(getBlogAuthors)
#set($blogAuthors = false)
#set ($i_quantity = $Converter.ToInteger(200))
#set ($serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/true/Notes_Author/$i_quantity/1/title/asc")
#set ($blogAuthors = $ct_rss.ReadRss($serviceUrl, $i_quantity, $Converter.ToInteger($ct_cacheConfig.notes)).RssItems)
#end
#macro (getCompetitionByCategory $competition_category)
#set($competitionByCategory = false)
#getArticlesCountry()
#set ($_serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/Competition/true?p=$competition_category")
#set ($_competitions = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionByCategory = $_competition)
#break
#end
#getCompetitionVars($competitionByCategory)
#end
#macro (getCompetitionById $competitionId)
#set($competitionById = false)
#isNumericArray($competitionId)
#if($isNumericArray)
#getArticlesCountry()
#set ($_competitions = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/true/${competitionId}", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionById = $_competition)
#break
#end
#end
#getCompetitionVars($competitionById)
#end
#macro (getCompetitionByVideoCategory $videoCategory)
#set($competitionByVideoCategory = false)
#getArticlesCountry()
#set ($_competitions = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/false/Competition?p=%7Bvideo_category==$videoCategory%7D", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionByVideoCategory = $_competition)
#break
#end
#getCompetitionVars($competitionByVideoCategory)
#end
#macro (getCompetitionTitleByVideoCategory $videoCategory)
#set($competitionTitleByVideoCategory = false)
#getArticlesCountry()
#set ($_competitions = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/false/Competition?p=%7Bvideo_category==$videoCategory%7D", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionTitleByVideoCategory = $_competition.title.InnerText)
#break
#end
#end
#macro (getCompetitionByStatisticsCode $statistics_code)
#set ($competitionByStatisticsCode = false)
#getArticlesCountry()
#set ($_competitions = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/false/Competition?p=%7Bstatistics_code==$statistics_code%7D", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionByStatisticsCode = $_competition)
#break
#end
#getCompetitionVars($competitionByStatisticsCode)
#end
#macro (getCompetitionByUrl $competition_url)
#set($competitionByUrl = false)
#getArticlesCountry()
#set ($_serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/false/Competition?p=%7Bcompetition_url==$competition_url%7D&")
#set ($_competitions = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_competition in $_competitions)
#set ($competitionByUrl = $_competition)
#break
#end
#getCompetitionVars($competitionByUrl)
#if (!$statistic_type && $competitionShowNews == "no")
#set ($statistic_type = "resultados")
#set ($statistic_position = $competitionShowResults)
#end
#end
#macro (getCompetitionVars $_competition)
#set ($competition = $_competition)
#set ($competitionId = '')
#set ($competitionBackground = '')
#set ($competitionTitle = '')
#set ($competitionAdKeyword = false)
#set ($competitionKeywords = '')
#set ($competitionDescription = '')
#set ($competitionThumbnail = 'http://cdn-flac.ficfiles.com/sites/foxsports-la/objects/img/fs-default.png')
#set ($competitionShowNews = 'no')
#set ($competitionShowResults = 'no')
#set ($competitionCategory = false)
#set ($competitionStatisticsProvider = '')
#set ($competitionStatisticCode = '')
#set ($competitionStatsVendorCode = '')
#set ($competitionUrl = '#')
#set ($competitionCanonicalUrl = '#')
#set ($competitionStatsTier = '')
#set ($competitionDataFactoryTier = '')
#set ($competitionVideoCategory = '')
#set ($competitionWidgetId = '')
#set ($competitionShield = '')
#set ($competitionRelCompetitions = '')
## Dynamic Widgets
#set ($competitionWidget1Name = '')
#set ($competitionWidget1URL= '')
#set ($competitionWidget2Name = '')
#set ($competitionWidget2URL= '')
#set ($competitionWidget3Name = '')
#set ($competitionWidget3URL= '')
#set ($competitionWidget4Name = '')
#set ($competitionWidget4URL= '')
#set ($competitionWidget5Name = '')
#set ($competitionWidget5URL= '')
#set ($competitionWidget6Name = '')
#set ($competitionWidget6URL= '')
#set ($competitionWidget7Name = '')
#set ($competitionWidget7URL= '')
#set ($competitionWidget8Name = '')
#set ($competitionWidget8URL= '')
#set ($competitionWidget9Name = '')
#set ($competitionWidget9URL= '')
#set ($competitionIframeUrl = '')
#set ($competitionIframeTitle = '')
#set ($competitionIframeHeight = '')
#if($_competition)
#set ($competitionId = $_competition.code.InnerText)
#set ($competitionBackground = $_competition.competition_bg.InnerText)
#set ($competitionTitle = $_competition.title.InnerText)
#set ($competitionAdKeyword = $VelocityHelper.Normalize($_competition.ad_keyword.InnerText))
#set ($competitionKeywords = $_competition.keywords.InnerText)
#set ($competitionDescription = $_competition.competitionDescription.InnerText)
#if ($_competition.Thumbnail.InnerText != '')
#set ($competitionThumbnail = $_competition.Thumbnail.InnerText)
#end
#set ($competitionShowNews = $_competition.show_news.InnerText)
#set ($competitionShowResults = $_competition.show_results.InnerText)
#if($_competition.categories.get_Item('category').Count == 0)
#set ($competitionCategory = $_competition.categories.get_Item('category').InnerText)
#else
#set ($competitionCategory = $_competition.categories.get_Item('category').get_Item(0).InnerText)
#end
#set ($competitionStatisticsProvider = $_competition.statistics_provider.InnerText)
#set ($competitionStatisticCode = $_competition.statistics_code.InnerText)
#set ($competitionStatsVendorCode = $_competition.stats_vendor_code.InnerText)
#set ($competitionUrl = $_competition.competition_url.InnerText)
#set ($competitionCanonicalUrl = "$rootWWWURL/$competitionUrl")
#set ($competitionStatsTier = $_competition.stats_tiers.InnerText)
#set ($competitionDataFactoryTier = $_competition.df_tiers.InnerText)
#set ($competitionVideoCategory = $_competition.video_category.InnerText)
#set ($competitionWidgetId = $_competition.widget_competition_id.InnerText)
#set ($competitionShield = $_competition.shield.InnerText)
#set ($competitionRelCompetitions = $_competition.related_competitions.InnerText)
## Widgets
#set ($current_time = $ct_cal.CurrentDay().ToString('yyyyMMdd'))
#set ($competitionWidget1Name = $_competition.widget_name_1.InnerText)
#set ($competitionWidget1URL = $_competition.widget_url_1.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget2Name = $_competition.widget_name_2.InnerText)
#set ($competitionWidget2URL = $_competition.widget_url_2.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget3Name = $_competition.widget_name_3.InnerText)
#set ($competitionWidget3URL = $_competition.widget_url_3.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget4Name = $_competition.widget_name_4.InnerText)
#set ($competitionWidget4URL = $_competition.widget_url_4.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget5Name = $_competition.widget_name_5.InnerText)
#set ($competitionWidget5URL = $_competition.widget_url_5.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget6Name = $_competition.widget_name_6.InnerText)
#set ($competitionWidget6URL = $_competition.widget_url_6.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget7Name = $_competition.widget_name_7.InnerText)
#set ($competitionWidget7URL = $_competition.widget_url_7.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget8Name = $_competition.widget_name_8.InnerText)
#set ($competitionWidget8URL = $_competition.widget_url_8.InnerText.Replace('$current_time', $current_time))
#set ($competitionWidget9Name = $_competition.widget_name_9.InnerText)
#set ($competitionWidget9URL = $_competition.widget_url_9.InnerText.Replace('$current_time', $current_time))
## Extra
#set($competitionIframeUrl = $competition.iframe_url.innerText)
#set($competitionIframeTitle = $competition.iframe_title.innerText)
#set($competitionIframeHeight = $competition.iframe_height.innerText)
## usar camelCase
#set ($competitionKyw = 'USE $competitionKeywords INSTEAD')
#set ($competitionDesc = 'USE $competitionDescription INSTEAD')
#set ($competitionImg = 'USE $competitionThumbnail INSTEAD')
#set ($_comp_category = 'USE $competitionCategory INSTEAD')
#set ($CompStatisticsProvider = 'USE $competitionStatisticsProvider INSTEAD')
#set ($CompStatisticCode = 'USE $competitionStatisticCode INSTEAD')
#set ($StatsCompStatisticCode = 'USE $competitionStatsVendorCode INSTEAD')
#set ($CompStatisticURL = 'USE $competitionUrl INSTEAD')
#set ($StatsTier = 'USE $competitionStatsTier INSTEAD')
#set ($DataFactoryTier = 'USE $competitionDataFactoryTier INSTEAD')
#end
#end
#macro(languageVars)
#set($year = $ServerTimer.Format('yyyy'))
#if ($Country != 'br')
## Español
#set($ds_lang_backtotop = 'Volver al top')
#set($ds_lang_blog_featured_authors = 'Columnistas destacados')
#set($ds_lang_blog_last = 'Últimas columnas')
#set($ds_lang_blog_last_posts_from = 'Últimas columnas de')
#set($ds_lang_blog_load_more = 'Ver más')
#set($ds_lang_blog_more = 'ver todas las columnas')
#set($ds_lang_blog_more_from = 'Más posts de ')
#set($ds_lang_blog_other_authors = 'Otros Columnistas')
#set($ds_lang_blog_popular = 'Columnas más vistas')
#set($ds_lang_blog_posts_by_authors = 'Últimas columnas')
#set($ds_lang_blog_show_all_authors = 'Todos los Columnistas')
#set($ds_lang_blog_show_authors = 'ver columnistas')
#set($ds_lang_blog_title_p = 'Columnistas')
#set($ds_lang_breakingNews_title = 'Último Momento:')
#set($ds_lang_competitions_more_news = 'Más noticias')
#set($ds_lang_competitions_news = 'Noticias')
#set($ds_lang_competitions_title = 'Competencias')
#set($ds_lang_competitions_videos = 'Videos')
#set($ds_lang_epg_live = 'En vivo')
#set($ds_lang_epg_now = 'Ahora')
#set($ds_lang_epg_show_more = 'Ver toda la programacion')
#set($ds_lang_error_check_other_contents = 'Disfrutá de alguno de estos contenidos:')
#set($ds_lang_error_come_back_later = 'Intenta ingresar nuevamente en unos minutos')
#set($ds_lang_error_content_not_available = 'El contenido al que esta intentando acceder no está disponible. Intente volviendo a la <a href="/">página de inicio</a>')
#set($ds_lang_error_title = 'Error')
#set($ds_lang_error_will_be_back = '¡Enseguida volvemos!')
#set($ds_lang_footer_advertise = '<a href="http://www.foxsportsla.com/publicidad/" target="_blank">Anuncie</a>')
#set($ds_lang_footer_advertisingChoices = 'Advertising Choices')
#set($ds_lang_footer_contactUs = '<a href="http://www.foxsports.com.br/contactus/index.html" target="_blank">Contactenos</a>')
#set($ds_lang_footer_privacyPolicies = 'Políticas de Privacidad (Actualizadas)')
#set($ds_lang_footer_termsOfUse = 'Términos de Uso')
#set($ds_lang_footer_termsOfUse_new = '(¿Qué hay de nuevo?)')
#set($ds_lang_footer_trademark_line1 = "Trademark and Copyright Notice™ © $year FOX and its related entities. All rights reserved.")
#set($ds_lang_footer_trademark_line2 = 'El uso de este sitio (incluso cualquier parte y componente) constituye su aceptación de estos <a href="/terms-of-use" target="_blank">Términos de Uso</a> <a href="/whats-new/" target="_blank">(¿Qué hay de nuevo?)</a> y <a href="/privacy" target="_blank">Políticas de Privacidad</a>.')
#set($ds_lang_foxplay = 'FOX Play')
#set($ds_lang_foxplay_all_events = 'Mira en Vivo todo <strong>FOX Sports</strong> en <strong>FOX Play</strong>')
#set($ds_lang_foxplay_live = 'En vivo en FOX Play')
#set($ds_lang_foxplay_show_more = 'Ver programación')
#set($ds_lang_gallery_others_title = 'Otras galerías')
#set($ds_lang_gallery_tags_title = 'Tags')
#set($ds_lang_gallery_title = 'Galerías')
#set($ds_lang_gallery_title_expanded = 'Galerías FOX Sports')
#set($ds_lang_girls_title = 'Chica FOX')
#set($ds_lang_highlights = 'Destacados FOX Sports')
#set($ds_lang_load_more = 'Cargar más')
#set($ds_lang_matchcast_title = 'Partido')
#set($ds_lang_news_also_read = 'Lea también')
#set($ds_lang_news_author_by = 'Por')
#set($ds_lang_news_last = 'Últimas Noticias')
#set($ds_lang_news_leave_comments = 'Deja tu comentario')
#set($ds_lang_news_more = 'ver más noticias')
#set($ds_lang_news_other_links = 'Otros Links')
#set($ds_lang_news_popular = 'Noticias más vistas')
#set($ds_lang_news_related = 'Noticias Relacionadas')
#set($ds_lang_news_tags = 'Tags')
#set($ds_lang_news_the_popular = 'Más vistas')
#set($ds_lang_news_title_p = 'Noticias')
#set($ds_lang_news_watch_live_match = 'Ver partido online')
#set($ds_lang_now = 'Lo último')
#set($ds_lang_poll_show_results = 'Ver resultados')
#set($ds_lang_poll_thanks_voting = 'Gracias por votar')
#set($ds_lang_poll_title = 'Encuesta')
#set($ds_lang_poll_vote = 'Votar')
#set($ds_lang_ranking = 'Ranking las más vistas')
#set($ds_lang_schedule_grid_title = 'Grilla de programación de TV')
#set($ds_lang_schedule_no_results = 'No hay información disponible para esta fecha')
#set($ds_lang_schedule_title = 'Programación')
#set($ds_lang_search = 'Buscar')
#set($ds_lang_search_amount_results = 'resultados de búsqueda')
#set($ds_lang_search_more_results = 'mas resultados')
#set($ds_lang_search_no_results = 'No se encontraron resultados. Por favor, intente de nuevo.')
#set($ds_lang_search_placeholder = 'Buscar en Fox Sports')
#set($ds_lang_see_more_blogs = 'ver más')
#set($ds_lang_see_more_f = 'ver todas')
#set($ds_lang_see_more_m = 'ver todos')
#set($ds_lang_share_label = 'compartido')
#set($ds_lang_show_day = 'Día')
#set($ds_lang_show_origin_country = 'País de origen')
#set($ds_lang_show_replays = 'Repeticiones')
#set($ds_lang_show_schedule = 'Días y horarios')
#set($ds_lang_show_score = 'Calificación')
#set($ds_lang_tags_load_more = 'Ver más')
#set($ds_lang_team_featured_gals = 'Galerías destacadas')
#set($ds_lang_team_fixture = 'Fixture')
#set($ds_lang_team_fixture_title = 'Fixture del campeonato')
#set($ds_lang_team_front = 'Portada')
#set($ds_lang_team_ranking = 'Posiciones')
#set($ds_lang_team_ranking_table = 'Tabla de posiciones')
#set($ds_lang_team_stats = 'Estadísticas')
#set($ds_lang_videos_copy_link = 'Copiar Link')
#set($ds_lang_videos_geo_restriction = '[ Este contenido no está disponible en tu zona geográfica ]')
#set($ds_lang_videos_highlighted_title = '<strong>Video</strong> destacado')
#set($ds_lang_videos_last = 'Ultimos videos')
#set($ds_lang_videos_last_alt = '<strong>Últimos</strong> videos')
#set($ds_lang_videos_latest_title = '<strong>Videos</strong> FOX Sports')
#set($ds_lang_videos_more = 'ver más videos')
#set($ds_lang_videos_playlist = 'Playlist')
#set($ds_lang_videos_title = 'Videos')
#set($ds_lang_videos_insert = 'Insertar video')
#set($ds_lang_videos_sharing = 'Compartir video')
#set($ds_lang_videos_share_this = 'Compartir este video')
#set($ds_lang_videos_size = 'Tamaño del video')
#set($ds_lang_nav_bar_competitions = 'Competencias')
#set($ds_lang_nav_bar_sections = 'Secciones')
#set($ds_lang_ad_notice = 'Publicidad')
#set($ds_lang_mam_final = 'Final')
#set($ds_lang_mam_watch_fox = 'Miralo en')
#else
## Portugues
#set($ds_lang_backtotop = 'Voltar ao topo')
#set($ds_lang_blog_featured_authors = 'Blogueiros')
#set($ds_lang_blog_last = 'Últimos posts')
#set($ds_lang_blog_last_posts_from = 'Últimos posts de')
#set($ds_lang_blog_load_more = 'Ver mais')
#set($ds_lang_blog_more = 'Ver todos os posts')
#set($ds_lang_blog_more_from = 'Mais posts de ')
#set($ds_lang_blog_other_authors = 'Outros blogueiros')
#set($ds_lang_blog_popular = 'Blogs mais populares')
#set($ds_lang_blog_posts_by_authors = 'Últimos posts')
#set($ds_lang_blog_show_all_authors = 'Ver todos os blogueiros')
#set($ds_lang_blog_show_authors = 'Ver blogueiros')
#set($ds_lang_blog_title_p = 'Blogs')
#set($ds_lang_breakingNews_title = 'Urgente:')
#set($ds_lang_competitions_more_news = 'Mais notícias')
#set($ds_lang_competitions_news = 'Notícias')
#set($ds_lang_competitions_title = 'Competencias')
#set($ds_lang_competitions_videos = 'Vídeos')
#set($ds_lang_epg_live = 'Ao vivo')
#set($ds_lang_epg_now = 'Agora')
#set($ds_lang_epg_show_more = 'Ver toda a programação')
#set($ds_lang_error_check_other_contents = 'Aproveite algum destes conteúdos:')
#set($ds_lang_error_come_back_later = 'Tente entrar novamente em alguns minutos')
#set($ds_lang_error_content_not_available = 'O conteúdo que está tentando acessar não está disponível. Tente de novo voltando à <a href="/">página inicial</a>')
#set($ds_lang_error_title = 'Erro')
#set($ds_lang_error_will_be_back = 'Voltamos logo!')
#set($ds_lang_footer_advertise = '<a href="http://www.foxsports.com.br/publicidade/" target="_blank">Anuncie</a>')
#set($ds_lang_footer_advertisingChoices = 'Advertising Choices')
#set($ds_lang_footer_contactUs = '<a href="http://www.foxsports.com.br/contactus/index.html" target="_blank">Fale Conosco</a>')
#set($ds_lang_footer_privacyPolicies = 'Políticas de Privacidade')
#set($ds_lang_footer_termsOfUse = 'Termos de Uso')
#set($ds_lang_footer_trademark_line1 = "Trademark and Copyright Notice™ © $year FOX and its related entities. Todos os direitos reservados.")
#set($ds_lang_footer_trademark_line2 = 'O uso deste site (incluindo qualquer parte ou componente) constitui a aceitação dos <a href="/terms-of-use" target="_blank">Termos de Uso</a> e <a href="/privacy" target="_blank">Políticas de Privacidade</a>.')
#set($ds_lang_foxplay = 'FOX Play')
#set($ds_lang_foxplay_all_events = 'Veja ao vivo os canais <strong>FOX Sports</strong> pelo <strong>FOX Play</strong>')
#set($ds_lang_foxplay_live = 'Ao vivo no FOX Play')
#set($ds_lang_foxplay_show_more = 'Ver programação')
#set($ds_lang_gallery_others_title = 'Outras galerias')
#set($ds_lang_gallery_tags_title = 'Tags')
#set($ds_lang_gallery_title = 'Galerias')
#set($ds_lang_gallery_title_expanded = 'Galerias FOX Sports')
#set($ds_lang_girls_title = 'Belas do Esporte')
#set($ds_lang_highlights = 'Destaques')
#set($ds_lang_load_more = 'Ver mais')
#set($ds_lang_matchcast_title = 'Partida')
#set($ds_lang_news_author_by = 'Por')
#set($ds_lang_news_last = 'Últimas Notícias')
#set($ds_lang_news_leave_comments = 'Deixe seu comentário')
#set($ds_lang_news_more = 'Ver mais notícias')
#set($ds_lang_news_other_links = 'Links relacionados')
#set($ds_lang_news_popular = 'Notícias mais populares')
#set($ds_lang_news_related = 'Noticias Relacionadas')
#set($ds_lang_news_tags = 'Tags')
#set($ds_lang_news_the_popular = 'As mais populares')
#set($ds_lang_news_title_p = 'Notícias')
#set($ds_lang_news_watch_live_match = 'Ver partida online')
#set($ds_lang_now = 'Últimas notícias')
#set($ds_lang_poll_show_results = 'Ver resultados')
#set($ds_lang_poll_thanks_voting = 'Obrigado por votar')
#set($ds_lang_poll_title = 'Enquete')
#set($ds_lang_poll_vote = 'Votar')
#set($ds_lang_ranking = 'Ranking das mais vistas')
#set($ds_lang_schedule_grid_title = 'Programação na TV')
#set($ds_lang_schedule_no_results = 'Não há informação disponível para esta data')
#set($ds_lang_schedule_title = 'Programação')
#set($ds_lang_search = 'Pesquisar')
#set($ds_lang_search_amount_results = 'resultados da busca')
#set($ds_lang_search_more_results = 'mais resultados')
#set($ds_lang_search_no_results = 'Não foram encontrados resultados. Por favor, tente de novo.')
#set($ds_lang_search_placeholder = 'Buscar no FOX Sports')
#set($ds_lang_see_more_blogs = 'ver todas')
#set($ds_lang_see_more_f = 'ver todas')
#set($ds_lang_see_more_m = 'ver todos')
#set($ds_lang_share_label = 'compartilhado')
#set($ds_lang_show_day = 'Dia')
#set($ds_lang_show_origin_country = 'País de origem')
#set($ds_lang_show_replays = 'Próximas exibições')
#set($ds_lang_show_schedule = 'Dias e horários')
#set($ds_lang_show_score = 'Qualificação')
#set($ds_lang_tags_load_more = 'Ver mais')
#set($ds_lang_team_featured_gals = 'Galerias em destaque')
#set($ds_lang_team_fixture = 'Calendário')
#set($ds_lang_team_fixture_title = 'Fixture del campeonato')
#set($ds_lang_team_front = 'Frente')
#set($ds_lang_team_ranking = 'Posições')
#set($ds_lang_team_ranking_table = 'Posições')
#set($ds_lang_team_stats = 'Estatísticas')
#set($ds_lang_videos_copy_link = 'Copiar o link')
#set($ds_lang_videos_geo_restriction = '[ Este conteúdo não está disponível na sua região ]')
#set($ds_lang_videos_highlighted_title = '<strong>Destaques</strong> em vídeo')
#set($ds_lang_videos_last = 'Últimos vídeos')
#set($ds_lang_videos_last_alt = '<strong>Últimos</strong> vídeos')
#set($ds_lang_videos_latest_title = '<strong>Vídeos</strong> FOX Sports')
#set($ds_lang_videos_more = 'ver mais vídeos')
#set($ds_lang_videos_playlist = 'Playlist')
#set($ds_lang_videos_title = 'Vídeos')
#set($ds_lang_videos_insert = 'Inserir vídeo')
#set($ds_lang_videos_sharing = 'Compartilhar vídeo')
#set($ds_lang_videos_share_this = 'Compartilhar este vídeo')
#set($ds_lang_videos_size = 'Tamanho do vídeo')
#set($ds_lang_nav_bar_competitions = 'Competições')
#set($ds_lang_nav_bar_sections = 'Seções')
#set($ds_lang_ad_notice = 'Publicidade')
#set($ds_lang_mam_final = 'Final')
#set($ds_lang_mam_watch_fox = 'Veja no')
#end
#end
#macro (getSocialLinks)
## HACK: until https://foxites.atlassian.net/browse/FOXORIG-807 if fixed
## Context objects are not handling the country as expected
#if ($Country == 'br')
#set ($socialLinks = $ct_socialLinksBrasil)
#else
#set ($socialLinks = $ct_socialLinksSouth)
#set($cst_NconeCountreis = '|ca|cr|do|gt|hn|mx|ni|pa|sv|us|ve|')
#set($cst_Chile = '|cl|')
#set($cst_Colombia = '|co|')
#if($cst_NconeCountreis.Contains("|$Country.ToLower()|"))
#set ($socialLinks = $ct_socialLinksNorth)
#elseif($cst_Chile.Contains("|$Country.ToLower()|"))
#set ($socialLinks = ${ct_socialLinksSouth-cl})
#set ($socialLinks = $ct_socialLinksSouth)
#elseif($cst_Colombia.Contains("|$Country.ToLower()|"))
#set ($socialLinks = ${ct_socialLinksSouth-co})
#set ($socialLinks = $ct_socialLinksSouth)
#end
#end
#end
#macro(getTrendMenu)
#set($_xmlUrl = "http://ds2.foxsportsla.com/$Country/ds_breakingNews.xml?t_=$ServerTimer.Format('mm')")
#if(!$_editionXml || $_xmlUrl.Contains("error"))
#set($_xmlUrl = "http://ds2.foxsportsla.com/$Country/ds_breakingNews.xml?t_=$ServerTimer.Format('ffff')")
#end
$_xmlUrl
#set($_editionXml = $IncludePageHelper.GetPage("30", $_xmlUrl))
$_editionXml
#getXmlAttribute($_editionXml 'item' 'enabled')
#set($enabled = $xmlAttribute)
$enabled
#getXmlAttribute($_editionXml 'item' 'title')
#set($title = $xmlAttribute)
$title
#getXmlAttribute($_editionXml 'item' 'link')
#set($link = $xmlAttribute)
$link
#end
#macro (getFrenteFrenteByUrl $i_Url)
#set($frenteFrenteByUrl = false)
#getArticlesCountry()
#set ($_heads = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/false/HeadToHead?p={url==$i_Url}", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_head in $_heads)
#set ($frenteFrenteByUrl = $_head)
#break
#end
#getFrenteFrenteVars($frenteFrenteByUrl)
#end
#macro (getFrenteFrenteVars $_frenteFrente)
#set($match = $_frenteFrente)
#set($matchUrl = "")
#set($matchCompetition = "")
#set($matchType = "")
#set($matchPic = "")
#set($matchVendor = "")
#set($matchTeamAId = "")
#set($matchTeamBId = "")
#set($matchDate = "")
#set($matchTime = "")
#set($matchPoll = "")
#if($_frenteFrente)
#set($matchUrl = $_frenteFrente.url.InnerText)
#set($matchCompetition = $_frenteFrente.competition.InnerText)
#set($matchType = $_frenteFrente.match_type.InnerText)
#set($matchPic = $_frenteFrente.image.InnerText)
#set($matchVendor = $_frenteFrente.vendor.InnerText)
#set($matchTeamAId = $_frenteFrente.team_a.InnerText)
#set($matchTeamBId = $_frenteFrente.team_b.InnerText)
#set($matchDate = $_frenteFrente.date.InnerText)
#set($matchTime = $_frenteFrente.time.InnerText)
#set($matchPoll = $_frenteFrente.poll.InnerText)
#end
#end
#macro (getSportmanById $playerId)
#set ($sportmanById = false)
#isNumericArray($playerId)
#if($isNumericArray)
#getArticlesCountry()
#set ($_sportmans = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$articlesCountry/foxsports/true/${playerId}", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_sportman in $_sportmans)
#set ($sportmanById = $_sportman)
#break
#end
#end
#getSportmanVars ($sportmanById)
#end
#macro (getSportmanVars $_sportman)
#set ($sportman = $_sportman)
#set ($sportmanName = '')
#set ($sportmanStatsId = '')
#set ($sportmanDatafactoryId = '')
#set ($sportmanPicture = '')
#set ($sportmanPictureNational = '')
#if($_sportman)
#set ($sportmanName = $_sportman.full_name.InnerText)
#set ($sportmanStatsId = $_sportman.stats_id.InnerText)
#set ($sportmanDatafactoryId = $_sportman.datafactory_id.InnerText)
#set ($sportmanPicture = $_sportman.picture.InnerText)
#set ($sportmanPictureNational = $_sportman.picture_national.InnerText)
## use camelCase
#set ($sm_name = 'USE $sportmanName INSTEAD')
#set ($sm_statsid = 'USE $sportmanStatsId INSTEAD')
#set ($sm_datafactoryid = 'USE $sportmanDatafactoryId INSTEAD')
#set ($sm_picture = 'USE $sportmanPicture INSTEAD')
#set ($sm_picture_national = 'USE $sportmanPictureNational INSTEAD')
#end
#end
#macro(getGalleryByUrl)
#set ($galleryCode = $URLParser.get_Item(2).ToString())
#set ($galleryPictureId = "")
#getGalleryById($galleryCode)
#set ($_picture_id = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")))
#set ($galleryPictureId = $_picture_id.get_Item(0))
#isNumericArray($galleryPictureId)
#if($isNumericArray)
#set ($galleryPictureId = $Converter.ToInteger($galleryPictureId))
#if($galleryImages.Count < $galleryPictureId)
#set ($galleryPictureId = 0)
#end
#else
#set ($galleryPictureId = 0)
#end
#end
#macro(getGalleryById $i_galleryId )
#set ($i_galleryId = $i_galleryId.ToString().Trim())
#set ($gallery = "")
#set($isNumericArray = true)
##isNumericArray($galleryCode)
#if($isNumericArray)
#getArticlesCountry()
#set ($_galleries = $ct_rss.ReadRss("http://services.ficfiles.com/v2/gallery/${articlesCountry}/$i_galleryId/true", 1, $Converter.ToInteger($ct_cacheConfig.galleries)).RssItems)
#if ($_galleries.Count > 0)
#set ($gallery = $_galleries.get_Item(0))
#end
#getGalleryVars($gallery)
#end
#end
#macro(getGalleryVars $i_gallery )
#getAbsoluteURL()
#set ($gallery = $i_gallery)
#set ($galleryId = "")
#set ($galleryCode = "")
#set ($galleryPath = "")
#set ($galleryTitle = "")
#set ($galleryDate = "")
#set ($galleryPubDate = "")
#set ($galleryEpigraph = "")
#set ($galleryShow = "")
#set ($galleryDescription = "")
#set ($galleryTags = "")
#set ($galleryMainTag = "")
#set ($galleryCategory = "")
#set ($galleryCategories = "")
#set ($galleryImagePath = "")
#set ($galleryImages = false)
#set ($galleryDefaultImage = "")
#set ($gallerySlug = "")
#set ($galleryUrl = "")
#set ($galleryCanonicalUrl = "")
#set ($galleryDefaultImageIdx = 0)
#if( $i_gallery )
#set ($galleryId = $i_gallery.guid.Innertext)
#set ($galleryCode = $i_gallery.guid.Innertext)
#set ($galleryPath = $i_gallery.imagePath.Innertext)
#set ($galleryTitle = $i_gallery.title.Innertext)
#set ($galleryDate = $i_gallery.date.Innertext)
#set ($galleryPubDate = $i_gallery.pubDate.Innertext)
#set ($galleryEpigraph = $i_gallery.epigraph.Innertext)
#set ($galleryShow = $i_gallery.showCode.InnerText)
#set ($galleryDescription = $i_gallery.description.Innertext)
#set ($galleryTags = $i_gallery.tags.get_Item("tag"))
#generateSlug($galleryTitle)
#set ($gallerySlug = $__slug)
#set ($galleryImagePath = $gallery.imagePath.Innertext)
#if ($i_gallery.categories.get_Item('category').Count == 0)
#set ($galleryCategories = $i_gallery.categories.get_Item('category').InnerText)
#else
#set ($galleryCategories = $i_gallery.categories.get_Item('category').get_Item(0).InnerText)
#end
#if($galleryCategories)
#set ($galleryCategory = $galleryCategories.Split($Converter.ToChar(">")))
#set ($Counter = $galleryCategory.Count - 1)
#set ($galleryCategory = $galleryCategory.get_Item($Counter))
#end
#if($galleryTags.Count > 0)
#set ($galleryMainTag = $galleryTags.get_Item(0))
#end
#set ($galleryImages = $i_gallery.image)
#foreach($_image in $i_gallery.image)
#if($_image.get_Item('default') == "true")
#set($galleryDefaultImage = "$galleryImagePath$_image.InnerText")
#break
#end
#end
#set ($galleryUrl = "/$Country/photos/$galleryId/all-${gallerySlug}")
#set ($galleryCanonicalUrl = "$rootWWWURL$galleryUrl")
#end
#end
#macro(getGalleriesByLast $_quantity $_page)
#getArticlesCountry()
#set ($galleriesByLast = false)
#set ($_quantity = $Converter.ToInteger($_quantity))
#set ($_page = $Converter.ToInteger($_page))
#set ($galleriesByLast = $ct_rss.ReadRss("http://services.ficfiles.com/v2/galleries/${articlesCountry}/foxsports/${_quantity}/${_page}/true", $_quantity, $Converter.ToInteger($ct_cacheConfig.galleries)).RssItems)
#end
#macro(getGalleriesByTag $_tag $_quantity $_page)
#set ($galleriesByTag = false)
#getArticlesCountry()
#set ($_quantity = $Converter.ToInteger($_quantity))
#set($url_service = "http://services.ficfiles.com/v2/galleries/${articlesCountry}/foxsports/$_quantity/$_page/true/tag?p=$_tag")
#set ($galleriesByTag = $ct_rss.ReadRss($url_service, $_quantity, $Converter.ToInteger($ct_cacheConfig.galleries)).RssItems)
#end
#macro (calculateEditorialCountry)
## only load this once
#if(!$editorialCountry)
#set ($editorialCountry = $Country)
#set ($_countriesDsUrl = "http://ds2.foxsportsla.com/ds_regionalHomes.xml")
#set ($_countriesDs = $IncludePageHelper.GetPage("600", $_countriesDsUrl))
#getXmlElements($_countriesDs "region" "")
#set ($xmlRegions = $xmlElements)
#foreach($region in $xmlRegions)
#getXmlAttribute($region "region" "countries")
#set($_regionCountries = $xmlAttribute)
#if ($_regionCountries.Contains($Country))
#getXmlAttribute($region "region" "home")
#set ($editorialCountry = $xmlAttribute)
#break
#end
#end
#end
#end
#macro (homeDesktopMainArticle $_article $_size $_additionalClass)
#set ($liveMatch = $articleMatchCompetition != "" && $articleMatchCode != "")
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<div class="lazyload article-block article-block-shighlight shighlight-$_size #if($liveMatch)mam-highlight#end"
data-bgset="$articleImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover">
<a class="article-block-gradient" href="${articleUrl}"></a>
#if ($_additionalClass == '-time+share')
#articleShareData(false true false false)
#end
<div class="article-block-data-ovr-back">
#if($articleCategory && $articleCategory != "" && $articleCategory != "False")
<span class="article-tag article-tag-box">$!articleCategory</span>
#end
<a href="${articleUrl}">
<h2>$articleTitle</h2>
</a>
#if ($liveMatch)
#showMAMHighlight($articleMatchVendor $articleMatchCompetition $articleMatchCode $articleMatchLogo $articleMatchFoxPlay $articleMatchCast $articleUrl)
#end
</div>
</div>
#end
#macro (genenicArticleCard $_article $_version $_size $_bottom)
#if ($_version == 'v3')
#getArticleVarsV3($_article)
#else
#if (!$articleOverride)
#getArticleVars($_article)
#end
#end
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<div class="article-card $_size">
<a class="link" href="${articleUrl}">
<div class="top lazyload" data-bgset="$articleImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover"></div>
<div class="bottom">
<span class="category">$articleCategory</span>
<h3 class="title">$articleTitle</h3>
#if ($_bottom == '+time')
#articleShareData(true false false false)
#elseif ($_bottom == '+time+share')
#articleShareData(true true false false)
#end
</div>
</a>
</div>
#end
#macro (homeDesktopArticleBlock $_article $_size $_showCategory $_additionalClass )
## #getArticleById($_article.guid.InnerText) ## Currently, this is necessary to show the play icon if the article is video, because the service doesn't send that info. But it will be improved in the future. By now is disabled to improve speed.
## if the classes start with v3. Remember in case that other classes are required, v3 should always be first.
#if(($_additionalClass != '') && ($_additionalClass.SubString(0, 2) == 'v3'))
#getArticleVarsV3($_article)
#else
#if(!$articleOverride)
#getArticleVars($_article)
#end
#end
#if($_article)
<div class="article-block article-block-$_size $_additionalClass#if(!$_showCategory) without-category#end">
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<a href="${articleUrl}" class="main-img-bg lazyload" style="background-size: cover;" data-bgset="$articleImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover"></a>
<div class="article-block-info">
#if($articleType == "blogpost")
#getBlogById($articleAuthorId)
#set($blogUrl = $blogBlog.Replace("columnistas", "blogs"))
<a href="${blogUrl}">
<div class="author-photo" style="background-image: url($blogPicture)"></div>
</a>
#end
<div #if($articleType == "blogpost") class="article-info-aside-avatar"#end>
#if($_showCategory)
#if($articleType == "blogpost")
<a href="${blogUrl}" class="article-tag">$_article.AuthorInfo.title.innerText</a>
#else
<span class="article-tag">$!articleCategory</span>
#end
#end
<a href="${articleUrl}">
<h2>$articleTitle</h2>
</a>
#if($articlePubDate != "" && $_additionalClass == "_hideFbShare")
#articleShareData(true false false false)
#elseif($_additionalClass == '-time+share')
#articleShareData(false true false false)
#elseif($_additionalClass == 'noShareData')
-          ## No need to call #articleShareData block
#else
#articleShareData(true true false false)
#end
</div>
</div>
</div>
#end
#end
######## getHomeMatch ########
#macro (getHomeMatch)
## Load Editorial Info from the production servers
#if ($Post.get_Item("__fixedEdition__"))
#set($_editionXml = $Post.get_Item("__fixedEdition__"))
#else
#if ($Country == 'br')
#set($_editionXmlUrl = "http://xml2.foxsports.com.br/index.xml?ver=$ServerTimer.Format('mm')")
#else
#calculateEditorialCountry()
#set($_editionXmlUrl = "http://xml2.foxsportsla.com/$editorialCountry/index.xml?ver=$ServerTimer.Format('mm')")
#end
#set($_editionXml = $IncludePageHelper.GetPage("15", $_editionXmlUrl))
#end
#set($_editionXml = '')
## Test MAM in Articles Block
## #set($_editionXml = '<?xml version="1.0" encoding="utf-8"?><EditionData><Zone id="1"><Block id="1"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256601]]></idArticle><titleRef><![CDATA[Messi debut]]></titleRef><title><![CDATA[Messi = null debut]]></title><link><![CDATA[http://www.foxsports.com.ar/news/254172-el-tierno-mensaje-de-antonella-para-messi-campeon]]></link><label><![CDATA[]]></label><image><![CDATA[http://assets.diario.apps.tadevelapps.com/legacy/news/diarioregistrado/559d52316d7b5.jpg]]></image><matchVendor><![CDATA[datafactory]]></matchVendor><matchCompetition><![CDATA[copaamerica]]></matchCompetition><matchCode><![CDATA[260264]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="2"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256584]]></idArticle><titleRef><![CDATA[AFA ELECCIONES]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchTitle><![CDATA[USA VS Colombia]]></matchTitle><matchVendor><![CDATA[datafactory]]></matchVendor><matchCompetition><![CDATA[copaamerica]]></matchCompetition><matchCode><![CDATA[260287]]></matchCode><matchFoxPlay><![CDATA[http://foxplay.com]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="3"><hlEnabled><![CDATA[]]></hlEnabled><idArticle><![CDATA[256556]]></idArticle><titleRef><![CDATA[MOYANO MACRI]]></titleRef><title><![CDATA[Moyano: "No le tengo miedo a Mauricio Macri"]]></title><label><![CDATA[]]></label><image><![CDATA[http://cdn.foxsportsla.com/sites/foxsports-la/files/img/952x460/moya111.jpg?ver=f5c22ca2-d0d4-4fea-b0e4-40f6416ea12a]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block></Zone><Zone id="2"><Block id="1"><titleRef><![CDATA[Nápoli]]></titleRef><title><![CDATA[]]></title><code><![CDATA[]]></code><vendor><![CDATA[stats]]></vendor></Block><Block id="2"><titleRef><![CDATA[Milan]]></titleRef><title><![CDATA[USA vs Otro]]></title><code><![CDATA[260264]]></code><vendor><![CDATA[datafactory]]></vendor><competition><![CDATA[copaamerica]]></competition><logo><![CDATA[escudo]]></logo><foxplay><![CDATA[]]></foxplay><matchcast><![CDATA[http://google.com]]></matchcast></Block><Block id="3"><titleRef><![CDATA[Vacio]]></titleRef><title><![CDATA[]]></title><code><![CDATA[]]></code><vendor><![CDATA[]]></vendor></Block></Zone><Zone id="3"><Block id="1"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256525]]></idArticle><titleRef><![CDATA[Calendario Chicas]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="2"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256605]]></idArticle><titleRef><![CDATA[Sedes]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="3"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256583]]></idArticle><titleRef><![CDATA[Biglia]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="4"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256578]]></idArticle><titleRef><![CDATA[BOCHA DINERO]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block><Block id="5"><hlEnabled><![CDATA[yes]]></hlEnabled><idArticle><![CDATA[256574]]></idArticle><titleRef><![CDATA[Bochini Riquelme]]></titleRef><title><![CDATA[]]></title><label><![CDATA[]]></label><image><![CDATA[]]></image><matchVendor><![CDATA[]]></matchVendor><matchCompetition><![CDATA[]]></matchCompetition><matchCode><![CDATA[]]></matchCode><matchFoxPlay><![CDATA[]]></matchFoxPlay><matchCast><![CDATA[]]></matchCast></Block></Zone><Zone id="4"><Block id="1"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[superhighlights]]></moduleType></Block><Block id="2"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[FOXPlay]]></moduleType></Block><Block id="3"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[]]></title><moduleType><![CDATA[highlights]]></moduleType></Block><Block id="4"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Ad]]></title><moduleTag><![CDATA[]]></moduleTag><moduleType><![CDATA[ad728x90]]></moduleType></Block><Block id="5"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Copa América]]></title><moduleTag><![CDATA[GLO_Copa América]]></moduleTag><moduleType><![CDATA[videos]]></moduleType></Block><Block id="6"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[Central FOX]]></title><moduleTag><![CDATA[Central FOX]]></moduleTag><moduleType><![CDATA[news]]></moduleType></Block><Block id="7"><moduleEnabled><![CDATA[yes]]></moduleEnabled><title><![CDATA[WWE]]></title><moduleTag><![CDATA[GLO_WWE]]></moduleTag><moduleType><![CDATA[videos]]></moduleType></Block></Zone></EditionData>')
#getXmlContent($_editionXml "Zone" 'id="2"')
#set($xmlHomeMatches = $xmlContent)
#end
#macro(getHomeMatchVars $matchZone $matchIndex)
#set($_sId = 'id="%blockId%"')
#set($_currentBlockId = $_sId.Replace("%blockId%", "$matchIndex"))
#getXmlContent($matchZone "Block" $_currentBlockId)
#set($xmlMatchBlock = $xmlContent)
#set($matchTitle = "")
#set($matchCode = "")
#set($matchVendor = "")
#set($matchCompetition = "")
#set($matchLogo = "")
#set($matchFoxPlay = "")
#set($matchMatchcast = "")
#if($xmlMatchBlock)
#getXmlContent($xmlMatchBlock "title" '')
#set($matchTitle = $xmlContent)
#getXmlContent($xmlMatchBlock "code" '')
#set($matchCode = $xmlContent)
#getXmlContent($xmlMatchBlock "vendor" '')
#set($matchVendor = $xmlContent)
#getXmlContent($xmlMatchBlock "competition" '')
#set($matchCompetition= $xmlContent)
#getXmlContent($xmlMatchBlock "logo" '')
#set($matchLogo= $xmlContent)
#getXmlContent($xmlMatchBlock "foxplay" '')
#set($matchFoxPlay= $xmlContent)
#getXmlContent($xmlMatchBlock "matchcast" '')
#set($matchMatchcast= $xmlContent)
#end
#end
#macro (homeDesktopMostPopularMd $_article)
#getArticleVars($_article)
<a href="${articleUrl}" class="article-block article-block-sm">
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<div class="article-image lazyload" data-bgset="$articleImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover">
</div>
<h3 class="article-title">$articleTitle</h3>
#articleShareData(false false false true)
</a>
#end
#macro (homeDesktopGalleryItem $_gallery $_size)
#getGalleryVars($_gallery)
<div class="home-gallery-item home-gallery-item-$_size">
#set($galleryImage = "$galleryDefaultImage")
#set($galleryImage = $galleryImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<a href="$galleryUrl" class="lazyload" data-bgset="$galleryImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover">
<div class="article-block-gradient">
<span class="icon icon-round icon-$_size icon_gallery"></span>
<span class="home-gallery-item-data">
$galleryTitle
## TODO: pass url by parameter
#set($articleCanonicalUrl = "$rootWWWURL/fotos/$galleryId/0-${gallerySlug}")
#articleShareData(false true false false)
</span>
</div>
</a>
</div>
#end
#macro (homeGetModules)
#languageVars()
#if ($Post.get_Item("__fixedEdition__"))
#set($_editionXml = $Post.get_Item("__fixedEdition__"))
#else
#if ($Country == 'br')
#set($_editionXmlUrl = "http://xml2.foxsports.com.br/index.xml?ver=$ServerTimer.Format('mm')")
#else
#calculateEditorialCountry()
#set($_editionXmlUrl = "http://xml2.foxsportsla.com/$editorialCountry/index.xml?ver=$ServerTimer.Format('mm')")
#end
#set($_editionXml = $IncludePageHelper.GetPage("15", $_editionXmlUrl))
#end
## Get Super Highlight Information
## Get Zone 1
#getXmlContent($_editionXml "Zone" 'id="4"')
#set($xmlHomeModules = $xmlContent)
#getXmlElements($xmlHomeModules "Block" "")
#set ($xmlHomeBlocks = $xmlElements)
#set($_sId = 'id="%blockId%"')
#foreach($block in $xmlHomeBlocks)
#set($_currentBlockI = "$velocityCount")
#set($_currentBlockId = $_sId.Replace("%blockId%", $_currentBlockI))
#getXmlContent($xmlHomeModules "Block" $_currentBlockId)
#set($xmlZoneBlock = $xmlContent)
#getXmlContent($xmlZoneBlock "moduleEnabled" '')
#set($moduleEnabled = $xmlContent)
#getXmlContent($xmlZoneBlock "moduleTag" '')
#set($moduleTag = $xmlContent)
#getXmlContent($xmlZoneBlock "title" '')
#set($titleRef = $xmlContent)
#getXmlContent($xmlZoneBlock "moduleType" '')
#set($moduleType = $xmlContent)
## Here we can call any of the modules
## $moduleEnabled $moduleTag $titleRef $moduleType
<!-- Staring Module $moduleType Enabled: $moduleEnabled  Tag: $moduleTag Title: $titleRef -->
#if($moduleType == "superhighlights")
#homeSuperHighlight()
#end
#if($moduleType == "highlights")
#homeHighlight()
#end
#if($moduleType == "FOXPlay")
#foxPlayLive()
#end
#if($moduleType == "news")
#homeNewsModule($moduleTag $titleRef)
#end
#if($moduleType == "photos")
#homeGalleryModule($moduleTag $titleRef)
#end
#if($moduleType == "videos")
#set ($_videoGalleryType = 'last')
#set ($_videoGalleryKeyword = '')
#isNumericArray($moduleTag)
#if($isNumericArray)
#set ($_videoGalleryType = 'idlist')
#set ($_videoGalleryKeyword = $moduleTag)
#elseif($moduleTag.StartWith('http'))
#set ($_videoGalleryType = 'feed')
#set ($_videoGalleryKeyword = $moduleTag)
#elseif($moduleTag != '')
#set ($_videoGalleryType = 'category')
#set ($_videoGalleryKeyword = $moduleTag)
#end
#blockVideoGallery($_videoGalleryType $_videoGalleryKeyword $titleRef)
#end
#if($moduleType == "ad728x90")
#homeAdModule($moduleTag)
#end
#end
#end
#macro (homeAdModule $_tag)
#if($_tag == '')
#set($_tag = '728x90home')
#end
<section class="home-ad ad-${_tag}">
<div class="container" style="margin: 20px auto;">
#printAd($_tag)
</div>
</section>
#end
#macro(prepareEditorialHighlight $mainBlock $index)
#getArticleVars("")
#set($i_index = $index)
#set($articleOverride = false)
#set($_sId = 'id="%blockId%"')
#set($_currentBlockI = "$i_index")
#set($_currentBlockId = $_sId.Replace("%blockId%", $_currentBlockI))
#getXmlContent($mainBlock "Block" $_currentBlockId)
#set($xmlZoneBlock = $xmlContent)
#getXmlContent($xmlZoneBlock "idArticle" '')
#set($articleId = $xmlContent)
#if($articleId != "")
#getArticleById($articleId)
#end
#getXmlContent($xmlZoneBlock "title" '')
#if($xmlContent != "")
#set($articleTitle = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "image" '')
#if($xmlContent != "")
#set($articleImage = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "link" '')
#if($xmlContent != "")
#set($articleUrl = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchVendor" '')
#set($articleMatchVendor = "")
#if($xmlContent != "")
#set($articleMatchVendor = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchCompetition" '')
#set($articleMatchCompetition = "")
#if($xmlContent != "")
#set($articleMatchCompetition = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchCode" '')
#set($articleMatchCode = "")
#if($xmlContent != "")
#set($articleMatchCode = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchFoxPlay" '')
#set($articleMatchFoxPlay = "")
#if($xmlContent != "")
#set($articleMatchFoxPlay = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchCast" '')
#set($articleMatchCast = "")
#if($xmlContent != "")
#set($articleMatchCast = $xmlContent)
#set($articleOverride = true)
#end
#getXmlContent($xmlZoneBlock "matchLogo" '')
#set($articleMatchLogo = "")
#if($xmlContent != "")
#set($articleMatchLogo = $xmlContent)
#set($articleOverride = true)
#end
#end
#macro(homeSuperHighlight)
#getHighlightArticles()
## For testing MAM uncomment _editionXml var in __article.vm in function getHighlightArticles
#if($superHighlightsHome.Count == 3)
<section class="home-shighlight container">
<div class="home-shighlight-main">
## Super Highlight 1
#prepareEditorialHighlight($xmlHighlightsHome 1)
#homeDesktopMainArticle($article 'lg' '-time+share')
</div>
<div class="home-shighlight-secondary">
## Super Highlight 2
#prepareEditorialHighlight($xmlHighlightsHome 2)
#homeDesktopMainArticle($article 'md' '-time+share')
## Super Highlight 3
#prepareEditorialHighlight($xmlHighlightsHome 3)
#homeDesktopMainArticle($article 'md' '-time+share')
</div>
</section>
#end
#end
#macro(loopArticlesIdsByLast)
#set($firstArtNotShownYet = false)
#foreach($articleInLoop in $articlesByLast)
#set($str_this_article_id = "$articleInLoop.code")
#if(!$articlesDisplayed.contains($str_this_article_id))
#set($firstArtNotShownYet = $articleInLoop)
#break
#end
#end
#end
#macro(loopArticlesIdsByViews)
#set($firstArtNotShownYet = false)
#foreach($articleInLoop in $articlesByViews)
#getArticleVars($articleInLoop)
#set($str_this_article_id = "${articleId}")
#if(!$articlesDisplayed.contains($str_this_article_id))
#set($firstArtNotShownYet = $articleInLoop)
#break
#end
#end
#end
#macro(homeHighlight)
<div class="container">
## Get last articles (probably will be displayed 10, but we need more in case duplicated news) This is currently working a little funny
#getArticlesByLastHome(20)
#set($articlesDisplayed = [])
## Get HighlightArticles and store it's Ids
#getHighlightArticles()
#if($superHighlightsHome.Count == 3)
#prepareEditorialHighlight($xmlHighlightsHome 1)
#getArticleVars($article)
#set($_a = $articlesDisplayed.add($articleId))
#prepareEditorialHighlight($xmlHighlightsHome 2)
#getArticleVars($article)
#set($_a = $articlesDisplayed.add($articleId))
#prepareEditorialHighlight($xmlHighlightsHome 3)
#getArticleVars($article)
#set($_a = $articlesDisplayed.add($articleId))
#end
## Get MAMs for Home from index
#getHomeMatch()
## Returns $xmlHomeMatches
## Get Destacatos FOX Sports
#getFeaturedArticles()
## Store Destacatos FOX Sports
#foreach($blockPosition in [1..5])
#prepareEditorialHighlight($xmlZoneHeros $blockPosition)
#set($_a = $articlesDisplayed.add($articleId))
#end
## Increment articles to be shown
#set($shownArticleByViewsBlocks = 0)
<section class="home-section latest-news">
<div class="top">
<h2 class="title">#titleBoldStyle($ds_lang_now)</h2>
</div>
<div class="list">
#set($articleListSlotsUsed = 0)
#foreach($r in [0, 1, 2, 3, 4, 5, 6, 7, 8])
#if ($velocityCount == 1)
#set($_size = 'md')
#else
#set($_size = 'sm')
#end
#set($mamBlockShown = false)
#loopArticlesIdsByLast()
#homeFeatureMatch()
#if($articleListSlotsUsed == 1)
#showMAMBlockInNews(1)
#end
#if($articleListSlotsUsed == 3)
#showMAMBlockInNews(2)
#end
#if($articleListSlotsUsed == 5)
#showMAMBlockInNews(3)
#end
#if($articleListSlotsUsed == 7)
#showMAMBlockInNews(4)
#end
#if(!$mamBlockShown)
#genenicArticleCard($firstArtNotShownYet "v3" $_size "+time")
#set($_a = $articlesDisplayed.add($articleId))
#end
#set($articleListSlotsUsed = $articleListSlotsUsed+1)
#if ($articleListSlotsUsed == 9)
#break
#end
#end
</div>
</section>
<section class="home-section trending-news">
<div class="top">
<h2 class="title">#titleBoldStyle($ds_lang_highlights)</h2>
</div>
<div class="list">
#foreach($blockPosition in [1..5])
#if ($velocityCount == 1)
#set($_size = 'md')
#else
#set($_size = 'sm')
#end
#getArticleById($artcileId)
#prepareEditorialHighlight($xmlZoneHeros $blockPosition)
#genenicArticleCard($article "v2" $_size "+time+share")
#if($velocityCount == 2)
<div class="article-card-banner trending">
#printAd("300x250home")
</div>
#end
#end
</div>
</section>
<section class="home-section most-viewed">
<div class="top">
<h2 class="title">#titleBoldStyle($ds_lang_ranking)</h2>
</div>
<div class="list">
#getArticlesByViews("news" 20)
#set($range = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
#foreach($r in $range)
#loopArticlesIdsByViews()
#if ($firstArtNotShownYet)
#set($_a = $articlesDisplayed.add($articleId))
#getArticleVars($firstArtNotShownYet)
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<a class="item" href="${articleUrl}">
<div class="image lazyload" data-bgset="${articleImage}" data-ratio="container" data-sizes="auto" data-parent-fit="cover"></div>
<div class="bottom">
<h3 class="title">$articleTitle</h3>
#articleShareData(false false false true)
</div>
</a>
#end
#end
</div>
<div class="article-card-banner viewed desktop">
#printAd("300x600home")
</div>
<div class="article-card-banner viewed mobile">
#printAd("300x250home")
</div>
</section>
</div>
#end
#macro(homeFeatureMatch $title $matchVendor $matchCode)
#getCDNPath()
#if($matchVendor != "" && $matchCode != "")
#showMAMFeatured($matchVendor $matchCode)
#end
#end
#macro (homeGalleryModule $moduleTag $titleRef)
## #homeGalleryModule("" "")
## #homeGalleryModule("bombasexy" "Hello")
#set($tagLink = "")
#if ($moduleTag && $moduleTag != "")
#set($tag = $moduleTag.Trim().ToLower())
#getGalleriesByTag($tag 10 1)
#set($galleryGrid = $galleriesByTag)
#set($tagLink = "/tag/$tag")
#else
#getGalleriesByLast(10 1)
#set($galleryGrid = $galleriesByLast)
#end
#if($galleryGrid.Count >= 10)
<section class="gallery-section home-gallery">
<div class="home-gallery-row">
<div class="container">
#if($titleRef && $titleRef != "")
<h2 class="column-title">$titleRef</h2>
#else
<h2 class="column-title">#titleBoldStyle($ds_lang_gallery_title_expanded)</h2>
#end
<div class="secondary-option">
<div class="container">
<a class="see-all" href="/$Country/photos$!{tagLink}">
$ds_lang_see_more_f
<i class="fa fa-angle-right"></i>
</a>
</div>
</div>
<div class="home-gallery">
#set($galleryVars = $galleryGrid.get_Item(0))
#homeDesktopGalleryItem($galleryVars 'lg')
#set($galleryVars = $galleryGrid.get_Item(1))
#homeDesktopGalleryItem($galleryVars 'md')
#set($galleryVars = $galleryGrid.get_Item(2))
#homeDesktopGalleryItem($galleryVars 'wd')
#set($galleryVars = $galleryGrid.get_Item(3))
#homeDesktopGalleryItem($galleryVars 'md')
#set($galleryVars = $galleryGrid.get_Item(4))
#homeDesktopGalleryItem($galleryVars 'sm')
#set($galleryVars = $galleryGrid.get_Item(5))
#homeDesktopGalleryItem($galleryVars 'sm')
#set($galleryVars = $galleryGrid.get_Item(6))
#homeDesktopGalleryItem($galleryVars 'sm')
#set($galleryVars = $galleryGrid.get_Item(7))
#homeDesktopGalleryItem($galleryVars 'sm')
#set($galleryVars = $galleryGrid.get_Item(8))
#homeDesktopGalleryItem($galleryVars 'md')
#set($galleryVars = $galleryGrid.get_Item(9))
#homeDesktopGalleryItem($galleryVars 'wd')
</div>
</div>
</div>
</section>
#end
#end
#macro (homeNewsModule $moduleTag $titleRef)
## #homeNewsModule("" "")
## #homeNewsModule("Dakar-Rally" "Hello")
#set($tagLink = "")
#if ($moduleTag && $moduleTag != "")
#set($tag = $moduleTag.Trim())
#getArticlesByTag("news" $tag 9 1)
#set($articleList = $articlesByTag)
#set($tagLink = "/$Country/tags/news/$tag")
#else
#getArticlesByLast("news" 9 1)
#set($tagLink = "/$Country/news")
#set($articleList = $articlesByLast)
#end
#if($articleList.Count >= 9)
<section class="home-section tags-news">
<div class="container">
<div class="top">
<h2 class="title">#titleBoldStyle($titleRef)</h2>
<a class="see-all" href="$tagLink">$ds_lang_see_more_f<i class="fa fa-angle-right"></i></a>
</div>
<div class="list">
#foreach ($_article in $articleList)
#if ($velocityCount == 1)
#set($_size = 'md')
#else
#set($_size = 'sm')
#end
#genenicArticleCard($_article "v2" $_size "+time+share")
#end
</div>
</div>
</section>
#end
#end
#set($monthName = '')
#macro(getMonthName $i_monthNumber)
#if($i_monthNumber == "01")
#set($monthName = "ENE")
#elseif($i_monthNumber == "02")
#set($monthName = "FEB")
#elseif($i_monthNumber == "03")
#set($monthName = "MAR")
#elseif($i_monthNumber == "04")
#set($monthName = "ABR")
#elseif($i_monthNumber == "05")
#set($monthName = "MAY")
#elseif($i_monthNumber == "06")
#set($monthName = "JUN")
#elseif($i_monthNumber == "07")
#set($monthName = "JUL")
#elseif($i_monthNumber == "08")
#set($monthName = "AGO")
#elseif($i_monthNumber == "09")
#set($monthName = "SEP")
#elseif($i_monthNumber == "10")
#set($monthName = "OCT")
#elseif($i_monthNumber == "11")
#set($monthName = "NOV")
#elseif($i_monthNumber == "12")
#set($monthName = "DIC")
#end
#end
#macro (getLiveEventsByDate $_eventsDate $_maxItems)
#set($liveEventsByDate = false)
#if($_eventsDate)
#set ($_dateFrom = $_eventsDate.ToString('yyyy-MM-dd 00:00'))
#set ($_dateTo = $_eventsDate.AddDays(1).ToString('yyyy-MM-dd 12:59'))
#set ($_serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$Country/foxplay/true/Live Event/eventDate/asc?p=eventDate>=$_dateFrom@@eventDate<=$_dateTo")
#set ($_quantity = $Converter.ToInteger($_maxItems))
#set ($_cacheMinutes = 30)
#set ($liveEventsByDate = $ct_rss.ReadRss($_serviceUrl, $_quantity, $_cacheMinutes).RssItems)
#set ($_maxIdx = $liveEventsByDate.Count - 1)
#set ($_deltaIdx = 0)
#foreach($_i in [0..$_maxIdx])
#set ($_currentIdx = $_i - $_deltaIdx)
#if($liveEventsByDate.get_Item($_currentIdx).eventDate.InnerText>$_dateTo)
$liveEventsByDate.RemoveAt($_currentIdx)
#set($_deltaIdx = $_deltaIdx + 1)
#end
#end
#end
#end
#macro (getLiveEventById $_eventId)
#set($liveEventById = false)
#isNumericArray($_eventId)
#if($isNumber)
#set($_serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$Country/foxplay/false/$_eventId")
#set($_quantity = 1)
#set($_cacheMinutes = 5)
#set($_obj_RssItems = $ct_rss.ReadRss($_serviceUrl, $_quantity, $_cacheMinutes).RssItems)
#foreach($_obj_RssItem in $_obj_RssItems)
#set($liveEventById = $_obj_RssItem)
#break
#end
#end
#getLiveEventVars($liveEventById)
#end
#macro (getLiveEventVars $_liveEvent)
#set($event = $_liveEvent)
#set($eventId = false)
#set($eventTitle = '')
#set($eventName = '')
#set($eventDeck = '')
#set($eventStreams = false)
#set($eventSignal = false)
#set($eventTheme = '')
#set($eventUrl = false)
#set($eventCompetition = '')
#set($eventCategory = "")
#set($eventAuthLevel = 'basic')
#set($eventChannel = 'foxsports')
#set($eventTuneInDate = '')
#set($eventEmbedCode = '')
#set($eventTuneInHour = '')
#set($eventPlaylistShortname = '')
#set($eventRelatedShows = '')
#set($eventImage2600x800 = "//cdn-flac.ficfiles.com/sites/common/objects/img/fp-genericagris-1920x1082.png")
#set($eventImage10x3 = false)
#set($eventImage1920x1080 = "//cdn-flac.ficfiles.com/sites/common/objects/img/fp-genericagris-1920x1082.png")
#set($eventImage10x6 = false)
#set ($eventStartDate = false)
#set ($eventEndDate = false)
#set ($eventIsLive = false)
#set ($eventShow = false)
#if($_liveEvent)
#set($eventId = $_liveEvent.get_Item("guid").InnerText)
#set($eventName = $_liveEvent.get_Item("eventName").InnerText)
#set($eventTitle = $eventName)
#set($eventDeck = $_liveEvent.get_Item("deck").InnerText)
#set($eventSport = $_liveEvent.sport.InnerText)
#set ($eventShow =  $_liveEvent.show.InnerText)
#set($eventCompetition = $_liveEvent.get_Item("competitionName").InnerText)
#set($eventTuneInDate = $_liveEvent.get_Item("tuneInDate").InnerText)
#set($eventTuneInHour = $_liveEvent.get_Item("tuneInHour").InnerText)
#set($eventChannel = $_liveEvent.get_Item("channel").InnerText)
#set($eventAuthLevel = $_liveEvent.get_Item("auth_level").InnerText)
#if($Country == "cl")
#set($eventAuthLevelCL = $_liveEvent.get_Item("auth_level_cl").InnerText)
#if($eventAuthLevelCL == "basic")
#set($eventChannel = "foxsportschile")
#elseif($eventAuthLevelCL == "premium")
#set($eventChannel = "foxsports2")
#elseif($eventAuthLevelCL == "free")
#set($eventAuthLevel = "free")
#elseif($eventAuthLevelCL == "ignore" && ($eventChannel == "foxsports" || $eventChannel == "foxsports1" || $eventChannel == "foxsports2"))
#set($eventAuthLevelCL = "premium")
#end
#if($eventAuthLevelCL == "ignore" && $eventAuthLevel == "free")
#set($eventAuthLevelCL = "free")
#end
#end
#set($eventRelatedShows = $_liveEvent.get_Item("related_shows").InnerText)
#set($eventEmbedCode = $_liveEvent.get_Item("embed_code").InnerText)
#set($eventTheme = $_liveEvent.get_Item("theme").InnerText)
#set($eventUrl = $VelocityHelper.Normalize($eventTitle).Replace(" ", "-"))
#set($eventUrl = "/watch/E${eventId}")
#if($Country == 'br')
#set($eventUrl = "//www.foxplaybrasil.com.br$!eventUrl")
#else
#set($eventUrl = "//www.foxplay.com/$Country$!eventUrl")
#end
#set($eventMatchid = $_liveEvent.statisticsId.InnerText)
#set($eventHashtag = $_liveEvent.hashtag.InnerText)
#if($_liveEvent.categories.get_Item('category').Count == 0)
#set ($eventCategory = $_liveEvent.categories.get_Item('category').InnerText)
#else
#set ($eventCategory = $_liveEvent.categories.get_Item('category').get_Item(0).InnerText)
#end
#set ($_eventCategory = $eventCategory.Split($Converter.ToChar(">")))
#set ($_counter = $_eventCategory.Count - 1)
#set ($eventCategory = $_eventCategory.get_Item($_counter))
## #set ($eventCategoryIdx = $eventCategorySplit.Count - 1)
#######################################
###   USAR 2600x600 y 1920x1080    ####
#######################################
##if($_liveEvent.image1600x500.InnerText != "")
##set($eventImage1600x500 = $_liveEvent.image1600x500.InnerText)
##end
##if($_liveEvent.image530x298.InnerText != "")
##set($eventImage530x298 = $_liveEvent.image530x298.InnerText)
##end
#if($_liveEvent.get_Item("header-image").InnerText != "")
#set($eventImage2600x800 = $_liveEvent.get_Item("header-image").InnerText)
#end
#set($eventImage10x3 = $eventImage2600x800.Replace("/2600x800/", "/resized/10x3/"))
#if($_liveEvent.get_Item("main-image").InnerText != "")
#set($eventImage1920x1080 = $_liveEvent.get_Item("main-image").InnerText)
#elseif ($_liveEvent.image530x298.InnerText != "")
#set($eventImage1920x1080 = $_liveEvent.get_Item("image530x298").InnerText)
#end
#set($eventImage10x6 = $eventImage1920x1080.Replace("/1920x1080/", "/resized/10x6/"))
#set($eventImage640x360 = $eventImage1920x1080.Replace("/1920x1080/", "/resized/640x360/"))
#set($_eventStartDate = $_liveEvent.get_Item("eventDate").InnerText)
#set($_eventDuration = $_liveEvent.get_Item("eventDuration").InnerText)
#if ($_eventStartDate.Length == 16 && $_eventDuration.Length == 5)
#isValidDateTime( "$_eventStartDate:00-0000" )
#if($isValidDateTime)
#set ($eventStartDate = $Converter.ToDateTime($_eventStartDate))
#set ($eventEndDate = $eventStartDate.AddHours($Converter.ToInteger($_eventDuration.Split($Converter.ToChar(":")).get_Item(0))).AddMinutes($Converter.ToInteger($_eventDuration.Split($Converter.ToChar(":")).get_Item(1))))
#end
#end
#set ($eventStreams = $_liveEvent.get_Item("streams").InnerText)
#set ($eventSignal = $_liveEvent.get_Item("signal").InnerText)
#if($eventStartDate <= $eventStartDate.UtcNow && $eventStartDate.UtcNow <= $eventEndDate)
#set ($eventIsLive = true)
#end
#end
#end
#macro(metatagsPrint)
#set ($currentSection = $URLParser.Url)
#if ($currentSection.StartsWith($Country))
#set ($currentSection = $currentSection.SubString(2).ToLower())
#end
#set ($currentSection = $currentSection.Replace("index.html", ""))
#set ($currentSection = $currentSection.Trim($Converter.ToChar("/")))
#set ($currentSection = $currentSection.Split($Converter.ToChar("/")))
## $currentSection.get_Item(0)
## $currentSection.get_Item(1)
#getAbsoluteURL()
#languageVars()
## Set initial meta properties
#set($metaTitle = "")
#set($metaOgSiteName = "")
#set($metaDescription = "")
#set($metaKeywords = "")
#set($metaOgTitle = "")
#set($metaOgType = "")
#set($metaOgDescription = "")
#set($metaOgImage = "")
#set($metaOgImageWidth = "")
#set($metaOgImageHeight = "")
#set($metaAlAndroidApp = "")
#set($metaAlAndroidPackage = "")
#set($metaAlAndroidUrl = "")
## Set default vars for BR
#if($Country == "br")
#set($metaTitle = "FOX Sports | Torcemos juntos | Notícias, resultados, estatísticas e vídeos")
#set($metaOgSiteName = "FOX Sports")
#set($metaDescription = "No FoxSports.com.br, você encontra notícias, vídeos e imagens sobre futebol do Brasil e do mundo, como a cobertura completa da Copa Santander Libertadores e da Copa Bridgestone Sulamericana, e conteúdo exclusivo da NBA e tênis. Esporte é na Fox Sports!")
#set($metaKeywords = "libertadores, sulamerica, Fórmula 1, Nascar, Indy, NBA, tênis, ATP, campeonato italiano, calcio, campeonato inglês, premier league")
#set($metaOgTitle = $metaTitle)
#set($metaOgType = "website")
#set($metaOgDescription = "$metaDescription")
#set($metaOgImage = "http://cdn-flac.ficfiles.com/sites/foxsports-br/objects/img/fs-default.png")
#set($metaAlAndroidApp = "FOX Sports")
#set($metaAlAndroidPackage = "com.fic.foxsports")
#end
## Set default vars for LAT
#if($Country != "br")
#set($metaTitle = "FOX Sports | Ponemos más | Noticias, resultados, estadísticas y videos.")
#set($metaOgSiteName = "FOX Sports")
#set($metaDescription = "Noticias de deportes en FOX Sports")
#set($metaKeywords = "Copa Santander Libertadores, Copa Bridgestone Sudamericana, UEFA Champions League, UEFA Europa League, English Premier League, Formula Uno, Central FOX")
#set($metaOgTitle = $metaTitle)
#set($metaOgType = "website")
#set($metaOgDescription = "$metaDescription")
#set($metaOgImage = "http://cdn-flac.ficfiles.com/sites/foxsports-br/objects/img/fs-default.png")
#set($metaAlAndroidApp = "FOX Sports")
#set($metaAlAndroidPackage = "com.fic.foxsports")
#end
## News - Home
## /news
#if ($currentSection.get_Item(0) == "news")
#set($metaTitle = "$ds_lang_news_title_p | FOX Sports")
#set($metaOgTitle = $metaTitle)
#end
## News - Article
## /news/articleId
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "news" && $currentSection.get_Item(1) != "")
#set($idArticle = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")).get_Item(0).Trim())
#getArticleById($idArticle)
## If article is a redirect
#if($articleRedirectUrl && $articleRedirectUrl != '')
<script type="text/javascript">
document.write("<div style='display:none;'><\!--");
location.href = '$articleRedirectUrl.Replace("'", "\\'")';
</script>
#end
#if(!$article)
#doFourOhfour()
#end
#set($keywords = "")
#foreach($_cat in $article_category.InnerText.Replace('"', '').Split($Converter.ToChar(">")))
#set($keywords = "${keywords}$_cat.Trim(),")
#end
#foreach($_tag in $article.tags.tag)
#set($keywords = "${keywords}$_tag.ToString(),")
#end
#set($metaTitle = "$articleTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = "$articleDescription")
#set($metaOgDescription = "$metaDescription")
#set($metaOgType = "article")
#set($metaKeywords = $keywords)
#set($metaOgImage = "$articleImage")
#set($metaOgImageWidth = "600")
#set($metaOgImageHeight = "315")
#set($metaAlAndroidUrl = "foxsportsla:/$articleUrl")
#end
#end
## Blogs
## /blogs
#if ($currentSection.get_Item(0) == "blogs")
#if($Country != "br")
#set($metaTitle = "Columnas periodísticas | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaKeywords = "Alejandro Parmo, alina moine, andre marin, angel huguez, Antonio valls abarca, Atilio costa febre, carlos aimar, carlos Velasco, Christian gimenez, cristian echeverria, Emiliano candido, Emiliano raggi, enrique macaya marquez, ernesto del valle, esteban tome fuentes, fabian estoy, Gonzalo farfan, Guillermo goldfeder, Guillermo salatino, Jaime dinas, juan fazzini, juan fernandez, juan pablo coronado, Leandro ginobili, Leonardo guardia, luis manuel lopez, luis mario sauret, Ricardo bravo, Roberto leto, Santiago puente, Sebastian vignolo, Viviana semienchuk, Walter safarian")
#set($metaDescription = "Columnas periodísticas de FOX Sports")
#set($metaOgDescription = "$metaDescription")
#end
#end
## Blogs - Author
## /blogs/authorName
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "blogs" && $currentSection.get_Item(1) != ""  && $currentSection.get_Item(1) != "view" && $currentSection.get_Item(1) != "authors")
#set ($blogUrl = $URLParser.Url)
#getBlog($blogUrl)
#set($metaTitle = "$blogName | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = $blogDescription)
#set($metaOgDescription = "$metaDescription")
#set($metaOgImage = $blogPicture)
#end
#end
## Blogs - Article
## /blogs/view/articleId
#if($currentSection.Count > 2)
#if ($currentSection.get_Item(0) == "blogs" && $currentSection.get_Item(1) == "view" && $currentSection.get_Item(2) != "")
#set($idArticle = $URLParser.get_Item(3).ToString().Split($Converter.ToChar("-")).get_Item(0).Trim())
#getArticleById($idArticle)
## If article is a redirect
#if($articleRedirectUrl && $articleRedirectUrl != '')
<script type="text/javascript">
document.write("<div style='display:none;'><\!--");
location.href = '$articleRedirectUrl.Replace("'", "\\'")';
</script>
#end
#set($keywords = "")
#foreach($_cat in $article_category.InnerText.Replace('"', '').Split($Converter.ToChar(">")))
#set($keywords = "${keywords}$_cat.Trim(),")
#end
#foreach($_tag in $article.tags.tag)
#set($keywords = "${keywords}$_tag.ToString(),")
#end
#set($metaTitle = "$articleTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = "$articleDescription")
#set($metaOgDescription = "$metaDescription")
#set($metaOgType = "article")
#set($metaKeywords = $keywords)
#set($metaOgImage = "$articleImage")
#set($metaOgImageWidth = "600")
#set($metaOgImageHeight = "315")
#set($metaAlAndroidUrl = "foxsportsla:/$articleUrl")
#end
#end
## TV Schedule
## /tv/schedule
#if ($currentSection.Count > 2)
#if ($currentSection.get_Item(0) == "tv" && $currentSection.get_Item(1) == "schedule" && $currentSection.get_Item(2) != "channel")
## EPG Tablet+Desktop
#set($metaTitle = "$ds_lang_schedule_title | FOX Sports")
#set($metaOgTitle = $metaTitle)
<script type="text/javascript">
if (window.GLOBALS.isMobile) {
## Is a device
## Redirect to Mobile view
document.write("<div style='display:none;'><\!--");
location.href = '/${Country}/tv/schedule/channel/foxsports/today';
}
</script>
#end
#if($currentSection.get_Item(0) == "tv" && $currentSection.get_Item(1) == "schedule" && $currentSection.get_Item(2) == "channel")
## EPG Only Mobile
<script type="text/javascript">
if (!window.GLOBALS.isMobile) {
## This is more than mobile
## Redirect to Desktop view
document.write("<div style='display:none;'><\!--");
location.href = '/${Country}/tv/schedule/today';
}
</script>
#end
#end
## Photos
## /photos
#if ($currentSection.get_Item(0) == "photos")
#set($metaTitle = "$ds_lang_gallery_title | FOX Sports")
#set($metaOgTitle = $metaTitle)
#end
## Photos - Gallery
## /photos/galleryId
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "photos" && $currentSection.get_Item(1) != "tag" && $currentSection.get_Item(1) != "")
#getGalleryByUrl()
#set($_photoIndex = $URLParser.get_Item(3).ToString().Split($Converter.ToChar('-')).get_Item(0))
#if(!$gallery)
#doFourOhfour()
#end
#if( $_photoIndex == "all" )
#set($_image = $gallery.image.get_Item(0))
#set($imageCurrentPath = $_image.InnerText)
#else
#set($galleryImageIndex = $Converter.ToInteger($_photoIndex) )
#if( $galleryImageIndex >= 0 && $galleryImageIndex < $gallery.image.Count )
#set($_image = $gallery.image.get_Item( $galleryImageIndex ))
#set($imageCurrentPath = $_image.InnerText)
#end
#end
#set($keywords = "")
#if ($galleryTags.Count)
#foreach($tag in $galleryTags)
#set($keywords = "${keywords}$tag.InnerText.Trim(),")
#end
#end
#set($metaTitle = "$galleryTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = "$galleryDescription")
#set($metaOgDescription = "$metaDescription")
#set($metaOgType = "article")
#set($metaKeywords = $keywords)
#set($metaOgImage = "$galleryPath$imageCurrentPath")
#set($metaOgImageWidth = "640")
#set($metaOgImageHeight = "480")
#end
#end
## Videos
## /videos
#if ($currentSection.get_Item(0) == "videos")
#set($metaTitle = "$ds_lang_videos_title | FOX Sports")
#set($metaOgTitle = $metaTitle)
#end
## Video view
## /videos/videoid
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "videos" && $currentSection.get_Item(1) != "")
#if ($currentSection.get_Item(1) != "embed")
#set ($_videoIdIdx = 2)
#else
#set ($_videoIdIdx = 3)
#end
#set($_videoId = $URLParser.get_Item($_videoIdIdx).ToString().Split($Converter.ToChar("-")).get_Item(0))
#getVideoById($_videoId)
#if(!$_video)
#doFourOhfour()
#end
#set($metaTitle = "$videoTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = "$videoDescription")
#set($metaOgDescription = "$metaDescription")
#set($metaOgType = "article")
#set($metaKeywords = $keywords)
#set($metaOgImage = "$videoImage640x360")
#set($metaOgImageWidth = "640")
#set($metaOgImageHeight = "480")
#end
#end
## Competitions
## /competition/competitionUrl
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "competition" && $currentSection.get_Item(1) != "")
#set($urlWoCountryAndComp = $URLParser.Url.SubString(14))
#set($urlWoCountryAndComp = $urlWoCountryAndComp.Split($Converter.ToChar("?")).get_Item(0))
#set ($urlParts = $urlWoCountryAndComp.Split($Converter.ToChar('/')))
#set ($competitionUrl = '')
#set ($urlIsMatch = false)
#set ($competitionMatch = '')
#set ($urlIsExtra = false)
#foreach ($_part in $urlParts)
## Check for known endpoints
#if($_part == "match" || $urlIsMatch)
#set ($urlIsMatch = true)
#set ($competitionMatch = "${competitionMatch}$_part/")
#elseif($_part == "extra" || $_part == "scotiabank")
#set ($urlIsExtra = true)
#else
#set ($competitionUrl = "${competitionUrl}$_part/")
#end
#end
#set ($competitionUrl = $competitionUrl.TrimEnd($Converter.ToChar("/")))
#getCompetitionByUrl($competitionUrl)
#if ($competitionThumbnail != "")
#set($metaOgImage = "$competitionThumbnail")
#set($metaOgImageWidth = "140")
#set($metaOgImageHeight = "105")
#end
#set($metaTitle = "$competitionTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#set($metaDescription = "$competitionDescription")
#set($metaOgDescription = "$metaDescription")
#set($metaKeywords = "$competitionKeywords")
#end
#end
## Team
## /team/teamCode
#if ($currentSection.Count > 1)
#if ($currentSection.get_Item(0) == "team" && $currentSection.get_Item(1) != "")
#set($teamCode = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")).get_Item(0).Trim())
#set($teamName = $URLParser.get_Item(2).ToString().Split($Converter.ToChar("-")).get_Item(1).Trim())
#getTeamByCode($teamCode)
#if (!$tmTitle)
#doFourOhfour()
#end
#set($metaTitle = "$tmTitle | FOX Sports")
#set($metaOgTitle = $metaTitle)
#if($Country == "br")
#set($metaKeywords = "$tmName, $tmStadium, $tmPresident, futebol, futebol internacional, libertadores, sulamericana, futebol italiano, futebol inglês, cálcio, premier league")
#set($metaOgImage = "http://cdn-flac.ficfiles.com/sites/foxsports-br/files/img/teams/100x100/${teamCode}.png")
#set($metaOgImageWidth = "100")
#set($metaOgImageHeight = "100")
#set($metaTitle = "$tmName | Times | Futebol | FOX Sports")
#end
#end
#end
## Override title if defined on Omnix
#if($Page_title != "" && $Page_title != "empty")
#set($metaTitle = $Page_title)
#end
<title>$VelocityHelper.HTMLEncode($metaTitle)</title>
## Fix OG Entities
#shareEntities($metaOgTitle)
#set($metaOgTitle = $VelocityHelper.HTMLEncode($shareTextEntities))
#shareEntities($metaOgDescription)
#set($metaOgDescription = $VelocityHelper.HTMLEncode($shareTextEntities))
#getCanonicalUrl()
#set($metaOgImage = $metaOgImage.Replace("/img/", "/img/scaled/600x315/"))
<meta name="description" content="$metaDescription" />
<meta name='keywords' content='$metaKeywords'/>
<meta property="og:title" content="$metaOgTitle" />
<meta property="og:type" content="$metaOgType" />
<meta property="og:description" content="$metaOgDescription" />
<meta property="og:site_name" content="$metaOgSiteName" />
<meta property="og:url" content="$canonicalUrl" />
<meta property="og:image" content="$metaOgImage" />
#if($metaOgImageWidth != "" && $metaOgImageHeight != "")
<meta property="og:image:width" content="$metaOgImageWidth" />
<meta property="og:image:height" content="$metaOgImageHeight" />
#end
<meta property="al:android:app_name" content="$metaAlAndroidApp" />
<meta property="al:android:package" content="$metaAlAndroidPackage" />
<meta property="fb:admins" content="282998821807245" />
<meta property="fb:app_id" content="282998821807245" />
#if ($Country == "br")
<meta property="og:locale" content="pt_BR" />
#else
<meta property="og:locale" content="es_LA" />
#end
<!-- Schema.org markup for Google+ -->
<meta itemprop="name" content="$metaTitle">
<meta itemprop="description" content="$!metaDescription">
<meta itemprop="image" content="$metaOgImage">
<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
#getSocialLinks()
<meta name="twitter:site" content="@$socialLinks.twitter.Replace("https://twitter.com/","")">
<meta name="twitter:title" content="$metaOgTitle">
<meta name="twitter:description" content="$metaDescription">
<meta name="twitter:image:src" content="$metaOgImage">
#if (!$is_local)
$!Page_metadata
#end
#end
#macro(renderMustacheTemplates)
#languageVars()
<script id="mam-item-outer" type="x-tmpl-mustache">
<div class="glide__slide match-live" data-match-id="{{id}}">{{{innerContent}}}</div>
</script>
<script id="mam-item-inner" type="x-tmpl-mustache">
<h3 class="match-live-competition">{{competition.name}}</h3>
<div class="match-item">
<div class="match-home">
<img src="{{homeTeam.logo}}" alt="{{homeTeam.logo}}" />
<span class="match-team-name">{{homeTeam.name}}</span>
{{#showScore}}<span class="match-home-score-data">{{homeTeam.score}}</span>{{/showScore}}
</div>
<div class="match-score">
{{#status.beforeMatch}}
<span class="match-live-time-date">{{time}}</span>
<span class="match-live-time">{{date}}</span>
{{/status.beforeMatch}}
{{#status.live}}
<span class="match-live-score"><span class="match-home-score-data">{{homeTeam.score}}</span> <i class="icon icon_cross"></i> <span class="match-away-score-data">{{visitingTeam.score}}</span></span>
<span class="match-live-timer">
<i class="icon icon_timer"></i>
<span class="match-live-timer-data">{{status.liveMinutes}}</span>
</span>
{{/status.live}}
{{#status.afterMatch}}
<span class="match-live-score"><span class="match-home-score-data">{{homeTeam.score}}</span> <i class="icon icon_cross"></i> <span class="match-away-score-data">{{visitingTeam.score}}</span></span>
<span class="match-live-time">{{date}}</span>
{{/status.afterMatch}}
</div>
<div class="match-away">
<img src="{{visitingTeam.logo}}" alt="{{visitingTeam.name}}" />
<span class="match-team-name">{{visitingTeam.name}}</span>
{{#showScore}}<span class="match-away-score-data">{{visitingTeam.score}}</span>{{/showScore}}
</div>
</div>
</div>
</script>
<script id="mam-highlight" type="x-tmpl-mustache">
{{#matchCastUrl}}
<a href="{{matchCastUrl}}" class="mam-highlight-stats">
<div class="mam-highlight-stats-hover">
<div class="mam-highlight-stats-hover-content">
<i class="icon icon_timer"></i> Ver minuto a minuto
</div>
</div>
{{/matchCastUrl}}
{{^matchCastUrl}}
<a href="{{articleUrl}}" class="mam-highlight-stats">
{{/matchCastUrl}}
<div class="mam-highlight-stats-score">
<span class="mam-highlight-stats-score-team">{{homeTeam.name}}</span>
<img class="mam-highlight-stats-score-logo home-team" src="{{homeTeam.logo}}" alt="{{homeTeam.name}}" />
{{#showScore}}<span class="mam-highlight-stats-score-value">{{homeTeam.score}}</span>{{/showScore}}
<span class="mam-highlight-stats-score-x">×</span>
{{#showScore}}<span class="mam-highlight-stats-score-value">{{visitingTeam.score}}</span>{{/showScore}}
<img class="mam-highlight-stats-score-logo visiting-team" src="{{visitingTeam.logo}}" alt="{{visitingTeam.name}}" />
<span class="mam-highlight-stats-score-team">{{visitingTeam.name}}</span>
</div>
<div class="mam-highlight-stats-time">
{{#status.beforeMatch}}{{time}} - {{date}}{{/status.beforeMatch}}
{{#status.live}}{{status.liveMinutes}}{{/status.live}}
{{#status.afterMatch}}{{status.liveMinutes}}{{/status.afterMatch}}
</div>
</a>
{{#foxPlayUrl}}
<a class="mam-highlight-watch visible" href="{{foxPlayUrl}}" target="_blank" data-link>
$ds_lang_mam_watch_fox
<img class="mam-highlight-watch-image" src="$CDNAssetsPath/images/fox-play-orange.png" alt="Fox Play" />
</a>
{{/foxPlayUrl}}
</script>
<script id="mam-featured" type="x-tmpl-mustache">
{{#title}}
<h3 class="mam-featured-title">{{title}}</h3>
{{/title}}
<div class="mam-featured-stats">
<div class="mam-featured-stats-team">
<img class="mam-featured-stats-team-logo home-team" src="{{homeTeam.logo}}" alt="{{homeTeam.name}}" />
<span class="mam-featured-stats-team-name">{{homeTeam.name}}</span>
</div>
<div class="mam-featured-stats-container">
<div class="mam-featured-stats-score">
{{#showScore}}<div class="mam-featured-stats-score-value">{{homeTeam.score}}</div>{{/showScore}}
<div class="mam-featured-stats-score-x">×</div>
{{#showScore}}<div class="mam-featured-stats-score-value">{{visitingTeam.score}}</div>{{/showScore}}
</div>
<div class="mam-featured-stats-status">
{{#status.beforeMatch}}{{time}} - {{date}}{{/status.beforeMatch}}
{{#status.live}}{{status.liveMinutes}}{{/status.live}}
{{#status.afterMatch}}{{status.game_status}}{{/status.afterMatch}}
</div>
</div>
<div class="mam-featured-stats-team">
<img class="mam-featured-stats-team-logo visiting-team" src="{{visitingTeam.logo}}" alt="{{visitingTeam.name}}" />
<span class="mam-featured-stats-team-name">{{visitingTeam.name}}</span>
</div>
</div>
</script>
<script id="article-highlight-sm" type="x-tmpl-mustache">
<a href="/$Country/news/{{guid}}-{{slug}}" class="article-item">
<div class="content">
{{#category}}
<span class="article-tag">{{category}}</span>
{{/category}}
{{^category}}
<span class="article-tag">$ds_lang_schedule_title</span>
{{/category}}
<h2>{{title}}</h2>
<span class="time format-date" data-date="{{date}}" data-format="fromNow">{{date}}</span>
</div>
</a>
</script>
<script id="video-player" type="x-tmpl-mustache">
<video
controls class="video-js vjs-default-skin vjs-tech"
id="{{id}}"
poster="{{{poster}}}"
data-poster="{{{poster}}}"
data-id="{{id}}"
data-parent-title="{{title}}"
data-quality-low="{{{quality.low}}}"
data-quality-mid="{{{quality.mid}}}"
data-quality-high="{{{quality.high}}}"
></video>
</script>
<script id="ad-notice-tmpl" type="x-tmpl-mustache">
<p class="ad-notice">${ds_lang_ad_notice}</p>
</script>
#end
#macro(printPlayerOpenGraph $article)
#if($article.video)
#set($_articleVideoIds = $article.video.get_Item('values').get_Item(0).video.InnerText)
#set($_videoIds = $_articleVideoIds.Split($Converter.ToChar(',')))
#set($_videoId = $_videoIds.get_Item(0))
#if($_videoId && $_videoId != "")
#getVideoById($_videoId)
#if($Country == 'br')
<iframe allowfullscreen src="http://www.foxplaybrasil.com.br/feeds/iframes/player.html?vid=${_videoId}"></iframe>
#else
#if($videoProgressiveUrlMP4 != "")
<meta property="og:video" content="$videoProgressiveUrlMP4" />
<meta property="og:video:width" content="640" />
<meta property="og:video:height" content="360" />
<meta property="og:video:type" content="video/mp4" />
#end
#end
#end
#end
#end
#macro(printVideoOpenGraph $videoId)
#if($videoId && $videoId != "")
#getVideoById($videoId)
#if($videoProgressiveUrlMP4 != "")
#getAbsoluteURL()
<meta property="og:title" content="$!{videoTitle}" />
<meta property="og:image:url" content="$!{videoImage640x360}" />
<meta property="og:description" content="$!{videoDescription}" />
<meta property="og:type" content="video" />
<meta property="og:video:url" content="$rootURL/$Country/videos/embed/$videoId" />
<meta property="og:video:type" content="text/html" />
<meta property="og:video:width" content="640" />
<meta property="og:video:height" content="360" />
<meta property="og:video:url" content="$videoProgressiveUrlMP4" />
<meta property="og:video:type" content="video/mp4" />
<meta property="og:video:width" content="640" />
<meta property="og:video:height" content="360" />
#end
#end
#end
#macro(printPlayer $_videoId $isEmbeded)
#getVideoById($_videoId)
#languageVars()
#getAbsoluteURL()
#if($videoProgressiveUrlHigh)
#if($videoCompetitionCode && $videoCompetitionCode != "")
#getCompetitionTitleByVideoCategory($videoCompetitionCode)
#set ($_parentTitle = $competitionTitleByVideoCategory)
#elseif($videoShowName && $videoShowName != "")
#set ($_parentTitle = $videoShowName)
#end
#shareEntities($videoTitle)
#set($htmlEncodedVideoTitle = $shareTextEntities)
#set($urlEncodedVideoTitle = $videoTitle.Replace('"', '%22'))
#shareEntities($videoDescription)
#set($htmlEncodedVideoDescription = $shareTextEntities)
<div class="embed-player">
<video id="video_${_videoId}" controls preload="auto" data-setup='{"aspectRatio": "16:9", "fluid": false, "autoplay": false}'
class="video-js vjs-default-skin"
poster="${videoImage640x360}"
data-id="$_videoId"
data-parent-title="$VelocityHelper.HTMLEncode($!{_parentTitle}).Replace('"', '&quot;')"
data-quality-high="$!{videoProgressiveUrlHigh}"
data-quality-mid="$!{videoProgressiveUrlMid}"
data-quality-low="$!{videoProgressiveUrlLow}"
data-embeded="$!{isEmbeded}"
data-url="$!{videoCanonicalUrl}">
<source src="$!videoProgressiveUrlMP4" type="video/mp4">
</video>
<div class="forbidden vjs-fluid hidden">
<p>$ds_lang_videos_geo_restriction</p>
</div>
<div class="content-share-box social-share generator share-poster">
<div class="video-playback"></div>
## Temporarily removed until fully fixed and tested
<ul class="networks">
<li class="facebook-share"><a href="javascript:fbShare('${videoCanonicalUrl}', '${htmlEncodedVideoTitle}', '${htmlEncodedVideoDescription}', '${videoImage640x360}', 640, 480)"><i class="fa fa-facebook"></i></a></li>
<li class="twitter-share"><a href="javascript:twShare('${htmlEncodedVideoTitle} - ${videoCanonicalUrl}', 640, 480)"><i class="fa fa-twitter"></i></a></li>
<li class="email-share"><a href="mailto:?subject=${urlEncodedVideoTitle}&body=${urlEncodedVideoTitle} ${videoLink}"><i class="fa fa-envelope"></i></a></li>
</ul>
<div class="copy-data">
<p>${ds_lang_videos_share_this}</p>
<input class="generator-input short" type="text" readonly value="${videoCanonicalUrl}" onclick="$(this).select()"/>
<button class="link-copy">$ds_lang_videos_copy_link</button>
</div>
</div>
</div>
#else
#if($Country == 'br')
<iframe allowfullscreen src="http://www.foxplaybrasil.com.br/feeds/iframes/player.html?vid=${_videoId}"></iframe>
#else
<iframe allowfullscreen src="http://www.foxplay.com/feeds/iframes/player.html?vid=${_videoId}"></iframe>
#end
#end
#end
#set($playlist = false)
#set($playlistTitle = '')
#set($playlistDescription = '')
#set($playlistThumbnail = '')
#set($playlistTags = '')
#set($playlistImg200x200 = '')
#set($playlistCategory = '')
#set($playlistCategories = '')
#set($showCodeFromPl = '')
#set($playlistVideos = false)
#set($currentVideo = false)
#set($currentVideoId = '')
#set($show = '')
#macro(getPlaylist $playlistShortname)
#set($playlist = false)
#set($playlistVideos = false)
#set($currentVideo = false)
#set($show = false)
#set ($_service="http://services.ficfiles.com/feeds/objects.asmx/list_content_objects_by_custom_fields?countryCode=$Country&networkId=foxsports&contentObjectType=Playlist&customFieldsExpression={short-name==$playlistShortname}&onlyEnable=true")
#set ($_playlists = $ct_rss.ReadRss($_service, 1, 60).RssItems)
#set ($playlist = $_playlists.get_Item(0))
#getPlaylistVars($playlist)
#if ($Shows.Count>0)
#set ($show = $Shows.get_Item(0))
#end
#set ($playlistVideos = $ct_rss.ReadRss($playlist.mrss.InnerText, 50, 60).RssItems)
#set ($currentVideo = $playlistVideos.get_Item(0))
#getCurrentVideoVars($currentVideo)
#end
#macro(getPlaylistVars $i_playlist)
#set($playlistTitle = '')
#set($playlistDescription = '')
#set($playlistThumbnail = '')
#set($playlistTags = '')
#set($playlistImg200x200 = '')
#set($playlistShortName = '')
#set($playlistUrl = '')
#set($playlistCanonicalUrl = '')
#set($showCodeFromPl = '')
#if($i_playlist)
#set ($playlistTitle = $i_playlist.name.InnerText)
#set ($playlistDescription = $i_playlist.get_Item("playlist-description").InnerText)
#set ($playlistThumbnail = $i_playlist.get_Item("thumb").InnerText)
#set ($playlistTags = $i_playlist.get_Item("tags").InnerText)
#set ($playlistImg200x200 = $i_playlist.get_Item("image200x200").InnerText)
#set ($playlistShortName = $i_playlist.get_Item("short-name").InnerText)
#set ($playlistUrl = "/$Country/videos/playlists/${playlistShortName}")
#set ($playlistCanonicalUrl = "$rootWWWURL/videos/playlists/${playlistShortName}")
#set ($showCodeFromPl = $i_playlist.show.InnerText)
#if($i_playlist.categories.Count>0)
#if($i_playlist.categories.get_Item('category').Count == 0)
#set ($playlistCategories = $i_playlist.categories.get_Item('category').InnerText)
#else
#set ($playlistCategories = $i_playlist.categories.get_Item('category').get_Item(0).InnerText)
#end
#end
#if($playlistCategories)
#set ($playlistCategory = $playlistCategories.Split($Converter.ToChar(">")))
#set ($_counter = $playlistCategory.Count - 1)
#set ($playlistCategory = $playlistCategory.get_Item($_counter))
#end
#end
#end
#macro(getCurrentVideoVars $i_playlistVideo)
#set($currentVideoId = '')
#if($i_playlistVideo)
#set ($currentVideoId = $i_playlistVideo.get_Item("guid").InnerText)
#end
#end
#macro(titlecase $string)
#set($flagUpper=true)
#set($stringparts=$string.ToCharArray())
#set($string_titlecase="")
#foreach ($stringchar in $stringparts)
#if ($flagUpper)
#set($flagUpper=false)
#set($string_titlecase="${string_titlecase}$stringchar.ToString().ToUpper()")
#else
#if ($stringchar.ToString().Equals(" "))
#set($flagUpper=true)
#end
#set($string_titlecase="${string_titlecase}$stringchar.ToString()")
#end
#end
${string_titlecase}
#end
#macro (getSynopsis $networkId $progId $episodeId)
#set($synopsis = false)
#if($progId && $episodeId && $episodeId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/synopsis/$Country/$networkId/$progId/$episodeId/schedule")
#set ($_serviceItems = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.schedule)).RssItems)
#foreach($_item in $_serviceItems)
#set($synopsis = $_item)
#break
#end
#end
#if(!$synopsis && $progId && $progId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/synopsis/$Country/$networkId/$progId/0/schedule")
#set ($_serviceItems = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.schedule)).RssItems)
#foreach($_item in $_serviceItems)
#set($synopsis = $_item)
#break
#end
#end
#getSynopsisVars($synopsis)
#end
#macro (getSchedule $networkId $selectedDay $days)
#set($_selectedDay = $selectedDay.ToString().Replace('-', ''))
#set($schedule = false)
#set($quantity = ($Converter.ToInteger($days) + 1) * 100)
#set($_serviceNetworkId = $networkId.Replace('foxsports1', 'foxsports'))
#set($_serviceUrl = "http://services.ficfiles.com/v2/schedule/$Country/$_serviceNetworkId/$_selectedDay?cachefix=$networkId")
#if($Country == 'cl' && $networkId == 'foxsports')
#set($scheduleAlt = false)
#else
#set($_serviceUrlAlt = "http://services.ficfiles.com/v2/schedule/$Country/${_serviceNetworkId}alt/$_selectedDay/$days")
#set($scheduleAlt = $ct_rss.ReadRss($_serviceUrlAlt, $quantity, $Converter.ToInteger($ct_cacheConfig.schedule)).RssItems)
#end
#set($schedule = $ct_rss.ReadRss($_serviceUrl, $quantity, $Converter.ToInteger($ct_cacheConfig.schedule)).RssItems)
#if($scheduleAlt.Count>0)
#set ($_deltaCount = $schedule.Count - 1)
#foreach($_i in [0..$_deltaCount])
#set ($scheduleItem = $schedule.get_Item($_i))
#foreach($scheduleItemAlt in $scheduleAlt)
#if ($scheduleItemAlt.start_time.InnerText == $scheduleItem.start_time.InnerText && ($scheduleItemAlt.PgmChanges == $Country.ToUpper() || ($Country == 'cl' && $networkId == 'foxsports1') || ($Country == 'co' && $networkId == 'foxsports')))
$schedule.set_Item($_i, $scheduleItemAlt)
#break
#end
#end
#end
#end
#end
#macro (getSynopsisVars $_synopsis)
#set ($synopsis = $_synopsis)
#set ($synopsisDesc = '')
#set ($synopsisName = '')
#if($_synopsis)
#set($synopsisDesc = $_synopsis.synopsis.InnerText.Trim())
#set ($synopsisName = $_synopsis.synopsis.sName)
#getCleanProdName($synopsisName)
#set ($synopsisName = $cleanProdName)
#end
#end
#macro (getScheduleVars $_schedule)
#set ($schedule = $_schedule)
#set ($scheduleYear = '')
#set ($scheduleMonth = '')
#set ($scheduleDay = '')
#set ($scheduleStart = false)
#set ($scheduleEnd = false)
#set ($scheduleDuration = false)
#set ($scheduleOnNow = false)
#set ($scheduleProdName = '')
#set ($scheduleProdId = false)
#set ($scheduleProdType = false)
#set ($scheduleEpisodeId = false)
#set ($scheduleVersion = false)
#if($_schedule)
#set ($scheduleOnNow = $_schedule.onNow.InnerText)
#set ($scheduleYear = $_schedule.isodate.InnerText.SubString(0, 4))
#set ($scheduleMonth = $_schedule.isodate.InnerText.SubString(4, 2))
#set ($scheduleDay = $_schedule.isodate.InnerText.SubString(6, 2))
#set ($scheduleStart = $_schedule.start_time.InnerText)
#set ($scheduleEnd = $_schedule.end_time.InnerText)
## 7/12/2015 04:19:00 PM
#set ($scheduleStartDate = "${scheduleDay}-${scheduleMonth}-${scheduleYear} $scheduleStart")
#set ($scheduleEndDate = "${scheduleDay}-${scheduleMonth}-${scheduleYear} $scheduleEnd")
#set ($scheduleStartObject = $Converter.ToDateTime("${scheduleYear}-${scheduleMonth}-${scheduleDay} $scheduleStart"))
#set ($scheduleEndObject = $Converter.ToDateTime("${scheduleYear}-${scheduleMonth}-${scheduleDay} $scheduleEnd"))
#set ($_duration = $Converter.ToDateTime("${scheduleYear}-${scheduleMonth}-${scheduleDay} $scheduleEnd"))
#set ($_hoursToAdd = $Converter.ToInteger($scheduleStart.Split($Converter.ToChar(":")).get_Item(0)))
#set ($_hoursToAdd = $_hoursToAdd * -1)
#set ($_duration = $_duration.AddHours($_hoursToAdd))
#set ($_minutesToAdd = $Converter.ToInteger($scheduleStart.Split($Converter.ToChar(":")).get_Item(1)))
#set ($_minutesToAdd = $_minutesToAdd * -1)
#set ($scheduleDuration = $_duration.AddMinutes($_minutesToAdd).ToString('HH:mm'))
#set ($scheduleProdName = $_schedule.production_name.InnerText)
#if ($scheduleProdName == "")
#set ($scheduleProdName = $_schedule.SerieName.InnerText)
#end
#getCleanProdName($scheduleProdName)
#set ($scheduleProdName = $cleanProdName)
#set ($scheduleProdId = $_schedule.id_production.InnerText)
#set ($scheduleProdType = $_schedule.id_production_type.InnerText)
#set ($scheduleEpisodeId = $_schedule.id_episode.InnerText)
#set ($scheduleVersion = $_schedule.version)
#end
#end
#macro (getCleanProdName $_prodName)
#set($cleanProdName = $_prodName.Replace("Repeticion", "").Replace("Estreno", "").Replace("estreno", "").Replace("en vivo", "").Replace("repeticion", "").Replace(" ev", "").Replace("repeti", "").Replace("en viv", "").Replace("ESTRENO", "").Replace("EN VIVO", "").Replace("REPETICION", "").Replace(" EV", "").Replace("REPETI", "").Replace("EN VIV", "").Replace('@@@###$$$', '').Trim())
#if($cleanProdName.EndsWith(":"))
#set ($_nameLen = $cleanProdName.Length - 1)
#set ($cleanProdName = $cleanProdName.SubString(0, $_nameLen))
#getCleanProdName ($cleanProdName)
#end
#end
#macro(getShowVars $_show)
#set ($show = $_show)
#set ($showId = false)
#set ($showTitle = '')
#set ($showTitleNormalized = '')
#set ($showLink = '#')
#set ($showCanonicalLink = "#")
#set ($showBackground = "")
#set ($showDescription = "")
#set ($showHeader = false)
#set ($showImage = false)
#if($_show)
#set ($showId = $_show.get_Item('guid').InnerText)
#set ($showTitle = $_show.get_Item('title').InnerText)
#set ($progId = $show.get_Item('showProgrammingObject').innerText)
#set ($showTitleNormalized = $VelocityHelper.Normalize($showTitle).Replace(' ', '-').Replace('"', '').Replace('+', ''))
#set ($showLink = "/$Country/show/${showId}-$showTitleNormalized")
#set ($showCanonicalLink = "$rootWWWURL$showLink")
#set ($showDescription = $_show.get_Item('synopsis').InnerText)
#set ($showBackground = $_show.get_Item('Background').InnerText)
#set ($showHeader = $_show.get_Item('Header').InnerText)
#set ($showImage = $_show.get_Item('Image').InnerText)
#end
#end
#macro(getShowFPVars $_showFP)
#set ($showFP = $_showFP)
#set ($showFPId = false)
#set ($showFPImage = false)
#set ($showFPGenre = false)
#set ($showFPTuneIn = false)
#set ($showFPDescription = false)
#set ($showFPShortDescription = false)
#set ($showFPType = false)
#set ($showFPTitleNormalized = false)
#set ($showFPHashtag = false)
#set ($showFPImageHeader = false)
#set ($showFPPoster = false)
#set ($showFPPoster80x120 = false)
#set ($showFPCarrouseImage=false)
#set ($showFPRelated = false)
#set ($showFPMPXName = false)
#set ($showFPHaveRating = false)
#set ($showFPHaveStacking = false)
#set ($showFPHaveLiveEvent = false)
#set ($showFPHaveLiveEvent = false)
#set ($showFPHasWebisodio = false)
#set ($showFPHavePlaylist = 'no')
#set ($showFPTitle = "")
#set ($showFPChannel = false)
#set ($showFPPilar = false)
#set ($showFPLink = '#')
#set ($showFPAuthLevel = "")
#set ($showFPStartEndYear = "")
#set ($showFPIMDB = "")
#set ($showFPParentalControl = "")
#set ($showFPCast = false)
#set ($showFPMetakeywords = false)
#set ($showFPImage2600x800 = "//cdn-flac.ficfiles.com/sites/common/objects/img/fp-headergenerico-series-v1.png")
#set ($showFPImage10x3 = false)
#set ($showFPImage1920x1080 = "//cdn-flac.ficfiles.com/sites/common/objects/img/fp-genericagris-1920x1082.png")
#set ($showFPImage10x6 = false)
#set ($showFPImage440x660 = "//cdn-flac.ficfiles.com/sites/common/objects/img/fp-genericagris-660x440.png")
#set ($showFPImage10x15 = false)
#set ($showFPImage640x360 = false)
#set ($showFPImage480x270 = false)
#set ($showFPImage320x180 = false)
#set ($showFPImage240x135 = false)
#set ($showFPImage240x135 = false)
#set ($showFPNoteId = false)
#set ($showFPRecipeId = false)
#set ($showFPCraftworkId = false)
#set ($showFPTrailerId = false)
#set ($showFPMPXAccount = "flacfod")
#set ($showFPIsKids = false)
#if($_showFP)
#set ($showFPId = $_showFP.get_Item('guid').InnerText)
#set ($showFPTitle= $_showFP.get_Item('title').InnerText)
#set ($showFPTitleNormalized = $Vel94ocityHelper.Normalize($showFPTitle).Replace(' ', '-').Replace('"', '').Replace('+', ''))
#set ($showFPLink = "http://www.foxplay.com/$Country/show/${showFPId}-$showFPTitleNormalized.Replace('alert', 'a').Replace('script', 's')")
#set ($showFPTuneIn = $_showFP.get_Item('tunein').InnerText)
#set ($showFPGenre = $_showFP.get_Item('class').InnerText)
#set ($showFPGenre = $showFPGenre.Replace(',', ' | '))
#if($showFPGenre.Contains("kids"))
#set ($showFPIsKids = true)
#end
#set ($showFPChannel = $_showFP.get_Item('channel').InnerText)
#set ($showFPAuthLevel = $_showFP.get_Item('authLevel').InnerText)
#set ($showFPDescription = $_showFP.get_Item('showDescription').InnerText)
#if(!$showFPDescription || $showFPDescription == "")
#set ($showFPDescription = $_showFP.get_Item('metadescription').InnerText)
#end
#set ($showFPShortDescription = $showFPDescription)
#if ($showFPShortDescription.ToString.length() > 200)
#set($showFPShortDescription = "$showFPShortDescription.ToString.substring(0,200) ...")
#end
#set ($showFPType = $_showFP.get_Item('contentType').InnerText)
#set ($showFPHashtag = $_showFP.get_Item('twitter-hash').InnerText)
#set ($showFPParentalControl = $_showFP.get_Item('parental-guidelines').InnerText)
#set ($showFPMetakeywords = $_showFP.get_Item('metakeywords').InnerText)
#set ($showFPImageHeader = $_showFP.get_Item('header-image').InnerText)
#set ($showFPPoster = $_showFP.get_Item('poster-image').InnerText)
#set ($showFPPoster80x120 = $showFPPoster.Replace("/440x660/", "/resized/80x120/"))
#set ($showFPRelated = $_showFP.get_Item('relatedShows').InnerText)
## #set ($showFPMPXName = $_showFP.get_Item('title').InnerText.Replace(":", '\:').Replace(",", '\,'))
#set ($showFPMPXName = $_showFP.get_Item('title').InnerText)
#set ($showFPHavePlaylist = $_showFP.get_Item('havePlaylist').InnerText)
#set ($showFPHaveRating = $_showFP.get_Item('haveRating').InnerText)
#set ($showFPHaveStacking = $_showFP.get_Item('haveStacking').InnerText)
#if($showFPHaveStacking == "yes")
#set($showFPHaveStacking = true)
#elseif($showFPHaveStacking == "no")
#set($showFPHaveStacking = false)
#end
#set ($showFPHaveLiveEvent = $_showFP.get_Item('have-live-event').InnerText)
#set ($showFPCast = $_showFP.get_Item('cast').InnerText)
################################################
#set($showFPPilar = "series")
#if($showFPChannel == "natgeo")
#set($showFPPilar = "factual")
#elseif($showFPChannel == "foxsports")
#set($showFPPilar = "sports")
#elseif($showFPChannel == "foxlife")
#set($showFPPilar = "lifestyle")
#end
################################################
#set ($showFPStartEndYear = $_showFP.get_Item('start-end-year').InnerText)
#set ($showFPIMDB = $_showFP.get_Item('id-imdb').InnerText.Trim())
#set ($showFPCarrouseImage = $_showFP.get_Item('carrouseImage').InnerText)
#set ($showFPHlCharacterImage = $_showFP.get_Item('hlCharacterImage').InnerText)
#if($showFPIMDB!=""&&!$showFPIMDB.Contains("tt"))
#set ($showFPIMDB = "tt$showIMDB")
#end
#if($_showFP.get_Item('header-image').InnerText != "")
#set ($showFPImage2600x800 = $_showFP.get_Item('header-image').InnerText)
#else
#set ($showFPImage2600x800 = $showFPImage2600x800.Replace("series", "$showPilar"))
#end
#if($showFPImage2600x800.Contains("headergenerico"))
#set ($showFPImage2600x800 = $showFPImage2600x800.Replace("series", "$showPilar"))
#end
#set ($showFPImage10x3 = $showFPImage2600x800.Replace("/2600x800/", "/resized/10x3/"))
#if($_showFP.get_Item('main-image').InnerText != "")
#set ($showFPImage1920x1080 = $_showFP.get_Item('main-image').InnerText)
#end
#set ($showFPImage10x6 = $showFPImage1920x1080.Replace("/1920x1080/", "/resized/10x6/"))
#if($_showFP.get_Item('poster-image').InnerText != "")
#set ($showFPImage440x660 = $_showFP.get_Item('poster-image').InnerText)
#end
#if($showFPImage440x660.Contains("dummy"))
#set ($showFPImage10x15 = $showFPImage440x660)
#else
#set ($showFPImage10x15 = $showFPImage440x660.Replace("/440x660/", "/resized/10x15/"))
#end
#set ($showFPImage640x360 = $showFPImage1920x1080.Replace("/1920x1080/", "/resized/640x360/"))
#set ($showFPImage480x270 = $showFPImage1920x1080.Replace("/1920x1080/", "/resized/480x270/"))
#set ($showFPImage320x180 = $showFPImage1920x1080.Replace("/1920x1080/", "/resized/320x180/"))
#set ($showFPImage240x135 = $showFPImage1920x1080.Replace("/1920x1080/", "/resized/240x135/"))
#set ($showFPPoster80x120 = $showFPPoster.Replace("/440x660/", "/resized/80x120/"))
#set ($showFPNoteId = $_showFP.get_Item('id-notes').InnerText)
#set ($showFPRecipeId = $_showFP.get_Item('id-recipes').InnerText)
#set ($showFPCraftworkId = $_showFP.get_Item('id-do-it-yourself').InnerText)
#set ($showFPTrailerId = $_showFP.get_Item('trailerId').InnerText)
#set ($showFPMPXAccount = $_showFP.get_Item('mpxAccount').InnerText)
#end
#end
#macro(getShowFPByTitle $_showTitle)
#set($showFPByTitle = false)
#if($_prodId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/show/$Country/foxplay?p=${_showTitle}")
#set ($_serviceshows = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.shows)).RssItems)
#foreach($_show in $_serviceshows)
#set($showFPByTitle = $_show)
#break
#end
#end
#getShowFPVars($showFPByTitle)
#end
#macro(getShowByTitle $_showTitle)
#set($showByTitle = false)
#if($_prodId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/show/$Country/foxsports?p=${_showTitle}")
#set ($_serviceshows = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.shows)).RssItems)
#foreach($_show in $_serviceshows)
#set($showByTitle = $_show)
#break
#end
#end
#getShowVars($showByTitle)
#end
#macro(getShowFPByProdId $_prodId)
#set($showFPByProdId = false)
#if($_prodId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/show/$Country/foxplay/${_prodId}")
#set ($_serviceshows = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.shows)).RssItems)
#foreach($_show in $_serviceshows)
#set($showFPByProdId = $_show)
#break
#end
#end
#getShowFPVars($showFPByProdId)
#end
#macro(getShowByProdId $_prodId)
#set($showByProdId = false)
#if($_prodId != "0")
#set ($_serviceUrl = "http://services.ficfiles.com/v2/show/$Country/foxsports/${_prodId}")
#set ($_serviceshows = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.shows)).RssItems)
#foreach($_show in $_serviceshows)
#set($showByProdId = $_show)
#break
#end
#end
#getShowVars($showByProdId)
#end
#macro(getProgSpec $spec)
#set ($specText = $spec)
#set ($specText = $specText.Replace('00','Obra Publicitária'))
#set ($specText = $specText.Replace('01','Obra Não Publicitária Brasileira, Constituinte de espaço qualificado e Independente'))
#set ($specText = $specText.Replace('02','Obra Não Publicitária Brasileira, Constituinte de espaço qualificado e Não independente'))
#set ($specText = $specText.Replace('03','Obra Não Publicitária Brasileira e Não constituinte de espaço qualificado'))
#set ($specText = $specText.Replace('04','Obra Não Publicitária Estrangeira e Constituinte de espaço qualificado'))
#set ($specText = $specText.Replace('05','Obra Não Publicitária Estrangeira e Não constituinte de espaço qualificado'))
#end
#macro(getRatingSpec $rating)
#set ($ratingText = $rating)
#set ($ratingText = $ratingText.Replace('+21','Condicionada Inadequado para menores de 21 anos'))
#set ($ratingText = $ratingText.Replace('+10 Bras/+7 Mex/All Arg','Inadequado para menores de 10 anos'))
#set ($ratingText = $ratingText.Replace('+12 Bra/Mex - +13 Arg','Inadequado para menores de 12 anos'))
#set ($ratingText = $ratingText.Replace('+14 Bra/+15 Mex/+13 Arg','Inadequado para menores de 14 anos'))
#set ($ratingText = $ratingText.Replace('+15 Mex - +16 Arg','Inadequado para menores de 14 anos'))
#set ($ratingText = $ratingText.Replace('+16 Arg/Bra - +18Mex','Inadequado para menores de 16 anos'))
#set ($ratingText = $ratingText.Replace('+16 Bra/Arg  - +17Mex','Inadequado para menores de 16 anos'))
#set ($ratingText = $ratingText.Replace('+18 Bra/+16 Arg /+17Mex','Inadequado para menores de 18 anos'))
#set ($ratingText = $ratingText.Replace('+18 Bra/Arg/Mex','Inadequado para menores de 18 anos'))
#set ($ratingText = $ratingText.Replace('+7 Mex/ All Arg-Bra','livre'))
#set ($ratingText = $ratingText.Replace('All Ages','livre'))
#end
#macro(sortvideosByEditorialOrder $i_videos $i_guidIds)
#set($i_guidIds = $i_guidIds.Replace(",", ",http://data.media.theplatform.com/media/data/Media/"))
#set($i_guidIds = "http://data.media.theplatform.com/media/data/Media/$i_guidIds")
#set($_moviesCount = $i_videos.Count)
#set($_n = $_moviesCount)
#foreach($_nAux in [$_moviesCount..0])
#set($_swapped = false)
#set($_m = $_n - 1)
#foreach($_i in [1..$_m])
#set ($_j = $_i - 1)
#if($i_guidIds.IndexOf($i_videos.get_Item($_j).get_Item("pl:id").InnerText)>$i_guidIds.IndexOf($i_videos.get_Item($_i).get_Item("pl:id").InnerText))
#set($_obj_Aux = $i_videos.get_Item($_j))
$i_videos.set_Item($_j, $i_videos.get_Item($_i))
$i_videos.set_Item($_i, $_obj_Aux)
#set($_swapped = true)
#end
#end
#set($_n = $_n - 1)
#if(!$_swapped)
#break
#end
#end
#end
#macro (getSpecialByFolder $_folder)
#set($specialByFolder = false)
#if($_folder != "")
#getArticlesCountry()
#set( $serviceUrl = "http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/true/Special/pubdate/desc?p={special_folder==$_folder}")
#set ($_specials = $ct_rss.ReadRss($serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_special in $_specials)
#set ($specialByFolder = $_special)
#break
#end
#end
#getSpecialVars($specialByFolder)
#end
#macro (getSpecialById $_id)
#set($specialById = false)
#isNumericArray($_id)
#if($isNumericArray)
#set ($_specials = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/true/${competitionId}", 1, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#foreach($_special in $_specials)
#set ($specialById = $_special)
#break
#end
#end
#getSpecialVars($specialById)
#end
#macro (getSpecials $_quantity)
#set ($specials = false)
#set ($_quantity = $Converter.ToInteger($_quantity))
#set ($specials = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/ar/foxsports/true/Special/$_quantity/1/date/desc", $i_quantity, $Converter.ToInteger($ct_cacheConfig.content_objects)).RssItems)
#end
#macro (getSpecialVars $_special)
#set ($specialId = false)
#set ($specialTitle = "")
#set ($specialName = "")
#set ($specialHeight = "")
#set ($specialUrl = "")
#set ($specialFolder = "")
#if ($_special)
#set ($specialId = $_special.get_Item('guid').InnerText)
#set ($specialTitle = $_special.get_Item('title').InnerText)
#set ($specialName = $_special.get_Item('special_name').InnerText)
#set ($specialHeight = $_special.get_Item('special_content_height').InnerText)
#set ($specialUrl = $_special.get_Item('special_content_url').InnerText)
#set ($specialFolder = $_special.get_Item('special_folder').InnerText)
#end
#end
#macro(printSpriteForArticles $articles $size)
#if(!$sprite_prefix)
#set($sprite_prefix=0)
#else
#set($sprite_prefix=$sprite_prefix + 1)
#end
#set ($_images = "")
#foreach($__article in $articles)
#if($__article.image != "")
#set ($class = "")
#set ($art_image_140x105 = $__article.image.InnerText.ToString())
## Este if chequea que la imagen no sea del site viejo
#if (!$art_image_140x105.Contains("/11/") && !$art_image_140x105.Contains("/12/"))
#set ($art_image_140x105_idx = $art_image_140x105.LastIndexOf("/"))
#set ($art_image_140x105 = "${art_image_140x105.SubString(0, $art_image_140x105_idx)}/$size${art_image_140x105.SubString($art_image_140x105_idx)}") 
#else
#set ($class = "class='old-image'")
#end
#set ($_images = "_${velocityCount}:$art_image_140x105&${_images}")
#end
#end
#if($_images)
#set ($_images = $_images.Replace("http://cdn.foxsportsla.com/sites/",""))
#set ($_images = $_images.Replace("http://cdn-flac.ficfiles.com/sites/",""))
#set ($_sprite_path = "http://cdn.foxsportsla.com/sites/common/objects/img/packimg/sprite.css?sprite${sprite_prefix}&$_images")
<script type="text/javascript">
//$_sprite_path 
jQuery(document).ready(function(){
jQuery('.flacsprite${sprite_prefix}').parent().parent().attr("data-appear-top-offset", "600").attr("data-appear-appear-left-offset", "300");
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').appear();
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').bind('appear',function(){
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').unbind('appear');
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').ignore_appear();
if(jQuery('style[data-prefix="${sprite_prefix}"]').length==0)
{
jQuery('head').append(jQuery('<style/>').attr('data-prefix', "${sprite_prefix}").text("$IncludePageHelper.GetPage("600", $_sprite_path)"));
}
});
});
</script>
#end
#end
#macro(printSpriteForAuthors $articles)
#if(!$sprite_prefix)
#set($sprite_prefix=0)
#else
#set($sprite_prefix=$sprite_prefix + 1)
#end
#set ($_images = "")
#foreach($__article in $articles)
#if($__article.AuthorInfo.Picture.InnerText != "")
#set ($_author_img_idx = $__article.AuthorInfo.Picture.InnerText.IndexOf("?"))
#set ($_author_img = $__article.AuthorInfo.Picture.InnerText)
#if($_author_img_idx>0)
#set ($_author_img = $_author_img.SubString(0, $_author_img_idx))
#end
#set ($_images = "_${velocityCount}:$_author_img&${_images}")
#end
#end
#if($_images)
#set ($_images = $_images.Replace("http://cdn.foxsportsla.com/sites/",""))
#set ($_images = $_images.Replace("http://cdn-flac.ficfiles.com/sites/",""))
#set ($_sprite_path = "http://cdn.foxsportsla.com/sites/common/objects/img/packimg/sprite.css?sprite${sprite_prefix}&$_images")
<script type="text/javascript">
jQuery(document).ready(function(){
jQuery('.flacsprite${sprite_prefix}').parent().parent().attr("data-appear-top-offset", "600").attr("data-appear-appear-left-offset", "300");
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').appear();
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').bind('appear',function(){
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').unbind('appear');
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').ignore_appear();
if(jQuery('style[data-prefix="${sprite_prefix}"]').length==0)
{
jQuery('head').append(jQuery('<style/>').attr('data-prefix', "${sprite_prefix}").text("$IncludePageHelper.GetPage("600", $_sprite_path)"));
}
});
});
</script>
#end
#end
#macro(printSpriteForGalleries $galleries $size)
#if(!$sprite_prefix)
#set($sprite_prefix=0)
#else
#set($sprite_prefix=$sprite_prefix + 1)
#end
#set ($_images = "")
#foreach  ($__gallery in $galleries)
#set ($_gallery_img_idx = $__gallery.image.InnerText.IndexOf("?"))
#set ($_gallery_img = $__gallery.image.InnerText)
#if($_gallery_img_idx>0)
#set ($_gallery_img = $_gallery_img.SubString(0, $_gallery_img_idx))
#end
#set ($_images = "_${velocityCount}:$__gallery.imagePath.InnerText$size/$_gallery_img&${_images}")
#end
#if($_images)
#set ($_images = $_images.Replace("http://cdn.foxsportsla.com/sites/",""))
#set ($_images = $_images.Replace("http://cdn-flac.ficfiles.com/sites/",""))
#set ($_sprite_path = "http://cdn.foxsportsla.com/sites/common/objects/img/packimg/sprite.css?sprite${sprite_prefix}&$_images")
<script type="text/javascript">
jQuery(document).ready(function(){
jQuery('.flacsprite${sprite_prefix}').parent().parent().attr("data-appear-top-offset", "600").attr("data-appear-appear-left-offset", "300");
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').appear();
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').bind('appear',function(){
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').unbind('appear');
jQuery('[data-appear-top-offset]:has(.flacsprite${sprite_prefix})').ignore_appear();
if(jQuery('style[data-prefix="${sprite_prefix}"]').length==0)
{
jQuery('head').append(jQuery('<style/>').attr('data-prefix', "${sprite_prefix}").text("$IncludePageHelper.GetPage("600", $_sprite_path)"));
}
});
});
</script>
#end
#end
############## checkTeamUrl ###########
#macro(checkTeamUrl)
#if(!$tmCode)
#set ($_urlFix = '/error')
#else
#set ($_currentUrl = $URLParser.get_Item(2))
#set ($_articleUrl = "${tmCode}-$VelocityHelper.Normalize($tmFullName)")
#set ($_articleUrl = $_articleUrl.Replace(' ', '-').Replace('"', '').Replace('+', ''))
#if ($_articleUrl != $_currentUrl)
#set ($_urlFix = "/futbol/equipos/$_articleUrl")
#end
#end
#if ($_urlFix && !$Query.path)
<meta http-equiv="refresh" content="url=0; $_urlFix">
<script type="text/javascript">
location.href = '$_urlFix';
</script>
#end
#end
########## getTeamByCode ##########
#macro (getTeamByCode $teamCode)
#set ($tm = false)
#isNumericArray($teamCode)
#if($isNumericArray)
##set ($tmData = $ct_rss.ReadRss("http://services.ficfiles.com/feeds/objects.asmx/get_content_object_by_code?countryCode=$Country&networkId=foxsports&content_object_code=$teamCode", 1, 60).RssItems)
#set ($tmData = $ct_rss.ReadRss("http://services.ficfiles.com/v2/contentObjects/$Country/foxsports/true/$teamCode", 1, 60).RssItems)
#if ($tmData.Count > 0)
#set ($tm = $tmData.get_Item(0))
#end
#end
#getTeamVars($tm)
#end
#macro (getTeamVars $_team)
#set ($tmId = "")
#set ($tmCompetitionId = "")
#set ($tmStatsId = "")
#set ($tmDatafactoryId = "")
#set ($tmVendorCode = "")
#set ($tmStarPlayer = "")
#set ($tmTopGoal = "")
#set ($tmInterTitles = "")
#set ($tmRank = "")
#set ($tmCode = "")
#set ($tmTitle = "")
#set ($tmName = "")
#set ($tmHashtag = "")
#set ($tmFullName = "")
#set ($tmTeamVideo = "")
#set ($tmStadium = "")
#set ($tmPresident = "")
#set ($tmFounded = "")
#set ($tmHl = "")
#set ($tmVideos = "")
#set ($tmSeason = "")
#set ($tmSite = "")
#set ($tmBackground = "")
#set ($tmShield = "")
#set ($tmTeamPicture = "")
#set ($tmWorldCups = "")
#set ($tmQuialifier = "")
#set ($tmBestPerformance = "")
#set ($tmCountryFlag = "")
#if($_team)
#set ($tmId = $_team.get_Item("team_id").InnerText)
#set ($tmCompetitionId = $_team.get_Item("competition_id").InnerText)
#set ($tmStatsId = $_team.get_Item("stats_id").InnerText)
#set ($tmDatafactoryId = $_team.get_Item("datafactory_id").InnerText)
#set ($tmVendorCode = $_team.get_Item("vendor_code").InnerText)
#set ($tmStarPlayer = $_team.get_Item("star_player").InnerText)
#set ($tmTopGoal = $_team.get_Item("top_goal").InnerText)
#set ($tmInterTitles = $_team.get_Item("inter_titles").InnerText)
#set ($tmRank = $_team.get_Item("rank_ihhfs").InnerText)
#set ($tmCode = $_team.get_Item("code").InnerText)
#set ($tmTitle = $_team.get_Item("title").InnerText)
#set ($tmName = $_team.get_Item("name").InnerText)
#set ($tmHashtag = $_team.get_Item("hashtag").InnerText)
#set ($tmFullName = $_team.get_Item("full_name").InnerText)
#set ($tmTeamVideo = $_team.get_Item("team_video").InnerText)
#set ($tmStadium = $_team.get_Item("stadium").InnerText)
#set ($tmPresident = $_team.get_Item("president").InnerText)
#set ($tmFounded = $_team.get_Item("founded").InnerText)
#set ($tmHl = $_team.get_Item("highlight").InnerText)
#set ($tmVideos = $_team.get_Item("video_code").InnerText)
#set ($tmSeason = $_team.get_Item("season_id").InnerText)
#set ($tmSite = $_team.get_Item("site").InnerText)
#set ($tmBackground = $_team.get_Item("background").InnerText)
#set ($tmShield = $_team.get_Item("shield").InnerText)
#set ($tmTeamPicture = $_team.get_Item("team_picture").InnerText)
#set ($tmWorldCups = $_team.get_Item("world_cups").InnerText)
#set ($tmQuialifier = $_team.get_Item("qualifier").InnerText)
#set ($tmBestPerformance = $_team.get_Item("best_performance").InnerText)
#set ($tmCountryFlag = $_team.get_Item("country_flag").InnerText)
#end
#end
#set($teams_br_br_url = [])#set($teams_br_br_name = [])#set($teams_br_br_shield = [])
#set($teams_br_int_url = [])#set($teams_br_int_name = [])#set($teams_br_int_shield = [])
#macro(getTeamsList)
#set($teams_br_br_url = [])#set($teams_br_br_name = [])#set($teams_br_br_shield = [])
#set($teams_br_int_url = [])#set($teams_br_int_name = [])#set($teams_br_int_shield = [])
#set($foo = $teams_br_br_url.add("/br/team/30631-americamg"))         #set($foo = $teams_br_br_name.add("América-MG"))          #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/42_americamg.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4932-atleticomg"))         #set($foo = $teams_br_br_name.add("Atlético-MG"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/01_atletico_mg.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/5845-atleticopr"))         #set($foo = $teams_br_br_name.add("Atlético-PR"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/02_atleticopr.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4928-botafogo"))           #set($foo = $teams_br_br_name.add("Botafogo"))            #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/04_botafogo.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/12407-chapecoense"))       #set($foo = $teams_br_br_name.add("Chapecoense"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/05_chapecoense.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4127-corinthians"))        #set($foo = $teams_br_br_name.add("Corinthians"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/06_corinthians.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4927-coritiba"))           #set($foo = $teams_br_br_name.add("Coritiba"))            #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/07_coritiba.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4933-cruzeiro"))           #set($foo = $teams_br_br_name.add("Cruzeiro"))            #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/08_cruzeiro.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/12408-figueirense"))       #set($foo = $teams_br_br_name.add("Figueirense"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/09_figueirense.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4920-flamengo"))           #set($foo = $teams_br_br_name.add("Flamengo"))            #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/10_flamengo.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4921-fluminense"))         #set($foo = $teams_br_br_name.add("Fluminense FC"))       #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/11_fluminense.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4922-gremio"))             #set($foo = $teams_br_br_name.add("Grêmio"))              #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/13_gremio.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4924-internacional"))      #set($foo = $teams_br_br_name.add("Internacional"))       #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/14_internacional.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4930-palmeiras"))          #set($foo = $teams_br_br_name.add("Palmeiras"))           #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/16_palmeiras.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/5014-pontepreta"))         #set($foo = $teams_br_br_name.add("Ponte Preta"))         #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/17_pontepreta.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/30630-santacruz"))         #set($foo = $teams_br_br_name.add("Santa Cruz"))          #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/44_santacruz.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4929-santos"))             #set($foo = $teams_br_br_name.add("Santos"))              #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/18_santos.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4925-saopaulo"))           #set($foo = $teams_br_br_name.add("São Paulo"))           #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/19_saopaulo.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/12409-sport"))             #set($foo = $teams_br_br_name.add("Sport"))               #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/20_sport.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/7607-vitoria"))            #set($foo = $teams_br_br_name.add("Vitória"))             #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/43_vitoria.png$CDNAppend"))
#set($foo = $teams_br_br_url.add("/br/team/4923-vasco"))              #set($foo = $teams_br_br_name.add("Vasco"))               #set($foo = $teams_br_br_shield.add("$CDNAssetsPath/images/shields/21_vasco.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5055-arsenal"))           #set($foo = $teams_br_int_name.add("Arsenal"))            #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/22_arsenal.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5057-chelsea"))           #set($foo = $teams_br_int_name.add("Chelsea"))            #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/23_chelsea.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5061-manchestercity"))    #set($foo = $teams_br_int_name.add("Manchester City"))    #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/24_manchestercity.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5062-manchesterunited"))  #set($foo = $teams_br_int_name.add("Manchester United"))  #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/25_manchesterunited.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5060-liverpool"))         #set($foo = $teams_br_int_name.add("Liverpool"))          #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/26_liverpool.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5071-tottenham"))         #set($foo = $teams_br_int_name.add("Tottenham"))          #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/27_totthenham.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29086-barcelona"))        #set($foo = $teams_br_int_name.add("Barcelona"))          #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/28_barcelona.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29087-realmadrid"))       #set($foo = $teams_br_int_name.add("Real Madrid"))        #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/29_realmadrid.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29088-atleticomadrid"))   #set($foo = $teams_br_int_name.add("Atlético de Madrid")) #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/30_atleticomadrid.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29089-valencia"))         #set($foo = $teams_br_int_name.add("Valencia"))           #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/31_valencia.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5042-inter"))             #set($foo = $teams_br_int_name.add("Inter"))              #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/32_inter.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5045-milan"))             #set($foo = $teams_br_int_name.add("Milan"))              #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/33_milan.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5043-juventus"))          #set($foo = $teams_br_int_name.add("Juventus"))           #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/34_juventus.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5044-lazio"))             #set($foo = $teams_br_int_name.add("Lazio"))              #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/35_lazio.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5050-roma"))              #set($foo = $teams_br_int_name.add("Roma"))               #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/36_roma.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29090-bayern"))           #set($foo = $teams_br_int_name.add("Bayern"))             #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/37_bayernmunich.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29091-borussiadortmund")) #set($foo = $teams_br_int_name.add("Borussia Dortmund"))  #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/38_borusiadortmund.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/29092-psg"))              #set($foo = $teams_br_int_name.add("PSG"))                #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/39_psg.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5020-bocajuniors"))       #set($foo = $teams_br_int_name.add("Boca Juniors"))       #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/40_bocajuniors.png$CDNAppend"))
#set($foo = $teams_br_int_url.add("/br/team/5029-riverplate"))        #set($foo = $teams_br_int_name.add("River Plate"))        #set($foo = $teams_br_int_shield.add("$CDNAssetsPath/images/shields/41_riverplate.png$CDNAppend"))
#end
#set($absoluteURL = "")
#macro (getCategoryFolder $org_categories)
noticias#end
#macro (getCategoryTitle $org_category)
Notícias#end
#macro (checkArticleUrl)
#if (!$article)
#set ($_urlFix = "/error?referral=$VelocityHelper.UrlEncode($URLParser.Url).Replace('?', '&')")
#else
#if ($article.title == "")
#set ($_urlFix = "/error?referral=$VelocityHelper.UrlEncode($URLParser.Url).Replace('?', '&')")
#else
#if($article.url_redirect)
#set ($_urlFix = "$article.url_redirect.get_Item('values').get_Item(0).url_redirect.InnerText")
#else
#if($article.type != "blogpost")
#set ($_currentUrl = "$URLParser.get_Item(0)/$URLParser.get_Item(1)")
#set ($_articleUrl = "news")
#else
#set ($_currentUrl = "$URLParser.get_Item(0)/$URLParser.get_Item(1)/$URLParser.get_Item(2)")
#set ($_articleUrl = "blogs/view")
#end
#set ($_articleUrl = "$_articleUrl/${article.guid}-$VelocityHelper.Normalize($article.title_seo.InnerText)")
#set ($_articleUrl = $_articleUrl.Replace(' ', '-').Replace('"', '').Replace('+', ''))
#if ($_articleUrl != $_currentUrl)
#set ($_urlFix = "/$_articleUrl")
#end
#end
#end
#end
#if ($_urlFix && !$Query.path)
<meta http-equiv="refresh" content="url=0; $_urlFix.Replace('"', "'")">
<script type="text/javascript">
document.write("<div style='display:none;'><\!--");location.href = "$_urlFix.Replace('"', "'")";
</script>#end
#end
#macro(doFourOhfour)
<script>
var goTofourOhFour = true;
</script>
#end
#macro (checkVideoUrl)
#if (!$videoTP)
#set ($_urlFix = "/error?referral=$VelocityHelper.UrlEncode($URLParser.Url).Replace('?', '&')")
#else
#if ($videoTP.title == "")
#set ($_urlFix = "/error?referral=$VelocityHelper.UrlEncode($URLParser.Url).Replace('?', '&')")
#else
#set ($_currentUrl = $URLParser.get_Item(1))
#set ($_mpxId = $videoTP.get_Item("pl:id").ToString().Replace("http://data.media.theplatform.com/media/data/Media/", ""))
#set ($_articleUrl = "${_mpxId}-$VelocityHelper.Normalize($videoTP.title)")
#set ($_articleUrl = $_articleUrl.Replace(' ', '-').Replace('"', '').Replace('+', ''))
#if ($_articleUrl != $_currentUrl)
#set ($_urlFix = "/videos/$_articleUrl")
#end
#end
#end
#if ($_urlFix && !$Query.path)
<meta http-equiv="refresh" content="url=0; $_urlFix.Replace('"', "'")">
<script type="text/javascript">
document.write("<div style='display:none;'><\!--");location.href = "$_urlFix.Replace('"', "'")";
</script>#end
#end
############## checkPictureUrl ###########
#macro(checkPictureUrl)
#if(!$gallery)
#set ($_urlFix = "/photos?referral=$VelocityHelper.UrlEncode($URLParser.Url).Replace('?', '&')")
#else
#set ($_currentUrl = $URLParser.get_Item(2))
#set ($galleryTitle = $galleryTitle.Replace('- ', ''))
#set ($_galleryUrl = "${picture_id}-$VelocityHelper.Normalize($galleryTitle)")
#set ($_galleryUrl = $_galleryUrl.Replace(' ', '-').Replace('"', '').Replace('+', ''))
#if ($_galleryUrl != $_currentUrl)
#set ($_urlFix = "/photos/$gallery.guid/$_galleryUrl")
#end
#end
#if ($_urlFix && !$Query.path)
<meta http-equiv="refresh" content="url=0; $_urlFix.Replace('"', "'")">
<script type="text/javascript">
document.write("<div style='display:none;'><\!--");location.href = "$_urlFix.Replace('"', "'")";
</script>#end
#end
########## getLiveCDNPath ###########
#macro(getLiveCDNPath)
#set($CDNPlayerPath = "live")
#set($CDNPlayerRoot = "cdn.foxsportsla.com")
#set($CDNPlayerGeneralVersion = "2.177.1")
#if($Query.get_Item("__debug__") && !$Query.get_Item("__debug__").StartsWith("__"))
##set($CDNPath = "dev/$Query.get_Item('__debug__')")
##set($CDNRoot = "origin.ficfiles.com/cdn-flac")
#set($CDNPlayerGeneralVersion = $ServerTimer.Format("yyyyMMddHHmm"))
#if($Query.gver && $Query.gver!="")
#set($CDNPlayerGeneralVersion = $Query.gver)
#end
#end
#end
#macro(getCDNPath)
## Usage
## $CDNAssetsPath/styles/vendor.css$CDNAppend
## Prepend       /    File name     Append version for cache
#set($CDNProtocol = 'http:')
#set($CDNEnv = $ct_env.environment)
#if ($Country == 'br')
#set($CDNRoot = "//cdn.foxsports.com.br/foxsports/$CDNEnv")
#else
#set($CDNRoot = "//cdn.foxsportsla.com/foxsports/$CDNEnv")
#end
#set($CDNVersion = $ServerTimer.Format('mm'))
#if ($cdnVersion)
#set($CDNVersion = $cdnVersion.get_Item(0).version)
#end
#set($CDNAssetsPath = "$CDNProtocol$CDNRoot")
#if ($is_local || $isLocalOmnix)
#set($CDNAssetsPath = "/assets")
#set($CDNVersion = "$ServerTimer.Format('mm')")
#end
#set($CDNAppend = "?=$CDNVersion")
#end
#macro(getAbsoluteURL)
## $rootURL is used for links inside same edition
## $rootWWWURL is used for global links. Should work with m. and www. since it will autoredirect
## $absoluteURL is URL of actual page
#set($productionURL = "http://www.foxsportsla.com")
#if($Country == 'mx')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.mx"))
#elseif($Country == 'ar')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.ar"))
#elseif($Country == 'bo')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.bo"))
#elseif($Country == 'br')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.br"))
#elseif($Country == 'cl')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.cl"))
#elseif($Country == 'co')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.co"))
#elseif($Country == 'ec')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.ec"))
#elseif($Country == 'gt')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.gt"))
#elseif($Country == 'pe')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.pe"))
#elseif($Country == 'py')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.py"))
#elseif($Country == 'sv')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.sv"))
#elseif($Country == 'uy')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.uy"))
#elseif($Country == 've')
#set($productionURL = $productionURL.Replace("foxsportsla.com", "foxsports.com.ve"))
#end
#set($CDNEnv = $ct_env.environment)
#if($CDNEnv == 'live' && !$isLocalOmnix)
## Production: the environment is set as live and is not local
#set($rootWWWURL = $productionURL)
#elseif($CDNEnv == 'beta' && !$isLocalOmnix)
## Beta online environment: the environment is set as beta and is not local
#set($rootWWWURL = "http://beta.foxsportsla.com")
#if($Country == 'ar')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.ar"))
#elseif($Country == 'mx')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.mx"))
#elseif($Country == 'bo')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.bo"))
#elseif($Country == 'br')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.br"))
#elseif($Country == 'cl')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.cl"))
#elseif($Country == 'co')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.co"))
#elseif($Country == 'ec')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.ec"))
#elseif($Country == 'gt')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.gt"))
#elseif($Country == 'pe')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.pe"))
#elseif($Country == 'py')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.py"))
#elseif($Country == 'sv')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.sv"))
#elseif($Country == 'uy')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.uy"))
#elseif($Country == 've')
#set($rootWWWURL = $rootWWWURL.Replace("beta.foxsportsla.com", "beta.foxsports.com.ve"))
#end
#elseif($isLocalOmnix)
## Local environment: the environment var is not set as live or beta and $isLocalOmnix is true
#set($rootWWWURL = "/$Country")
#end
#end
#getAbsoluteURL()
#macro(getCanonicalUrl)
#set ($canonicalUrl = false)
#if($articleCanonicalUrl)
#set ($canonicalUrl = $articleCanonicalUrl)
#elseif($videoCanonicalUrl)
#set ($canonicalUrl = $videoCanonicalUrl)
#elseif($galleryCanonicalUrl)
#set ($canonicalUrl = $galleryCanonicalUrl)
#elseif($playlistCanonicalUrl)
#set ($canonicalUrl = $playlistCanonicalUrl)
#end
#end
#macro(dataSourceUrl)
#if ($Country != 'br')
#calculateEditorialCountry()
#set($dataSourceUrl = "http://ds2.foxsportsla.com/$editorialCountry")
#else
#set($dataSourceUrl = "http://ds2.foxsports.com.br")
#end
#end
## Variable debug workaround.
#macro(titleBoldStyle $title)
## Set first word in bold, others in normal inside a <span>
#set($title = "$title") ## Small fix for emulador
#set($bold = true)
#set($_title = $title.Split($Converter.ToChar(" ")))
#foreach($part in $_title)
#if($velocityCount == 2)<span>#end$part&nbsp;#if($velocityCount == $_title.count)</span>#end
#end
#end
#macro(jsLog $var)
<script>
console.log($var);
</script>
#end
#macro (getBodyClass)
#set ($bodyClass = '')
#if ($Query.get_Item("origin") == "app")
#set($bodyClass = 'app-webview')
#end
#if ($URLParser.Count > 1)
## Adding a class to the body when it's an embed player
#set ($_index = $URLParser.Count - 2)
#if ($URLParser.get_Item($_index) == 'embed')
#set ($bodyClass = 'embed-player-page')
#end
#end
#end
#macro (generateSlug $_string)
#set($__slug = $VelocityHelper.Normalize($_string).Replace(' ', '-').Replace('"', '').Replace('+', '').Replace(';', '').Replace(':', ''))
#end
#set($isNumericArray = false)
#set($isNumber = false)
###################### isValidDateTime ######################
#macro(isValidDateTime $i_originalStringDate)
##2013-09-01 00:55:00-0000
#set($isValidDateTime = false)
#if ($i_originalStringDate.ToString().Length == 24)
#set($_maxYear = 2100)
#set($_minYear = 1800)
#set($_maxMonth = 12)
#set($_minMonth = 1)
#set($_maxDay = 31)
#set($_minDay = 1)
#set($_obj_DateTimeSplit = $i_originalStringDate.ToString().Split($Converter.ToChar(" ")))
#if($_obj_DateTimeSplit.Length == 2)
#set($_obj_DateParts = $_obj_DateTimeSplit.get_Item(0).Split($Converter.ToChar("-")))
#set($_obj_TimeParts = $_obj_DateTimeSplit.get_Item(1).Replace("+", "Z").Replace("-", "Z").Split($Converter.ToChar("Z")))
#if($_obj_TimeParts.Length == 2)
#set($_obj_TZPart = $_obj_TimeParts.get_Item(1))
#set($_obj_TimeParts = $_obj_TimeParts.get_Item(0).Split($Converter.ToChar(":")))
#if($_obj_DateParts.Length == 3)
#set($_year = $_obj_DateParts.get_Item(0))
#isNumber($_year)
#if($isNumber)
#set($_year = $Converter.ToInteger($_year))
#set($_month = $_obj_DateParts.get_Item(1))
#if($_minYear < $_year && $_year < $_maxYear)
#isNumber($_month)
#if($isNumber && $_month.Length == 2)
#set($_month = $Converter.ToInteger($_month))
#if($_minMonth <= $_month && $_month <= $_maxMonth)
#if($_month == 4 || $_month == 6 || $_month == 9 || $_month == 11)
#set($_maxDay = 30)
#elseif($_month == 2)
#if(($_year % 4 == 0 && $_year % 100 != 0) || ($_year % 400 == 0))
#set($_maxDay = 29)
#else
#set($_maxDay = 28)
#end
#end
#set($_day = $_obj_DateParts.get_Item(2))
#isNumber($_day)
#if($isNumber && $_day.Length == 2)
#set($_day = $Converter.ToInteger($_day))
#if($_minDay <= $_day && $_day <= $_maxDay)
#if($_obj_TimeParts.Length == 3)
#set($_hour = $_obj_TimeParts.get_Item(0))
#isNumber($_hour)
#if($isNumber && $_hour.Length == 2)
#set($_hour = $Converter.ToInteger($_hour))
#if(0 <= $_hour && $_hour <= 23)
#set($_minutes = $_obj_TimeParts.get_Item(1))
#isNumber($_minutes)
#if($isNumber && $_minutes.Length == 2)
#set($_minutes = $Converter.ToInteger($_minutes))
#if(0 <= $_minutes && $_minutes <= 59)
#set($_seconds = $_obj_TimeParts.get_Item(1))
#isNumber($_seconds)
#if($isNumber && $_seconds.Length == 2)
#set($_seconds = $Converter.ToInteger($_seconds))
#if(0 <= $_seconds && $_seconds <= 59)
#set($_obj_TZPart = $_obj_TZPart.TrimStart($Converter.ToChar("-")))
#isNumber($_obj_TZPart)
#if($isNumber && $_obj_TZPart.Length == 4)
#set($_obj_TZPart = $Converter.ToInteger($_obj_TZPart))
#if(0 <= $_obj_TZPart && $_obj_TZPart <= 1300)
#set($isValidDateTime = true)
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
#end
###################### isNumericArray ######################
#macro (isNumericArray $numArrayCheck)
#if($numArrayCheck && $numArrayCheck != "")
#set ($isNumericArray = true)
#set ($numArrayCheck = $numArrayCheck.ToString())
#foreach($numberOrSeparator in $numArrayCheck.ToCharArray())
#if (($numberOrSeparator < '0' || $numberOrSeparator > '9') && $numberOrSeparator != ',')
#set ($isNumericArray = false)
#break
#end
#end
#else
#set ($isNumericArray = false)
#end
#end
###################### isNumber ######################
#macro (isNumber $numCheck)
#if($numCheck && $numCheck != "")
#set ($isNumber = true)
#set ($numCheck = $numCheck.ToString())
#foreach($number in $numCheck.ToCharArray())
#if ($number < '0' || $number > '9')
#set ($isNumber = false)
#break
#end
#end
#else
#set ($isNumber = false)
#end
#end
#macro (getVideosByFeed $_videoFeed $_maxQuantity)
#set($videosByFeed = false)
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#set ($_serviceUrl = $_videoFeed)
#set($videosByFeed = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#macro (getVideosByKeywords $_videoKeywords $_maxQuantity)
## WARNING: order is by relevance !!!
#set($videosByKeywords = false)
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS?form=mrss&q=$_videoKeywords")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS?form=mrss&q=$_videoKeywords")
#end
#set($videosByKeywords = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#macro (getVideosByCompetition $_videoCompetition $_maxQuantity)
#set($videosByCompetition = false)
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS?form=mrss&byCustomValue={competition}{$_videoCompetition}")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS?form=mrss&byCustomValue={competition}{$_videoCompetition}")
#end
#set($videosByCompetition = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#macro (getVideosByShowName $_videoShowName $_maxQuantity)
#set($videosByShowName = false)
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS?form=mrss&byCategories=$_videoShowName")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS?form=mrss&byCategories=$_videoShowName")
#end
#set($videosByShowName = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#macro (getVideosByTeam $_videoTeam $_maxQuantity)
#set($videosByTeam = false)
#if ($_videoTeam && $_videoTeam != "")
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS?form=mrss&byCustomValue={team}{$_videoTeam}")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS?form=mrss&byCustomValue={team}{$_videoTeam}")
#end
#set($videosByTeam = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#end
#macro (getVideosByIds $_videoIds $_maxQuantity)
#set($videosByIds = false)
#isNumericArray($_videoIds)
#if($isNumericArray)
#set ($_quantity = $Converter.ToInteger($_maxQuantity))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS/$_videoIds?form=mrss")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS/$_videoIds?form=mrss")
#end
#set($videosByIds = $ct_rss.ReadRss($_serviceUrl, $_quantity, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#end
#macro (getVideoById $_videoId)
#set($video = false)
#isNumericArray($_videoId)
#if($isNumericArray)
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS/$_videoId?form=mrss")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS/$_videoId?form=mrss")
#end
#set($_videos = $ct_rss.ReadRss($_serviceUrl, 1, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#foreach($_video in $_videos)
#set($video = $_video)
#break
#end
#end
#getVideoVars($video)
#end
#macro (getLastVideos $rangeEnd $rangeStart)
#set ($lastVideos = false)
#set ($rangeStart = $Converter.ToInteger($rangeStart))
#if ($rangeStart > 1)
#set ($rangeStart = $rangeStart * $rangeEnd)
#end
#set ($rangeEnd = $rangeStart + $Converter.ToInteger($rangeEnd))
#if($Country == 'br')
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSBR_CLIPS?form=mrss&range=${rangeStart}-$rangeEnd")
#else
#set ($_serviceUrl = "http://feed.theplatform.com/f/flac/FSLAT_CLIPS?form=mrss&range=${rangeStart}-$rangeEnd")
#end
#set ($lastVideos = $ct_rss.ReadRss($_serviceUrl, $rangeEnd, $Converter.ToInteger($ct_cacheConfig.videos)).RssItems)
#end
#macro (getVideoVars $_video)
#set ($video = $_video)
#set ($videoId = false)
#set ($videoTitle = "")
#set ($videoType = "")
#set ($videoDescription = "")
#set ($videoCompetition = "")
#set ($videoShowName = "")
#set ($videoDuration = "")
#set ($videoPubDate = false)
#set ($videoImageMaxSize = "640x360")
#set ($videoImage640x360 = "")
#set ($videoImage140x80 = "")
#set ($videoImage1280x720 = "")
#set ($videoImage428x240 = "")
#set ($videoLink = "")
#set ($videoReleaseUrl = "#")
#set ($videoEmbedUrl = "")
#set ($videoCanonicalUrl = "")
#set ($videoShowName = false)
#set ($videoCompetitionCode = false)
#set ($videoProgressiveUrlMP4 = "")
#set ($videoProgressiveUrlHigh = "")
#set ($videoProgressiveUrlMid = "")
#set ($videoProgressiveUrlLow = "")
#if($_video)
#set ($videoId = $_video.get_Item("mf:titleid").InnerText)
#if(!$videoId)
#set ($ar_videoId = $_video.get_Item("pl:id").InnerText.Split($Converter.ToChar('/')))
#foreach($_partInurlId in $ar_videoId)
#set ($videoId = $_partInurlId)
#end
#end
#set ($videoTitle = $_video.title.InnerText)
#set ($videoType = $_video.get_Item("mf:type").InnerText)
#set ($videoDescription = $_video.description.InnerText)
#set ($videoCompetition = $_video.get_Item("mf:competition").InnerText)
#set ($videoShowName = $_video.get_Item("mf:showname").InnerText)
#set ($videoDuration = $_video.get_Item("mf:duration").InnerText)
#set ($videoPubDate = $Converter.ToDatetime($_video.pubDate.InnerText))
#foreach($_thumbItem in $_video.get_Item("media:thumbnail"))
#if ($Converter.ToInteger($_thumbItem.get_Item("height")) == 360)
#set($videoImage640x360 = $_thumbItem.get_Item("url"))
#elseif ($Converter.ToInteger($_thumbItem.get_Item("height")) == 80)
#set($videoImage140x80 = $_thumbItem.get_Item("url"))
#elseif ($Converter.ToInteger($_thumbItem.get_Item("height")) == 720)
#set($videoImage1280x720 = $_thumbItem.get_Item("url"))
#end
#end
## set images resizes
#getLiveCDNPath()
#if($videoImage1280x720 == "")
#set($videoImage1280x720 = $videoImage640x360)
#end
#if ($Country == 'br')
#set ($videoImage1280x720 = $videoImage1280x720.Replace("http://static-media.ficfiles.com/img/FLAC_SPORTS_BRA/", "http://$CDNPlayerRoot/sites/common/objects/img/sportsplayer-br/resized/1280x720/"))
#set ($videoImage640x360 = $videoImage640x360.Replace("http://static-media.ficfiles.com/img/FLAC_SPORTS_BRA/", "http://$CDNPlayerRoot/sites/common/objects/img/sportsplayer-br/resized/640x360/"))
#else
#set ($videoImage1280x720 = $videoImage1280x720.Replace("http://static-media.ficfiles.com/img/FLAC_SPORTS_LATAM/", "http://$CDNPlayerRoot/sites/common/objects/img/sportsplayer-la/resized/1280x720/"))
#set ($videoImage640x360 = $videoImage640x360.Replace("http://static-media.ficfiles.com/img/FLAC_SPORTS_LATAM/", "http://$CDNPlayerRoot/sites/common/objects/img/sportsplayer-la/resized/640x360/"))
#end
#set ($videoImage428x240 = $videoImage1280x720.Replace("/resized/1280x720/", "/resized/428x240/"))
#generateSlug($videoTitle)
#set ($videoLink = "/$Country/videos/${videoId}-${__slug}")
#set ($videoCanonicalUrl = "$productionURL/videos/${videoId}-${__slug}")
#set ($videoReleaseUrl = $_video.get_Item("pl:releaseUrl").InnerText)
#if($Country == 'br')
#set ($videoEmbedUrl = "http://www.foxplaybrasil.com.br/feeds/iframes/player.html?vid=${videoId}")
#else
#set ($videoEmbedUrl = "http://www.foxplay.com/feeds/iframes/player.html?vid=${videoId}")
#end
#set ($videoCompetitionCode = $_video.get_Item("mf:competition").InnerText)
#set ($videoShowName = $_video.get_Item("mf:showname").InnerText)
#set ($videoProgressiveUrlMP4 = $_video.get_Item("pl:progressiveUrlMP4").InnerText)
#set ($videoProgressiveUrlHigh = $_video.get_Item("pl:progressiveUrlHigh").InnerText)
#set ($videoProgressiveUrlMid = $_video.get_Item("pl:progressiveUrlMid").InnerText)
#set ($videoProgressiveUrlLow = $_video.get_Item("pl:progressiveUrlLow").InnerText)
#end
#end
#set($videoTP = false)
#set($videoCategories = false)
#set($videoCategory = '')
####################################
#macro(getreleaseurl $videoid)
#isNumericArray($videoid)
#if($isNumericArray)
#set($ct_rssItems = $ct_rss.ReadRss("http://feed.theplatform.com/f/flac/FSLAT_CLIPS/$videoid",  1, 60).RssItems)
#if ($ct_rssItems.Count.ToString().Equals("1"))
#set($video = $ct_rssItems.get_Item(0))
#getTPvideoVars($video)
#end
#end
#end
#####################################
### deprecate: USAR getVideoVars
#####################################
#macro (getTPvideoVars $videoTP)
#if($videoTP.get_Item("media:group"))
#set($tpReleaseUrl= $videoTP.get_Item("media:group").get_Item("media:content").get_Item(0).get_Item("url"))
#else
#set($tpReleaseUrl= $videoTP.get_Item("media:content").get_Item("url"))
#end
#set($videoid = $videoTP.get_Item("pl:id").ToString().Replace("http://data.media.theplatform.com/media/data/Media/", ""))
#if(!$videoid)
#set($videoid = $videoTP.get_Item("mf:titleid").ToString())
#set($serviceurl="http://feed.theplatform.com/f/flac/FSLAT_CLIPS/?byGuid=$videoid")
#set($_videos = $ct_rss.ReadRss($serviceurl, 1, 600).RssItems )
#if ($_videos.Count>0)
#set($_video = $_videos.get_Item(0))
#set ($videoid = $_video.get_Item("pl:id").ToString().Replace("http://data.media.theplatform.com/media/data/Media/", ""))
#end
#end
#if($videoTP.get_Item("media:group"))
#set($length= $videoTP.get_Item("media:group").get_Item("media:content").get_Item(0).get_Item("duration").ToString().Replace(".",""))
#else
#set($length= $videoTP.get_Item("media:content").get_Item("duration").ToString().Replace(".",""))
#end
#if(!$length)
#set($length = $videoTP.get_Item("mf:duration").ToString())
#end
##GetThumbnail-------------------
#foreach($thumbItem in $videoTP.get_Item("media:thumbnail"))
#if ($Converter.ToInteger($thumbItem.get_Item("height")) < 360)
#set($videothumbnail=$thumbItem.get_Item("url"))
#else
#set($videostill=$thumbItem.get_Item("url"))
#end
#end
##GetThumbnail-------------------
#set($videonameurl = $VelocityHelper.Normalize($videoTP.title).Replace(" ","-").Replace('"',''))
#set($videotitle = $videoTP.get_Item("title"))
#set($descriptionlong = $videoTP.description.InnerText)
#set($pubDate =$Converter.ToDatetime($videoTP.pubDate.ToString()).ToString("M/d/yyyy hh:mm:ss tt"))
#if ($videoTP.get_Item("flac:competition"))
#set ($tpcompetition = $videoTP.get_Item("flac:competition"))
#end
#if ($videoTP.get_Item("media:category"))
#set ($tpshow = $videoTP.get_Item("media:category"))
#if($tpshow.Count >= 2)
###set ($tpshow = $videoTP.get_Item("media:category").get_Item(0))
#end
#end
#end
#macro(printNewPlayer $videoid)
#if($videoid.Contains("http://"))
#set ($tpReleaseUrl = $videoid)
#else
#isNumericArray($videoid)
#if($isNumericArray)
#getreleaseurl($videoid)
#end
#end
#if($tpReleaseUrl)
#if(!$Query.invisible)
<!-- Start of Player -->
<script type="text/javascript" src="http://cdn-fod.ficfiles.com/player/tp/shared/1.0.5013/pdk/tpPdk.js"></script>
<script type="text/javascript" src="http://cdn-fod.ficfiles.com/player/tp/shared/1.0.5013/js/volumeUtil.js"></script>
<div id="player" class="player">
<script type="text/javascript">
var logLevel="debug";
var releaseUrl = "$tpReleaseUrl";
if(typeof(keywords)!="undefined")
{
if (keywords && keywords['foxsportsla_kwd'] != "")
{
releaseUrl += (releaseUrl.indexOf('?')>0?'&':'?') + 'foxsportsla_kwd='+keywords['foxsportsla_kwd'];
}
}
var player = new Player("player");
player.maincolor = "0x3399CC";
player.lang = "es";
player.logLevel="debug";
player.pluginAkamaiJS = "type=format|URL=http://cdn-fod.ficfiles.com/player/tp/shared/1.0.5013/pdk/js/plugins/akamaiHD.js|priority=5|hosts=-f.akamaihd.net";
player.plugin1="type=ad|url=http://cdn-fod.ficfiles.com/player/tp/shared/1.0.5013/pdk/js/plugins/vast.js|priority=1|hosts=ads.us.e-planning.net%2Feb%2F4%2Fbeeb%2Fplayer%2F%2Cads.us.e-planning.net%2Feb%2F4%2Fbeec%2Fplayer%2F%2Cads.us.e-planning.net%2Feb%2F4%2Fe24f%2F%2Cads.us.e-planning.net%2Feb%2F4%2Fc968%2F|mimeTypes=video%2Fmp4";
player.v = "http://cdn-fod.ficfiles.com/player/tp/config/1.0.5013/vars_foxsports_stream.txt";
player.releaseUrl = releaseUrl;
player.autoPlay = true;
player.bind();
</script>
</div>
<!-- End of Player -->
#end
#end
#end
#set($xmlContent = "")
#macro(getXmlContent $i_parent $i_filteredByTag $i_filteredByTagAttr)
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#set($_elemContentStarted = false)
#set($_elemTag = "")
#set($_elemTagAttr = "")
##[LOCAL]##
#set($xmlContent = "" )
#set($_elemContent = "" )
##[ENDLOCAL]##
##[PRODUCTION]##
###set($xmlContent = "")
###set($_elemContent = "")
##[ENDPRODUCTION]##
#set($_token = "")
#set($_break = false)
#foreach($_token in $i_parent.ToCharArray())
#if(!$_break)
#if($_elemContentStarted && !$_elemStarted && $_elemTag != "")
#if(($_elemTag == $i_filteredByTag || $i_filteredByTag == "") && ($_elemTagAttr == $i_filteredByTagAttr || $i_filteredByTagAttr == ""))
##[LOCAL]##
#set($_elemContent = "$_elemContent$_token" )
##[ENDLOCAL]##
##[PRODUCTION]##
###set($_elemContent = "$_elemContent$_token")
##[ENDPRODUCTION]##
#if($_elemContent.EndsWith("</$_elemTag>"))
#set($xmlContent = $_elemContent.Replace("</$_elemTag>", "").Trim())
## Strip CDATA if necessary
#if($xmlContent.StartsWith("<![CDATA[") && $xmlContent.EndsWith("]]>"))
#set($_xmlContentSize = $xmlContent.Length - 12)
#set($xmlContent = $xmlContent.SubString(9, $_xmlContentSize))
#end
#set($_break = true)
#end
#else
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#set($_elemContentStarted = false)
#set($_elemTag = "")
#set($_elemTagAttr = "")
##[LOCAL]##
#set($_elemContent = "" )
##[ENDLOCAL]##
##[PRODUCTION]##
###set($_elemContent = "")
##[ENDPRODUCTION]##
#end
#else
#if($_token == "<" && !$_elemStarted)
#set($_elemStarted = true)
#set($_elemTag = "")
#elseif(($_token == ">" || $_token == "!") && $_elemStarted)
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#if(($_elemTag == $i_filteredByTag || $i_filteredByTag == "") && ($_elemTagAttr == $i_filteredByTagAttr || $i_filteredByTagAttr == ""))
#set($_elemContentStarted = true)
#end
#set($_elemContent = "")
#elseif(($_token == " " || $_token == "?") && $_elemStarted && !$_elemAttrStarted)
#set($_elemAttrStarted = true)
#set($_elemTagAttr = "")
#elseif($_elemStarted && !$_elemAttrStarted)
#set($_elemTag = "$_elemTag$_token")
#elseif($_elemStarted && $_elemAttrStarted)
#set($_elemTagAttr = "$_elemTagAttr$_token")
#end
#end
#end
#end
#end
#macro(getXmlAttribute $_parent $_filteredByTag $_filteredByTagAttr)
#set($xmlAttribute = "")
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#set($_elemAttrValueStarted = false)
#set($_elemTag = "")
#set($_elemTagAttr = "")
#set($_elemTagValueAttr = "")
#foreach($_token in $_parent.ToCharArray())
#if ($_elemStarted && $_elemTag == $_filteredByTag && !$_elemAttrStarted && $_elemTagAttr == $_filteredByTagAttr)
#set($_valueLength = $Converter.ToInteger($_elemTagValueAttr.Length))
#if ($_valueLength > 1)
#if ($_elemTagValueAttr.StartsWith("'"))
#set ($_elemTagValueAttr = $_elemTagValueAttr.Trim($Converter.ToChar("'")))
#elseif ($_elemTagValueAttr.StartsWith('"'))
#set ($_elemTagValueAttr = $_elemTagValueAttr.Trim($Converter.ToChar('"')))
#end
#end
#set ($xmlAttribute = $_elemTagValueAttr)
#break
#else
#if($_token == "<" && !$_elemStarted)
#set($_elemStarted = true)
#set($_elemTag = "")
#elseif(($_token == ">" || $_token == "!") && $_elemStarted)
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#elseif(($_token == " " || $_token == "?") && $_elemStarted && !$_elemAttrStarted)
#set($_elemAttrStarted = true)
#set($_elemTagAttr = "")
#elseif($_elemStarted && !$_elemAttrStarted)
#set($_elemTag = "$_elemTag$_token")
#elseif($_elemStarted && $_elemAttrStarted && !$_elemAttrValueStarted)
#if ($_token == '=')
#set($_elemAttrValueStarted = true)
#set($_elemTagValueAttr = "")
#else
#set($_elemTagAttr = "$_elemTagAttr$_token")
#end
#elseif($_elemStarted && $_elemAttrStarted && $_elemAttrValueStarted)
#set($_elemTagValueAttr = "$_elemTagValueAttr$_token")
#set($_valueLength = $Converter.ToInteger($_elemTagValueAttr.Length))
#if ($_elemTagValueAttr.StartsWith("'") || $_elemTagValueAttr.StartsWith('"'))
#if ($_elemTagValueAttr.StartsWith("'") && $_valueLength > 1 && $_token == "'")
#set($_elemAttrValueStarted = false)
#set($_elemAttrStarted = false)
#elseif ($_elemTagValueAttr.StartsWith('"') && $_valueLength > 1 && $_token == '"')
#set($_elemAttrValueStarted = false)
#set($_elemAttrStarted = false)
#end
#elseif ($_token == ' ')
#set($_elemAttrValueStarted = false)
#set($_elemAttrStarted = false)
#end
#end
#end
#end
#end
#macro(getXmlElements $i_parent $i_filteredByTag $i_filteredByTagAttr)
#set($xmlElements = "")
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#set($_elemContentStarted = false)
#set($_elemTag = "")
#set($_elemTagAttr = "")
#set($xmlContent = "" )
#set($_elemContent = "" )
#set($_token = "")
#set($_break = false)
#foreach($_token in $i_parent.ToCharArray())
#if(!$_break)
#if($_elemContentStarted && !$_elemStarted && $_elemTag != "")
#if(($_elemTag == $i_filteredByTag || $i_filteredByTag == "") && ($_elemTagAttr == $i_filteredByTagAttr || $i_filteredByTagAttr == ""))
#set($_elemContent = "$_elemContent$_token" )
#if($_elemContent.EndsWith("</$_elemTag>"))
#set($xmlContent = $_elemContent.Replace("</$_elemTag>", "").Trim())
#end
#set($xmlElements = "${xmlElements}ÿ<$_elemTag $_elemTagAttr>$_elemContent/$_elemTag>")
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#set($_elemContentStarted = false)
#set($_elemTag = "")
#set($_elemTagAttr = "")
#set($_elemContent = "" )
#end
#end
#if($_token == "<" && !$_elemStarted)
#set($_elemStarted = true)
#set($_elemTag = "")
#elseif(($_token == ">" || $_token == "!") && $_elemStarted)
#set($_elemStarted = false)
#set($_elemAttrStarted = false)
#if($_elemTagAttr.EndsWith("/"))
#set($_elemTagAttr = $_elemTagAttr.TrimEnd($Converter.ToChar("/")).Trim())
#end
#if(($_elemTag == $i_filteredByTag || $i_filteredByTag == "") && ($_elemTagAttr == $i_filteredByTagAttr || $i_filteredByTagAttr == ""))
#set($_elemContentStarted = true)
#end
#set($_elemContent = "")
#elseif(($_token == " " || $_token == "?") && $_elemStarted && !$_elemAttrStarted)
#set($_elemAttrStarted = true)
#set($_elemTagAttr = "")
#elseif($_elemStarted && !$_elemAttrStarted)
#set($_elemTag = "$_elemTag$_token")
#elseif($_elemStarted && $_elemAttrStarted)
#set($_elemTagAttr = "$_elemTagAttr$_token")
#end
#end
#end
#set ($xmlElements = $xmlElements.Trim($Converter.ToChar("ÿ")).Split($Converter.ToChar("ÿ")))
#end
#macro (blockArticleAuthor $article)
#languageVars()
#getArticleVars($article)
#if($articleAuthorTitle && $articleType != "blogpost")
<div class="article-author">
$ds_lang_news_author_by <strong>$articleAuthorTitle</strong>
</div>
#end
#end
#macro (blockArticleBigImage $article)
#if(!$article.gallery && !$article.big_picture && !$article.video && !$article.embed)
#if($article.image.InnerText)
#set ($image_620x465 = $article.image.InnerText.ToString())
## Este if chequea que la imagen no sea del site viejo
## Todo: Test this
#if (!$image_620x465.Contains("/11/") && !$image_620x465.Contains("/12/"))
#set ($image_620x465_idx = $image_620x465.LastIndexOf("/"))
#set ($image_620x465 = "$image_620x465.SubString(0, $image_620x465_idx)/620x465${image_620x465.SubString($image_620x465_idx)}")
#end
<figure class="article-hero">
<img src="$image_620x465" alt="$!article.image_caption.get_Item("values").get_Item(0).caption.InnerText" title="$!article.image_caption.get_Item("values").get_Item(0).caption.InnerText" />
#if ($articleImageCaption)
<figcaption>$articleImageCaption</figcaption>
#end
</figure>
#end
#end
#end
#macro (blockArticleContent $article )
<!--Big Image-->
#if($article.big_picture.get_Item("values").Count == 1)
#set($_image = $article.big_picture.get_Item("values").get_Item(0))
<figure class="article-content">
<img style="" src="$!_image.image.InnerText" data-title="$!_image.title.InnerText" alt="$!_image.title.InnerText"/>
</figure>
#end
<!--Texto-->
<div class="article-content">
$!article.body.InnerText
</div>
#end
#macro(blockArticleEmbed $article)
## Random embeds (Admotion videos, Instagram, whatever)
#if(!$article.video && $article.embed)
#if($article.embed.get_Item("values").get_Item(0).embed_code.InnerText != "")
<figure class="article-embed" data-fallbackimage="$article.image.InnerText">
<center>
$!article.embed.get_Item("values").get_Item(0).embed_code.InnerText
</center>
</figure>
#end
#end
#end
#macro (blockArticleGalleries $article)
#if ($article.gallery)
#set($_gallery_id = $article.gallery.get_Item("values").get_Item(0).gallery_code.InnerText)
#getArticlesCountry()
#set ($_galleries = $ct_rss.ReadRss("http://services.ficfiles.com/v2/gallery/$articlesCountry/$_gallery_id/true", 1, 5).RssItems)
#if($_galleries.Count>0)
#set ($_gallery = $_galleries.get_Item(0))
#set ($_defaultImage = "")
#getGalleryVars($_gallery)
#foreach($_image in $_gallery.image)
#if($_image.get_Item('default') == "true")
#set($_defaultImage = $_image.InnerText)
#end
#end
<div class="galleries">
<div class="galleries-list">
#galleryItem($gallery)
</div>
</div>
#end
<!--BIG PICTURES GALLERY NOTAS IMPORTADAS -->
#elseif($article.big_picture)
#if($article.big_picture.get_Item("values").Count == 1)
## Intentionally Left Empty
#else
<section class="media">
<div class="photo-gallery">
<div id="image_wrap" style="height:349px!important;background:#252525;text-align:center;"><img src="$article.big_picture.get_Item("values").get_Item(0).image.InnerText" alt="$!article.big_picture.get_Item("values").get_Item(0).caption.InnerText" style="height:349px!important;"/></div>
<figcaption>$!article.big_picture.get_Item("values").get_Item(0).caption.InnerText</figcaption>
<a class="prev browse left"><img src="http://cdn-flac.ficfiles.com/sites/common/objects/img/pixel.gif" class="sprite" alt="" /></a>
<div class="scrollable">
<div class="items">
<!-- 1-6 -->
<div>
#foreach($image in $article.big_picture.get_Item("values"))
<img style="width:80px; height:60px;" src="$image.image.InnerText" data-full="$image.image.InnerText" data-title="$!image.title.InnerText" alt="$!image.title.InnerText"
#if(($velocityCount % 6) == 0)
class="last"
#end
/>
## Create a new slide
#if(($velocityCount % 6) == 0 && $velocityCount < $article.big_picture.get_Item("values").Count)
</div>
<div>
#end
#end
</div>
</div>
</div>
<a class="next browse right"><img src="http://cdn-flac.ficfiles.com/sites/common/objects/img/pixel.gif" class="sprite" alt="" /></a>
</div>
</section>
#end
#end
#end
#macro (blockArticleHeader $article)
#getArticleVars($article)
#set ($_article_date = $article.pubDate)
#if($articleType == "blogpost")
#set($headerClass = "blogs-author-post in-header")
#end
<header class="article-header $!headerClass">
<div class="article-top">
#if ("$articleCategory" != "False")
<div class="article-topic">
<span class="article-tag article-tag-box">$articleCategory</span>
</div>
#end
<div class="headers">
<h1>$articleTitle</h1>
<h2>$articleDescription</h2>
</div>
#if($articleType == "blogpost")
#getBlogById($articleAuthorId)
#set($blogBlog = $blogBlog.Replace("/columnistas/", "/blogs/"))
<div class="author">
<div class="author-photo" style="background-image: url($blogPicture)"></div>
<span>Por</span>
<a class="article-tag" href="$blogBlog">$articleAuthorTitle</a>
</div>
#end
</div>
</header>
#end
#macro (blockArticleLinks $article )
#languageVars()
#if($article.related_link)
#if($article.related_link.Count > 0)
<div class="article-links">
<strong>$ds_lang_news_other_links</strong>
<ul>
## Yep, the related_link object doesn't iterate properly. Fun!
#if($article.related_link.Count == 1)
<li><a class="article-link" href="$article.related_link.get_Item('values').get_Item(0).link_url.InnerText">$article.related_link.get_Item('values').get_Item(0).link_text.InnerText</a></li>
#else
#foreach($_link in $article.related_link)
<li><a class="article-link" href="$_link.get_Item('values').get_Item(0).link_url.InnerText">$_link.get_Item('values').get_Item(0).link_text.InnerText</a></li>
#end
#end
</ul>
</div>
#end
#end
#end
#macro ( blockArticleMeta $article )
<div class="article-metadata">
<div class="article-date">
#if($Country=='br')
<span class="format-date" data-date="$_article_date" data-format="D/MM/YYYY"></span>
<time class="format-date" data-date="$_article_date" data-format=" H\hmm"></time>
#else
<time class="format-date" data-date="$_article_date" data-format="H:mm \h\s"></time>
<span class="format-date" data-date="$_article_date" data-format=" - D MMMM YYYY"></span>
#end
#if($article.place && $article.place != "")
<span class="article-place">$article.place</span>
#end
</div>
#blockArticleAuthor( $article )
</div>
#end
#macro(blockArticleMostPopularMd $i_title $i_quantity $i_news_type $i_show_category)
#languageVars()
## NewsType: 1: Latest News, 2: Most Visited News, 3: Most Visited Posts
#if ($i_news_type == "1")
#getArticlesByLast("news" $i_quantity 1)
#set($articles = $articlesByLast)
#end
#if ($i_news_type == "2")
#getArticlesByViews("news" $i_quantity)
#set($articles = $articlesByViews)
#end
#if ($i_news_type == "3")
#getArticlesByViews("blogpost" $i_quantity)
#set($articles = $articlesByViews)
#end
<section class="block-container news-popular">
<h2 class="block-title">$i_title</h2>
#foreach ($_article in $articles)
#getArticleVars($_article)
<a href="${articleUrl}" class="article">
<div class="image">
<div class="article-image" style="background-image: url('$articleImage');"></div>
</div>
<div class="data">
#if($i_show_category)
<span class="article-category">$!articleCategory</span>
#end
<h3 class="article-title">$articleTitle</h3>
#articleShareData(true false false true "")
</div>
</a>
#end
</section>
#end
#macro(blockArticleMostPopularSm $i_title $i_quantity $i_news_type)
## NewsType: 1: Latest News, 2: Most Visited News, 3: Most Visited Posts, 4: Latest Posts
## TODO: Should not bring from same author
#set($i_quantity=$Converter.ToInteger($i_quantity))
#getArticlesCountry()
#if ($i_news_type == "1")
#getArticlesByLast("news" $_quantity 1)
#set($articles = $articlesByLast)
#end
#if ($i_news_type == "2")
#getArticlesByViews("news" $_quantity)
#set($articles = $articlesByViews)
#end
#if ($i_news_type == "3")
#getArticlesByViews("blogpost" $_quantity)
#set($articles = $articlesByViews)
#end
#if ($i_news_type == "4")
#getArticlesByLast("blogpost" $_quantity 1)
#set($articles = $articlesByLast)
#end
<section class="last-news-list">
<h3>$i_title</h3>
#foreach ($_article in $articles)
#if ($i_news_type == "3" || $i_news_type == "4")
#set ($_articleClass = "article-blog")
#else
#set ($_articleClass = "article-news")
#end
#set($_articleId = $_article.guid.InnerText)
#getArticleById($_articleId)
<a href="$articleUrl" class="article-item $_articleClass sm">
<div class="content">
#if ($i_news_type == "3" || $i_news_type == "4")
## Blog Posts
<div class="author-photo">
<img src="$articleAuthorPicture" alt="$articleAuthorTitle">
</div>
<div class="content-text">
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
<h2>$articleTitle</h2>
<div class="author-name">
por $articleAuthorTitle
</div>
</div>
#else
## News
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
#if($idArticle != "66414")
<span class="article-tag">$!articleCategory</span>
#else
<span class="article-tag">$ds_lang_schedule_title</span>
#end
<h2>$articleTitle</h2>
#end
</div>
</a>
#end
</section>
#end
#macro (blockArticlePoll $article)
#languageVars()
## TODO: Still needs to be tested in production and results from ajax is undefined
#set ($BarColor = "#369")
#if($article.poll_inline)
#set ($poll_inline_id = $article.poll_inline.get_Item("values").get_Item(0).poll_code.InnerText)
#end
#if ($poll_inline_id)
#set ($UrlQuestion = "http://services.ficfiles.com/v2/question/$poll_inline_id/es")
<!-- POLL_ID: $UrlQuestion -->
#set ($items = $ct_rss.ReadRss($UrlQuestion, 20,5).RssItems)
#if ($items.Count > 0)
#set ($question = $items.get_Item(0).questions)
#set ($options = $question.answer)
<div class="article-poll article-box" data-poll-id="$poll_inline_id">
<div class="article-box-wrapper">
<header>
<h3>$ds_lang_poll_title</h3>
</header>
<div class="article-box-content">
<h3>$question.title.InnerText</h3>
<ul class="poll-options">
#foreach ($option in $options)
<li>
<input type="radio" id="poll_${poll_inline_id}_${option.id}" name="poll_$poll_inline_id"/>
<label for="poll_${poll_inline_id}_${option.id}"><span></span>$option.InnerText</label>
</li>
#end
</ul>
</div>
<div class="article-box-content border-top">
<button class="btn btn-blue" id="pollVote">$ds_lang_poll_vote</button>
<button class="btn btn-blue" id="aShowResults">$ds_lang_poll_show_results</button>
<div class="btn btn-blue article-poll-success no-hover">$ds_lang_poll_thanks_voting</div>
</div>
#set ($UrlResults = "http://services.ficfiles.com/v2/poll/$poll_inline_id/es")
#set ($resultItems = $ct_rss.ReadRss($UrlResults, 20,5).RssItems)
#if ($question.Count > 0)
#set ($question = $resultItems.get_Item(0).questions)
<!-- Results : Start -->
<div class="article-box-content border-top article-poll-results" style="display: none">
#foreach ($answer in $question.answer)
<div class="poll-option-result">
<span class="option-title">$answer.text</span><span class="option-amount">${answer.percentage}%</span>
<div class="result-bar"><div style="background-color: $BarColor; width: ${answer.percentage}%;"></div></div>
</div>
#end
</div>
#end
</div>
</div>
#end
#end
#end
## Macro Deprecated
#macro (blockArticleRelated $article)
#languageVars()
#getArticlesCountry()
#if($article.related)
#set($_related_ids = $article.related.get_Item("values").get_Item(0).article_codes.InnerText)
#set ($relateds = $ct_rss.ReadRss("http://services.ficfiles.com/feeds/notes.asmx/get_notes_by_ids?countryCode=$articlesCountry&networkId=foxsports&noteIds=$_related_ids&list=true",  20, 30).RssItems)
#else
#if($article.categories.Count>0)
#if($article.categories.get_Item('category').Count == 0)
#set ($_article_category = $article.categories.get_Item('category').InnerText)
#else
#set ($_article_category = $article.categories.get_Item('category').get_Item(0).InnerText)
#end
#end
#if($_article_category)
##set ($relateds = $ct_rss.ReadRss("http://services.ficfiles.com/feeds/notes.asmx/get_notes?countryCode=$Country&networkId=foxsports&type=news&filterBy=category&filterText=$_article_category&orderBy=date&sortOrder=desc&pageSize=20&pageNumber=&list=true",  20, 1).RssItems)
#set ($relateds = $ct_rss.ReadRss("http://services.ficfiles.com/v2/notes/$articlesCountry/foxsports/news/date/desc/category/12/1?p=$_article_category",  12, 30).RssItems)
#if($relateds.Count <= 1)
#set ($_is_lastNews = true)
#end
#else
#set ($_is_lastNews = true)
#end
#end
<div class="related">
<header>
#if($_is_lastNews)
#set ($relateds = $ct_rss.ReadRss("http://services.ficfiles.com/feeds/notes.asmx/get_notes?countryCode=$articlesCountry&networkId=foxsports&type=news&filterBy=&filterText=&orderBy=date&sortOrder=desc&pageSize=20&pageNumber=&list=true",  20, 30).RssItems)
<h4>$ds_lang_news_last</h4>
#else
<h4>$ds_lang_news_also_read</h4>
#end
<nav>
<div class="navi"></div>
<a class="prev browse left"><img src="http://cdn-flac.ficfiles.com/sites/common/objects/img/pixel.gif" class="sprite" alt="" /></a>
<a class="next browse right"><img src="http://cdn-flac.ficfiles.com/sites/common/objects/img/pixel.gif" class="sprite" alt="" /></a>
</nav>
</header>
<div class="scrollable" id="browsable">
<div class="items">
<ul>
#set($_itemCount = 0)
#foreach($related in $relateds)
#if ($related.guid.InnerText != $article.guid.InnerText)
#set($_itemCount = $_itemCount + 1)
#set ($_li_class = "")
#if(($_itemCount % 4) == 0)
#set ($_li_class = "last")
#end
#if($related.image == "")
#set ($_li_class = "$_li_class no-img")
#end
<li class="$!_li_class">
#set ($article_category = $related.categories)
#set ($class = "")
#if($related.image != "")
#set ($art_image_140x105 = $related.image.ToString())
## Este if chequea que la imagen no sea del site viejo
#if (!$art_image_140x105.Contains("/11/") && !$art_image_140x105.Contains("/12/"))
#set ($art_image_140x105_idx = $art_image_140x105.LastIndexOf("/"))
#set ($art_image_140x105 = "${art_image_140x105.SubString(0, $art_image_140x105_idx)}/140x105${art_image_140x105.SubString($art_image_140x105_idx)}")
#else
#set ($class = "style='width:auto;margin-left:-23px;'")
#end
<a style="display:block;height:105px;width:140px;overflow:hidden;" href="/#getCategoryFolder($article_category)/${related.guid}-${VelocityHelper.Normalize($related.title_seo.InnerText).Replace(' ', '-').Replace('"', '')}"><b class="icon"></b><img class="lazy" data-original="" src="$art_image_140x105" alt="${related.title.InnerText}" $class/></a>
#end
#set ($_related_date = $related.date)
<span><strong>#fixArticleDay($_related_date)</strong> #fixArticleTime($_related_date)</span> <a href="/#getCategoryFolder($article_category)/${related.guid}-${VelocityHelper.Normalize($related.title_seo.InnerText).Replace(' ', '-').Replace('"', '')}">$related.title.InnerText</a>
#if($related.image == "")
<p>$related.description.InnerText</p>
#end
</li>
#if(($_itemCount % 4) == 0 && $_itemCount < $relateds.Count)
</ul>
<ul>
#end
#end
#end
</ul>
</div>
</div>
</div>
#end
#macro (blockGenericShare $i_shareUrl $i_shareText $i_shareBody $i_vertical $i_showCount )
#languageVars()
#set($i_shareUrl = $i_shareUrl.Replace('columnistas', 'blogs'))
#shareEntities($i_shareText)
#set($e_shareText = $shareTextEntities)
#shareEntities($i_shareBody)
#set($e_shareBody = $shareTextEntities)
#shareEntitiesUrl($i_shareText)
#set($url_shareText = $shareTextEntitiesUrl)
#shareEntitiesUrl($i_shareBody)
#set($url_shareBody = $shareTextEntitiesUrl)
<div class="article-share #if($i_vertical)display-vertical#end">
#if($i_showCount)
<div class="date-and-share-data article-share-data unread" data-shared-url="$i_shareUrl">
<span class="share-data share-data-fb hidden"></span> <i class="fa fa-share"></i> $ds_lang_share_label
</div>
#end
## <a class="facebook-share" href="https://www.facebook.com/sharer/sharer.php?u=$i_shareUrl" target="_blank"><i class="fa fa-facebook"></i></a>  ## old non javascript sharer
## <a class="twitter-share" href="https://twitter.com/intent/tweet?url=${i_shareUrl}&text=${i_shareText}" target="_blank"><i class="fa fa-twitter"></i></a>
<a class="facebook-share" href="javascript:fbShare('$i_shareUrl', '${e_shareText}', '${e_shareText}', '', 640, 480)"><i class="fa fa-facebook"></i></a>
<a class="twitter-share" href="javascript:twShare('${e_shareText} - $i_shareUrl', 640, 480)"><i class="fa fa-twitter"></i></a>
<a class="whatsapp-share" href="whatsapp://send?text=${url_shareText}%20${i_shareUrl}" data-action="share/whatsapp/share" target="_blank"><i class="fa fa-whatsapp"></i></a><a class="email-share" href="mailto:?subject=${url_shareText}&body=${url_shareText} ${i_shareUrl}"><i class="fa fa-envelope"></i></a>
</div>
#end
#macro (blockArticleShare $article $i_vertical )
#getArticleVars($article)
#set ($_shareText = false)
#set ($_shareText = $article.twitter_text.get_Item("values").get_Item(0).twitter_text.InnerText)
#if (!$_shareText)
#set($_shareText = $articleTitle)
#end
#blockGenericShare($articleCanonicalUrl $_shareText $articleTitle $i_vertical true)
#end
#macro (articleShareData $_showDate $_showFbShare $_showFbComments $_showViews)
<div class="date-and-share-data article-share-data#if($_showFbShare || $_showFbComments) unread#end" #if($_showFbShare || $_showFbComments) data-shared-url="${articleCanonicalUrl}" #end>
#if ($_showDate)
## Since v3, the date format slightly changed, so we now need to force the input format.
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow"></span>
#end
#if ($_showFbShare)
<span class="share-data share-data-fb hidden"></span>
#end
#if ($_showFbComments)
<span class="share-data share-data-comments hidden"></span> ## Removed by request
#end
#if ($_showViews && $articleVisits)
<span class="share-data share-data-views">
<span class="view-counter hidden">
<span class="icon icon_eye"></span>
<span class="counter" data-view-counter="$articleVisits">$articleVisits</span>
</span>
</span>
#end
</div>
#end
#macro (shareEntities $text)
## Prepare url to pass it as parameter to js. JS currently applies the encodeURIComponent for sanity.
## #set($text = "Testing ' \" ‘ ’ “ ” % * characters") ## For testing the characters that may break the share button
#set($shareTextEntities = $text.Replace("'", "\'").Replace('"', "&quot;"))
#end
#macro (shareEntitiesUrl $text)
## Url encoding to ensure url sanity. Spaces are normalized to +; extra replace is needed do keep the spaces.
#set($shareTextEntitiesUrl = $VelocityHelper.UrlEncode($text.Replace(" ", "__brsp__")).Replace("__brsp__", "%20"))
#end
#macro (blockArticleTags $article )
#getArticleVars($article)
#languageVars()
<div class="article-tags">
<strong>$ds_lang_news_tags</strong>
<div class="article-tags-container">
#if($articleTags.get_Item("tag").Count>0)
#foreach($tag in $articleTags.get_Item("tag"))
<a href="/$Country/tags/$articleType/#if($Country == 'br')$tag.InnerText#else$tag.InnerText.Replace(' ', '-')#end">$tag.InnerText</a>
#end
#else
<a href="/$Country/tags/$articleType/#if($Country == 'br')$articleTags.InnerText#else$articleTags.InnerText.Replace(' ', '-')#end">$articleTags.InnerText</a>
#end
</div>
</div>
#end
#macro (blockArticleTwitterBox $article)
<!--Twitter Box-->
#if($article.tweet)
#if($article.tweet.get_Item("values").get_Item(0).tweet_id.InnerText != "")
#foreach($tweets_count in $article.tweet.get_Item("values"))
#if ($tweets_count.tweet_id.InnerText != "")
#set($_tweetId = $tweets_count.tweet_id.InnerText)
<div class="tweet-embed" id="tweet-embed-${_tweetId}" data-tweet="${_tweetId}"></div>
#end
#end
#end
<script>window.twttr = (function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0],
t = window.twttr || {};
if (d.getElementById(id)) return t;
js = d.createElement(s);
js.id = id;
js.async = true
js.src = "https://platform.twitter.com/widgets.js";
fjs.parentNode.insertBefore(js, fjs);
t._e = [];
t.ready = function(f) {
t._e.push(f);
};
return t;
}(document, "script", "twitter-wjs"));</script>
#end
#end
#macro (blockArticleTwitterTimeline $article )
#if($article.twitter_timeline)
#set($tw_tag = $article.twitter_timeline.get_Item('values').get_Item(0).tm_hash.InnerText)
#if($tw_tag != "")
<!--
<script type="text/javascript" src="//cdn-flac.ficfiles.com/sites/common/objects/js/jstwittertimeline.js"></script>
<link href="//cdn-flac.ficfiles.com/sites/common/objects/css/jstwittertimeline.css" rel="stylesheet" type="text/css" />
<link href="//cdn.foxsportsla.com/sites/foxsports-la/objects/css/twitter_hashtag.css?ver=0" rel="stylesheet" type="text/css" />
-->
## Todo: Implement this with a random hashtag
## <div class="article-embed">
##   <a class="twitter-timeline" href="https://twitter.com/hashtag/$tw_tag.Replace('#','')" data-widget-id="616405531574583296" data-tweet-limit="5">$tw_tag</a>
##   <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
## </div>
#end
#end
#end
#macro(blockArticleVideo $article)
#if(!$Query.invisible)
#if($article.video)
#set($articleVideoIds=$article.video.get_Item('values').get_Item(0).video.InnerText)
#set($videoIds = $articleVideoIds.Split($Converter.ToChar(',')))
#set($videoId = $videoIds.get_Item(0))
## #getreleaseurl($videoId)
<figure class="article-video">
<div class="article-video-embed">
#printPlayer($videoId false)
#blockVideoEmbedGenerator($videoId)
</div>
#if ($videoIds.Count > 1)
#set($_quantity = $videoIds.Count)
#getVideosByIds($articleVideoIds $_quantity)
## NEW IMPLEMENTATION
#if ($videosByIds.Count > 0)
<div class="article-video-gallery">
#foreach($_video in $videosByIds)
#getVideoVars($_video)
<div class="article-video-gallery-thumb"
data-id="${videoId}"
data-title="$VelocityHelper.HTMLEncode($!{_parentTitle}).Replace('"', '&quot;')"
poster="${videoImage640x360}"
data-poster="${videoImage640x360}"
data-quality-low="$!{videoProgressiveUrlLow}"
data-quality-mid="$!{videoProgressiveUrlMid}"
data-quality-high="$!{videoProgressiveUrlHigh}"
>
<img class="article-video-gallery-thumb-image" src="$videoImage140x80" alt="$videoTitle" title="$videoTitle - $videoDescription"/>
<span class="icon icon-round icon-lg icon_play"></span>
</div>
#end
</div>
#end
#end
#if ($videoType == 'clips')
#blockVideoEmbedGenerator()
#end
</figure>
#end
#end
#end
#macro (fbComments $article)
#set($_skipComments = false)
#languageVars()
#getAbsoluteURL()
#if($article && $article.hide_comments)
#foreach($_hide in $article.hide_comments.Values)
#if($_hide.get_Item(0).hide_comment.InnerText == "Hide")
#set($_skipComments = true)
#end
#end
#end
#getCanonicalUrl()
#if(!$_skipComments && $canonicalUrl)
<section class="comments-holder">
<strong>$ds_lang_news_leave_comments</strong>
<!-- Comments de Facebook -->
#if($Country == 'br')
#set($fbSDKlang = "pt_BR")
#else
#set($fbSDKlang = "es_LA")
#end
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/$fbSDKlang/sdk.js#xfbml=1&version=v2.4&appId=282998821807245";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="comments-embed">
<fb:comments data-width="100%" data-numposts="4" href="$canonicalUrl" class="fb_iframe_widget"></fb:comments>
</div>
</section>
#end
#end
#macro (blockArticleHighlightLg $_article $i_live $i_foxPlayLinkText $_additionalClass $hasOverride)
#languageVars()
#if($_article)
#set($isSuperHighlight = $_additionalClass == "super-highlight")
#set($_showDate = !$isSuperHighlight)
#set($_showShares = !$isSuperHighlight)
#if(!$hasOverride)
#getArticleVars($_article)
#end
## Uncomment the next 2 lines to test the MAM Highlight
## #set($articleMatchVendor = "stats")
## #set($articleMatchCode = "2016040511007")
#if ($articleRedirectUrl == "")
<div class="article-lg-wrapper #if($displayingHighlights && $articleMatchVendor != "" && $articleMatchCode != "")mam-highlight#end $_additionalClass">
<div class="article-item article-lg">
## #getArticleMatchVars($article.match)
#if($articleMatchid)
#getCompetitionByStatisticsCode($articleMatchCompetition)
#if($competitionCategory)
#set ($_sport = $VelocityHelper.HtmlDecode($competitionCategory).Replace(' > ','>').Split($Converter.ToChar(">")).get_Item(1))
#set ($sport = $VelocityHelper.Normalize($_sport).Replace(' ','-').ToString())
##<a href='${articleUrl}' target='_self' style="cursor:pointer;overflow-x:hidden;position:absolute;left:0;bottom:0;width:640px;height:70px;z-index:6;"></a>
##<iframe id="iframe_mam_hl" name="iframe_mam_hl" src="http://statistics.ficfiles.com#if($articleMatchVendor == "datafactory")/foxsports-la#end/parser/${sport}/match-hl01.html?competition=$articleMatchCompetition&matchid=$articleMatchid&logo=$articleMatchLogo" width="640" scrolling="no" height="70" style="overflow-x:hidden;position:absolute;left:0;bottom:0;opacity:0.8;filter:alpha(opacity=80);background: black;" frameborder="0" align="top" ></iframe>
#end
#end
#if($article.gallery.innerText && !$article.video.innerText)<span class="icon icon-round icon-lg icon_gallery icon-center"></span>#end
<div class="content">
#if($idArticle != "66414")
<span class="article-tag article-tag-box">$!articleCategory</span>
#else
<span class="article-tag article-tag-box">$ds_lang_schedule_title</span>
#end
<h2>$articleTitle</h2>
#articleShareData($_showDate true false false "")
#getArticleVideoVars($article.video)
#if($articleVideoIds)<b class="icon play hl"></b>#end
## #if($i_live == 'live')<span class="live-event">EN VIVO</span>#end
</div>
## <!--
## #if($article.show.innerText == "7232")
##   <img class="central_fox_logo hl_show_logo" style="$class_cf" src="http://cdn.foxsportsla.com/sites/foxsports-la/objects/img/centralfox-hl01-logo.png" alt="Central FOX" />
## #end
## #if($article.show.innerText == "8688")
##   <img class="central_fox_logo hl_show_logo" style="$class_cf" src="http://cdn.foxsportsla.com/sites/foxsports-la/files/img/logos/foxparatodos_highlit_logo.png" alt="FOX para todos" />
## #end
## #if($article.show.innerText == "7234")
##   <img class="central_fox_logo hl_show_logo" style="$class_cf" src="http://cdn.foxsportsla.com/sites/foxsports-la/objects/img/90minfutbol.png?ver=2" alt="90 minutos de fútbol" />
## #end
## #if($article.show.innerText == "7369" || $article.show.innerText == "9000"  || $article.show.innerText == "9468" || $article.show.innerText == "10242" )
##   <img class="central_fox_logo hl_show_logo" style="$class_cf" src="http://cdn.foxsportsla.com/sites/foxsports-la/objects/img/fsradiologo.png" alt="FOX Sports Radio" />
## #end
## -->
#set($i_foxPlayLinkText = '')
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/{width}x{height}/"))
<a href="${articleUrl}">
<div class="article-bg-shadow"></div>
</a>
<div class="article-bg lazyload" data-bgset="$articleImage" data-ratio="container" data-sizes="auto" data-parent-fit="cover"></div>
#if ($displayingHighlights && $articleMatchVendor != "" && $articleMatchCode != "")
## #showMAMHighlight($articleMatchVendor $articleMatchCode)
#end
</div>
#set ($liveMatch = $articleMatchCompetition != "" && $articleMatchCode != "")
#if ($liveMatch)
#showMAMHighlight($articleMatchVendor $articleMatchCompetition $articleMatchCode $articleMatchLogo $articleMatchFoxPlay $articleMatchCast $articleUrl)
#end
#if($articleMatchFoxPlayId)
#getLiveEventById ($articleMatchFoxPlayId)
#if($liveEventById)
<div class="foxplay-box">
<a href="http://www.foxplay.com/${eventUrl}" target="_blank" class="more foxplay-box-btn">
<span>#if($i_foxPlayLinkText != '' && $i_foxPlayLinkText) $i_foxPlayLinkText #else $ds_lang_news_watch_live_match #end</span>
<img src="http://cdn-flac.ficfiles.com/sites/common/objects/img/pixel.gif" class="sprite" alt=""/>
</a>
</div>
#end
#end
</div>
#end
#end
#end
#macro (blockArticleHighlightMd $_article $i_live $i_foxPlayLinkText $i_share)
#languageVars()
#if($_article)
#getArticleVars($_article)
#if ($articleRedirectUrl == "")
<div class="article-item article-md">
<a href="${articleUrl}">
<figure>
#set($articleImage = $articleImage.Replace("/files/img/", "/files/img/scaled/230x/"))
<img class="article-img lazyload" src="$articleImage" alt=""/>
</figure>
<div class="content">
#if($idArticle != "66414")
<span class="article-tag">$!articleCategory</span>
#else
<span class="article-tag">$ds_lang_schedule_title</span>
#end
<h2>$articleTitle</h2>
<div class="date-and-share-data#if($i_share) article-share-data unread#end" data-shared-url="$articleCanonicalUrl" data-shared-article-id="$articleId">
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
<span class="share-data share-data-fb hidden"></span>
##<span class="share-data share-data-comments hidden"></span>
</div>
</div>
</a>
</div>
#end
#end
#end
#macro (blockArticleWithAuthorMd $_article)
#languageVars()
## This is intended only for blog posts
#if($_article)
#getArticleVars($_article)
#if ($articleRedirectUrl == "")
#set ($_articleClass = "")
#if ($articleType == "blogpost")
#set ($_articleClass = "article-blog")
#end
<a href="$articleUrl" class="article-item ${_articleClass} sm">
<div class="content">
#if ($articleType == "blogpost")
## Blog Posts
#getBlogById($articleAuthorId)
#set($blogPicture = $blogPicture.Replace("/img/authors/", "/img/authors/scaled/60x/"))
<div class="author-photo lazyload" style="background-image: url($blogPicture)"></div>
<div class="content-text">
#if ("$articleAuthorTitle" != "False")
<div class="author-name">
$articleAuthorTitle
</div>
#end
<h2>$articleTitle</h2>
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
</div>
#else
## News
#if($articleId != "66414")
<span class="article-tag">$!articleCategory</span>
#else
<span class="article-tag">$ds_lang_schedule_title</span>
#end
<h2>$articleTitle</h2>
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
#end
</div>
</a>
#end
#end
#end
#macro(blockFeaturedAuthors)
#languageVars()
<h2 class="column-title">#titleBoldStyle($ds_lang_blog_featured_authors)</h2>
<div class="secondary-option">
<div class="container">
<a class="see-all" href="/$Country/blogs/authors">
$ds_lang_see_more_m
<i class="fa fa-angle-right"></i>
</a>
</div>
</div>
#getBlogAuthors()
<div class="featured-authors">
#set($authorsCount = 1)
#foreach($_author in $blogAuthors)
#getBlogVars ($_author)
#if($blogBlog.StartsWith("/columnistas/") || $blogBlog.StartsWith("/blogs/"))
#set($blogBlog = $blogBlog.Replace("/columnistas/", "/blogs/"))
#if( $authorsCount <= 8 )
#set($authorsCount = $authorsCount+1)
<a href="/$Country$blogBlog" class="author-box">
<span class="author-item">
<div class="author-item-photo" style="background-image: url($blogPicture);"></div>
<span class="author-name">$blogName</span>
</span>
</a>
#end
#end
#end
</div>
#end
#macro(blockBlogLatestPosts $article)
#languageVars()
#getArticleVars($article)
#getArticlesCountry()
#getArticlesByBlog($articleAuthorId 10)
#set ($_relateds = $blogArticles)
<section class="last-blog-list">
<h3>$ds_lang_blog_more_from $article.AuthorInfo.title</h3>
#foreach ($_article in $_relateds)
#getArticleVars($_article)
<a href="${articleUrl}" class="article-item">
<div class="content">
<span class="time format-date" data-date="$articlePubDate" data-format="fromNow">&nbsp;</span>
#if($idArticle != "66414")
<span class="article-tag">$!articleCategory</span>
#else
<span class="article-tag">$ds_lang_schedule_title</span>
#end
<h2>$articleTitle</h2>
</div>
</a>
#end
</section>
#end
#macro( blockBlogMasthead $i_article )
<header class="blog-masthead" style="background-image:url($i_article.AuthorInfo.Background.InnerText);">
<h1>$i_article.AuthorInfo.title.InnerText</h1>
#if ($i_article.AuthorInfo.Blogname.InnerText != "")
<h3>$i_article.AuthorInfo.Blogname.InnerText</h3>
#end
</header>
#end
#macro (blockBreakingNews)
#languageVars()
## Get Breaking News DataSource
#dataSourceUrl()
#set($_xmlUrl = "$dataSourceUrl/ds_breakingNews.xml?t_=$ServerTimer.Format('mm')")
#set($_editionXml = $IncludePageHelper.GetPage("30", $_xmlUrl))
#getXmlAttribute($_editionXml 'item' 'id')
#set($breakingNewsId = $xmlAttribute)
#getXmlAttribute($_editionXml 'item' 'enabled')
#set($hasBreakingNews = $xmlAttribute)
#set($hasBreakingNews = $VelocityHelper.Normalize($hasBreakingNews).Replace('"', ''))
#getXmlAttribute($_editionXml 'item' 'title')
#set($breakingNewsTitle = "$ds_lang_breakingNews_title $xmlAttribute")
#getXmlAttribute($_editionXml 'item' 'link')
#set($breakingNewsLink = $xmlAttribute)
#set($breakingNewsLink = $breakingNewsLink.Replace('$Country', $Country))
## DEMO content for testing other states
##set($breakingNewsId = "32")
##set($hasBreakingNews = "yes")
##set($breakingNewsTitle = "$ds_lang_breakingNews_title Muller habló del tiro de Chicharito que casi le rompe la cara")
##set($breakingNewsLink = "")
#if ($hasBreakingNews == "yes")
<section class="breaking-news-wrapper space-for-breaking-news-sign is-hidden">
<div class="home-breaking-news-sign" data-breaking-news-id="$breakingNewsId">
<div class="container">
<div class="marquee">
<h1>
#if ($breakingNewsLink && $breakingNewsLink != "")
<a href="$breakingNewsLink">
$breakingNewsTitle
</a>
#else
$breakingNewsTitle
#end
</h1>
</div>
<a class="x-close-breaking-news" href="#"></a>
</div>
</div>
</section>
#end
#end
#macro(competitionTitle)
#languageVars()
#getCDNPath()
#macro(listParallaxMenu $_hidden)
#set($countOptionsInNav = 0)
#set($linkHref = "#")
#if($urlIsMatch || $urlIsExtra)
#set($linkHref = "/$Country/competition${competitionUrl}")
#end
<ul class="menu-nav-bar#if($_hidden) hidden#end">
#if(!$urlIsExtra && !$urlIsMatch)
#set($classActiveFirst = ' class="active"')
#end
#if($competitionWidget1URL && $competitionWidget1URL != "")
#if ($competitionWidget1Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-1"$classActiveFirst>$competitionWidget1Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if($competitionShowNews == "si")
<li><a href="$linkHref" data-anchor="competition-news"$classActiveFirst>$ds_lang_competitions_news</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#if($competitionWidget2URL && $competitionWidget2URL != "")
#if ($competitionWidget2Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-2"$classActiveFirst>$competitionWidget2Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if($competitionWidget3URL && $competitionWidget3URL != "")
#if ($competitionWidget3Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-3"$classActiveFirst>$competitionWidget3Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if ($competitionVideoCategory != "")
<li><a href="$linkHref" data-anchor="competition-videos"$classActiveFirst>$ds_lang_competitions_videos</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#if($competitionWidget4URL && $competitionWidget4URL != "")
#if ($competitionWidget4Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-4">$competitionWidget4Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if($competitionWidget5URL && $competitionWidget5URL != "")
#if ($competitionWidget5Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-5"$classActiveFirst>$competitionWidget5Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if($competitionWidget6URL && $competitionWidget6URL != "")
#if ($competitionWidget6Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-6"$classActiveFirst>$competitionWidget6Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if($competitionWidget7URL && $competitionWidget7URL != "")
#if ($competitionWidget7Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-7"$classActiveFirst>$competitionWidget7Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
## seventh option
#set($thereAreMoreThanSix = false)
#if($competitionWidget8URL && $competitionWidget8URL != "" && $competitionWidget8Name != "")
#set($thereAreMoreThanSix = true)
#end
#if($competitionWidget9URL && $competitionWidget9URL != "" && $competitionWidget9Name != "")
#set($thereAreMoreThanSix = true)
#end
#if($competitionIframeUrl != "")
#set($thereAreMoreThanSix = true)
#end
#set($subMenuNavVar = false)
#if ((!$_hidden) && ($countOptionsInNav == 6) && ($thereAreMoreThanSix))
#set($subMenuNavVar = true)
<li>
<a href="#" id="showMorePalaxNav">Más <i class="fa fa-angle-down" aria-hidden="true"></i></a>
<ul class="hiddenMoreOptions hidden">
#end
#if($competitionWidget8URL && $competitionWidget8URL != "")
#if ($competitionWidget8Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-8"$classActiveFirst>$competitionWidget8Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if ((!$_hidden) && ($countOptionsInNav == 6) && ($thereAreMoreThanSix))
#set($subMenuNavVar = true)
<li>
<a href="#" id="showMorePalaxNav">Más <i class="fa fa-angle-down" aria-hidden="true"></i></a>
<ul class="hiddenMoreOptions hidden">
#end
#if($competitionWidget9URL && $competitionWidget9URL != "")
#if ($competitionWidget9Name != "")
<li><a href="$linkHref" data-anchor="competition-widget-9"$classActiveFirst>$competitionWidget9Name</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#end
#if ((!$_hidden) && ($countOptionsInNav == 6) && ($thereAreMoreThanSix))
#set($subMenuNavVar = true)
<li>
<a href="#" id="showMorePalaxNav">Más <i class="fa fa-angle-down" aria-hidden="true"></i></a>
<ul class="hiddenMoreOptions hidden">
#end
#if($competitionIframeUrl != "")
#if((!$competitionIframeTitle) || ($competitionIframeTitle == ""))
#set($competitionIframeTitle = "Extra")
#end
#if($urlIsExtra)
#set($classActiveFirst = ' class="active"')
#end
<li><a href="/$Country/competition${competitionUrl}/extra"$classActiveFirst>$competitionIframeTitle</a></li>
#set($classActiveFirst = '')
#set($countOptionsInNav = $countOptionsInNav + 1)
#end
#if ($subMenuNavVar)
</ul>
</li>
#end
</ul>
#end
#set($containerBg = "$CDNAssetsPath/images/competition_bg.jpg")
#if ($competitionBackground && $competitionBackground != "")
#set($containerBg = $competitionBackground.Replace("files/img/", "files/img/scaled/{width}x/"))
#end
<div class="parallax-header active-parallax onlyfromtablet lazyload"#if(($containerBg) && ($containerBg != '')) data-bgset="$containerBg"#end data-size="auto">
<div class="container">
#if ($competitionShield && $competitionShield != "")
#set($competitionShield = $competitionShield.Replace("files/img/", "files/img/scaled/x100/"))
<img src="$competitionShield" alt="$competitionTitle"/>
#end
<h1>#titleBoldStyle($competitionTitle)</h1>
</div>
</div>
<div id="prlx-hdr-mobile-alt">
<a href="#" class="prlx-alt-menu-title">
#titleBoldStyle($competitionTitle)
<i class="fa fa-angle-down"></i>
</a>
#listParallaxMenu(true)
</div>
<div class="floating-nav-bar">
<div class="container">
<div class="floating-nav-options">
<div class="competition-logo">
#titleBoldStyle($competitionTitle)
</div>
#listParallaxMenu(false)
</div>
<div class="competition-nav-share">
#set($shareLink = $competitionCanonicalUrl)
#if($urlIsMatch || $urlIsExtra)
#getAbsoluteURL()
#set($shareLink = "${rootWWWURL}/$URLParser.Url")
#end
#blockGenericShare($shareLink "" "" False True)
</div>
</div>
</div>
#end
#macro(competitionFeaturedNews)
#getArticlesByCompetition($competitionCategory 3)
#if($articlesByCompetition.Count > 1)
<section>
<div class="container competition-news">
<h3 class="column-title">$ds_lang_competitions_news <small>$competitionTitle</small></h3>
<div class="main-col">
#set($range = [0, 1, 2])
#set($articleSize = 'lg')
#foreach($r in $range)
#if($articlesByCompetition.Count > $r)
#set($article = $articlesByCompetition.get_Item($r))
#homeDesktopArticleBlock($article $articleSize true "")
#set($articleSize = 'md')
#end
#end
</div>
<div class="secondary-col onlydesktop">
#printAd ("300x600home")
<!--div class="banner-cont">
</div-->
</div>
<div class="onlymobile">
#printAd ("300x250")
</div>
</div>
</section>
#end
#end
#macro(competitionMoreNews)
#getArticlesByCompetition($competitionCategory 15)
#if($articlesByCompetition.Count >= 15)
<section class="competitions-other-news">
<div class="container">
<h3 class="column-title">#titleBoldStyle($ds_lang_competitions_more_news)</h3>
<div>
#set($range = [3..13])
#foreach($r in $range)
#if($articlesByCompetition.Count > $r)
#set($article = $articlesByCompetition.get_Item($r))
#homeDesktopArticleBlock($article 'md' false "")
#end
#end
<div class="article-block article-block-md">
#printAd("300x250")
<!--div style="width: 100%; height: 250px;background: #19355e;"></div-->
</div>
</div>
</div>
</section>
#end
#end
#macro(competitionRelated)
#set($ar_related_competitions = $competitionRelCompetitions.Split($Converter.ToChar(',')))
#set ($isThereAnyRelatedComp = false)
#foreach ($relCompId in $ar_related_competitions)
#getCompetitionById($relCompId.Trim())
#if ($competitionTitle != "")
#set ($isThereAnyRelatedComp = true)
#end
#end
#if ($isThereAnyRelatedComp)
<section>
<div class="container">
<h3 class="column-title">Ligas <small>relacionadas</small></h3>
<div>
#foreach ($relCompId in $ar_related_competitions)
#getCompetitionById($relCompId.Trim())
#if ($competitionTitle != "")
<a href="/$Country/competition$competitionUrl" class="competitions-related-league">
<div class="competitions-related-league-logo">
#if($competitionShield)
#set($competitionShield = $competitionShield.Replace("files/img/", "files/img/scaled/x100/"))
<img src="$competitionShield" alt="$competitionTitle"/>
#end
</div>
<div class="competitions-related-league-text">
##<div class="related-league-date">
##12 de agosto - 15 de octubre
##</div>
<div class="related-league-title">
$competitionTitle
</div>
</div>
</a>
#end
#end
</div>
</div>
</section>
#end
#end
#macro(competitionWidgetCustomIframe $title $url)
<section>
<div class="container">
#if($title && $title != "")
<h3 class="column-title">#titleBoldStyle($title)</h3>
#end
<div class="competitions-cont-iframe">
#if($competitionIframeHeight != "")
#set($iframeHeight = "${competitionIframeHeight}")
#set($ifHeight = "height='$iframeHeight'")
#end
#if($iframeUrlParameter && $iframeUrlParameter != '')
#set($url = "${url}${iframeUrlParameter}")
#end
<iframe src="$url" class="competitions-table-iframe iframe-content" $!ifHeight frameborder="0" scrolling="no"></iframe>
</div>
</div>
</section>
#end
#macro(competitionWidgetPositions)
<section>
<div class="container">
<h3 class="column-title">Tabla <small>de posiciones</small></h3>
<div class="competitions-cont-iframe">
<iframe src="http://widgets.foxplay.com/football/foxplay/competition_stats/get_competitions_positions?competition-id=$competitionWidgetId&lang=ES" class="competitions-table-iframe iframe-content" frameborder="0" scrolling="no" style="display: none;" onload="this.style.display = 'block';"></iframe>
</div>
</div>
</section>
#end
#macro (epgLive)
#languageVars()
#set($selectedDay = $ct_cal.CurrentDay())
#set($networkId = "foxsports" )
#getSchedule($networkId $selectedDay 0)
#set ($_showTitle = false)
#foreach ($_scheduleItem in $schedule)
#getScheduleVars($_scheduleItem)
#if($scheduleOnNow == "True")
#getShowByProdId($scheduleProdId)
#if(!$showByProdId && $scheduleProdName != '')
#getShowByTitle($scheduleProdName)
#end
#if($showId)
#set ($_showTitle = $showTitle)
#else
#getShowFPByProdId($scheduleProdId)
#if(!$showFPByProdId && $scheduleProdName != '')
#getShowFPByTitle($scheduleProdName)
#end
#if($showFPId)
#set ($_showTitle = $showFPTitle)
#else
#getSynopsis ($networkId $scheduleProdId $scheduleEpisodeId)
#if($synopsisName && $synopsisName != '')
#set ($_showTitle = $synopsisName)
#end
#end
#end
#if ($_showTitle)
#if($scheduleProdName.Contains($_showTitle) && $scheduleProdName.Length > $_showTitle.Length)
#set ($_showTitle = $scheduleProdName)
#end
#else
#set ($_showTitle = $scheduleProdName)
#end
#set($_showImage = false)
#if ($showImage)
#set($_showImage = $showImage)
#end
#if ($showHeader)
#set($_showImage = $showHeader)
#end
#if($_showTitle != '' && $_showImage && $_showImage != '')
<article class="egp-module">
<div class="egp-module-top">
<div class="egp-module-title">$ds_lang_schedule_title  <span class="egp-module-date format-date" data-format="D MMM" data-date="$selectedDay" data-input-format="YYYY-MM-DD"></span></div>
</div>
<div class="schedule-channels">
<a class="channel-btn foxsports-1 #if($networkId=='foxsports')is-active#end" href="/$Country/tv/schedule/foxsports/today" ><span class="channel-logo"></span><span class="screenreader">FOX Sports</span></a>
<a class="channel-btn foxsports-2 #if($networkId=='foxsports2')is-active#end" href="/$Country/tv/schedule/foxsports2/today" ><span class="channel-logo"></span><span class="screenreader">FOX Sports 2</span></a>
#if ($Country != 'br')
<a class="channel-btn foxsports-3 #if($networkId=='foxsports3')is-active#end" href="/$Country/tv/schedule/foxsports3/today" ><span class="channel-logo"></span><span class="screenreader">FOX Sports 3</span></a>
#end
<a class="channel-btn foxplay-channel #if($networkId=='foxplay')is-active#end" href="/$Country/tv/schedule/foxplay/today" ><span class="channel-logo"></span><span class="screenreader">FOX Play</span></a>
<!--<a class="channel-btn foxsports-hd #if($network=='foxsportshd')is-active#end" href="/$Country/tv/schedule/foxplay/$selectedDay" >FOX Play</a>-->
</div>
<div class="egp-module-live">
<div class="content">
<em>
<span class="time format-date" data-format="HH:mm" data-date="$scheduleStart" data-input-format="HH:mm:ss"></span>
<span class="time format-date" data-format=" / HH:mm" data-date="$scheduleEnd" data-input-format="HH:mm:ss"></span>
</em>
<h3>$_showTitle</h3>
</div>
<div class="egp-module-bg-shadow"></div>
<div class="egp-module-bg" style="background-image: url($_showImage)"></div>
</div>
<div class="cta-holder">
<a href="/$Country/tv/schedule/foxsports/today" class="btn-cta">
$ds_lang_epg_show_more
</a>
</div>
</article>
#end
#end
#end
#end
#macro( foxPlayLive )
#getCDNPath()
#languageVars()
#set($selectedDay = $ServerTimer.FixedDate.Today)
## In case of emulator, set a date to bring some Demo Data
#if($ct_env.environment == "emulator")
#set($selectedDay = $ct_cal.CurrentDay())
#end
#getLiveEventsByDate($selectedDay 100)
#set ($schedule = $liveEventsByDate)
#set ($_maxItems = 4)
#if($schedule && $schedule.Count >= $_maxItems)
<section class="home-fox-play fox-play-live #if(!$showCTA)no-cta#end $currentSection.get_item(0)">
<div class="container">
<h2 class="column-title">#titleBoldStyle($ds_lang_foxplay_live)</h2>
#set($FoxPlayLink = "http://www.foxplay.com/$Country/sports/calendar/")
#if($Country == "br")
#set($FoxPlayLink = "http://www.foxplaybrasil.com.br/sports/calendar//")
#end
<div class="secondary-option">
<div class="container">
<a href="$FoxPlayLink">$ds_lang_foxplay_show_more <i class="fa fa-angle-right"></i></a>
</div>
</div>
<div class="fp-list">
#set ($_showsPrinted = 0)
#foreach ($_scheduleItem in $schedule)
#getLiveEventVars($_scheduleItem)
#set ($_showStartDate = $eventStartDate.ToString('MM/dd/yyy'))
#set ($_showStartTime = $eventStartDate.ToString('HH:mm'))
## Only show live or future Events
#if ($eventEndDate >= $eventEndDate.UtcNow)
#set($_showsPrinted = $_showsPrinted + 1)
#if ("$eventCategory" == "")
#set($eventCategory = "Show")
#end
<a class="fp-block" href="$eventUrl" target="_blank">
<div class="fp-block-image-container" style="background-image:url('$eventImage640x360')">
#if($eventIsLive)
<span class="fp-block-live">$ds_lang_epg_live</span>
#end
</div>
<div class="fp-block-info">
<span class="fp-block-foxplay"></span>
<span class="fp-block-type" title="$eventCategory">$eventCategory</span>
<h3 class="fp-block-title" title="$eventTitle">$eventTitle</h3>
#if(!$eventIsLive)
<span class="fp-block-date format-date" data-format="calendar" data-date="$_showStartDate $_showStartTime -0000" data-input-format="MM/DD/YYYY hh:mm ZZ"></span>
#end
</div>
</a>
## Stop on fourth
#if ($_showsPrinted >= $_maxItems)
#break
#end
#end
#end
</div>
</div>
<div class="load-more-button-row">
<a href="$FoxPlayLink" class="load-more-button">$ds_lang_foxplay_show_more</a>
</div>
</section>
#end
#end
#macro (galleryItem $_gallery)
#getGalleryVars($_gallery)
#getAbsoluteURL()
<div class="gallery">
<a class="gallery-grid" href="$galleryUrl">
<div class="photo-item">
<div class="photo" style="background-image: url('$galleryDefaultImage')">
<div class="photo-overlay">
<span class="photo-overlay-icon icon icon-round icon-md icon_gallery"></span>
</div>
</div>
</div>
#set($countImages = 0)
#foreach($_image in $galleryImages)
#if ($_image.InnerText != $galleryDefaultImage)
#set($countImages = $countImages + 1) ## discarded $velocityCount because it should be inside the if
<div class="photo-item">
<div class="photo" style="background-image: url(${galleryImagePath}resized/500x500/$_image.InnerText)">
#set ($remaining = $galleryImages.Count - $velocityCount)
#if ($remaining > 0)
<div class="photo-overlay">
<div class="photos-more">+$remaining</div>
</div>
#end
</div>
</div>
#end
#if ($countImages > 5)
#break
#end
#end
</a>
<div class="gallery-info">
<h2 class="gallery-title">$galleryTitle</h2>
<div class="gallery-share">
#blockGenericShare($galleryCanonicalUrl $galleryTitle $galleryTitle False False)
</div>
</div>
</div>
#end
#macro( galleryGrid $galleryImages)
#getAbsoluteURL()
<div class="gallery-photos">
#foreach ($photo in $galleryImages)
#set ($photoIndex = $velocityCount - 1)
<div class="photo-container" data-id="$velocityCount">
<a class="photo-link" href="/$Country/photos/$galleryId/${photoIndex}-${gallerySlug}">
<img src="$galleryPath$photo.Innertext" alt="$galleryTitle"/>
</a>
#set($photoCanonicalUrl = "$rootWWWURL/fotos/$galleryId/${photoIndex}-${gallerySlug}")
#blockGenericShare($photoCanonicalUrl $galleryTitle $galleryDescription False False)
</div>
#end
</div>
#end
#macro (blockGalleryHeader $gallery)
#getGalleryVars($gallery)
<header class="article-header">
<div class="article-topic">
<span class="article-tag article-tag-box">
#if($galleryCategory) $!galleryCategory #else $!galleryMainTag #end
</span>
</div>
<div class="article-metadata">
<div class="article-date">
#if($Country=='br')
<strong class="format-date" data-date="$galleryPubDate" data-format="D/M/YYYY"></strong>
<time class="format-date" data-date="$galleryPubDate" data-format=" H\hmm"></time>
#else
<time class="format-date" data-date="$galleryPubDate" data-format="H:mm\h"></time>
<strong class="format-date" data-date="$galleryPubDate" data-format=" - D MMMM, YYYY"></strong>
#end
</div>
<div class="article-place">
&nbsp;
</div>
</div>
<h1>$galleryTitle</h1>
<h2>$galleryDescription</h2>
</header>
#end
#macro( galleryInfo )
<div class="gallery-info">
#if ($galleryCategory != "") <span class="gallery-category">$galleryCategory</span> #end
<div class="gallery-date">
#if ($Country=='br')
<span class="format-date" data-date="$galleryPubDate" data-format="D/MM/YYYY"></span>
<time class="format-date" data-date="$galleryPubDate" data-format=" H\hmm"></time>
#else
<time class="format-date" data-date="$galleryPubDate" data-format="H:mm\h"></time>
<strong class="format-date" data-date="$galleryPubDate" data-format=" - D MMMM, YYYY"></strong>
#end
</div>
<h1 class="gallery-title">$galleryTitle</h1>
<p class="gallery-description">$galleryDescription</p>
#blockGenericShare($galleryCanonicalUrl $galleryTitle $galleryDescription False False)
#printAd( "300x250" )
</div>
#end
#macro (galleryRow $_type $_tag $_title)
#languageVars()
#if($_type == 'bylast')
#getGalleriesByLast(4 1)
#set($galleriesInRow = $galleriesByLast)
#end
#if($_type == 'bytag')
#getGalleriesByTag($_tag 4 1)
#set($galleriesInRow = $galleriesByTag)
#end
#set($areThereAnyGal = false)
#foreach ($_gallery in $galleriesInRow)
#set($areThereAnyGal = true)
#end
#if($areThereAnyGal)
<section class="galleries-others" id="gallery">
<div class="container">
<h2 class="galleries-others-title">$!_title</h2>
<div class="gallery-list">
#foreach ($_gallery in $galleriesInRow)
#getGalleryVars($_gallery)
<div class="gallery-item">
<a class="gallery-photos" href="$galleryUrl">
<figure class="gallery-photo">
<div class="photo-overlay">
<span class="photo-overlay-icon icon icon-round icon-md icon_gallery"></span>
</div>
<div class="photo-background" style="background-image: url('$galleryDefaultImage')"></div>
</figure>
#set($galcounter = 0)
#foreach($_image in $galleryImages)
#if ($_image.InnerText != $galleryDefaultImage)
#set($galcounter = $galcounter + 1)
<figure class="gallery-photo g$galcounter">
<img src="${galleryImagePath}resized/220x165/$_image.InnerText" alt="$galleryTitle" />
#set ($remaining = $galleryImages.Count - $velocityCount)
#if ($remaining > 0)
<div class="photo-overlay">
<div class="photos-more">+$remaining</div>
</div>
#end
</figure>
#end
#if ($galcounter >= 3)
#break
#end
#end
</a>
<div class="gallery-info">
<a class="gallery-photos" href="$galleryUrl">
<h3 class="gallery-title">$galleryTitle</h3>
</a>
#set($articleCanonicalUrl = $galleryCanonicalUrl)
#set($articlePubDate = $galleryPubDate)
#articleShareData(true true false false "")
</div>
</div>
#end
</div>
</div>
</section>
#end
#end
#macro(gallerySlider)
#getAbsoluteURL()
#set ($_photoIndex = $Converter.ToInteger($_photoIndex))
<div class="gallery-slider">
#foreach ($photo in $galleryImages)
#if ($_photoIndex == $velocityCount - 1)
<div class="photo-container" data-id="$velocityCount">
<h1 class="photo-title">$galleryTitle</h1>
#if ($galleryDescription) <p class="photo-description">$galleryDescription</p> #end
<div class="photo-index">
<span class="index">$velocityCount</span>
<span class="total">/$galleryImages.Count</span>
</div>
<div class="photo-slide">
<img class="photo" src="$galleryPath$photo.Innertext" alt="$galleryTitle"/>
#set ($prevIndex = $_photoIndex - 1)
#set ($nextIndex = $_photoIndex + 1)
#if ($prevIndex >= 0)
<a class="photo-prev" href="/$Country/photos/$galleryId/${prevIndex}-$gallerySlug">
<span class="icon icon_arrow_left"></span>
</a>
#end
#if ($nextIndex <= $galleryImages.Count - 1)
<a class="photo-next" href="/$Country/photos/$galleryId/${nextIndex}-$gallerySlug">
<span class="icon icon_arrow_right"></span>
</a>
#end
</div>
<div class="photo-info">
#if ($galleryEpigraph) <h2 class="photo-title">$galleryEpigraph</h2> #end
<div class="photo-share">
#set($photoCanonicalUrl = "$rootWWWURL/fotos/$galleryId/${_photoIndex}-${gallerySlug}")
#blockGenericShare($photoCanonicalUrl $galleryTitle $galleryTitle False False)
</div>
</div>
</div>
#end
#end
#fbComments($gallery)
</div>
#end
#macro( galleryTags $_galleryTags)
#languageVars()
#if ($_galleryTags.Count)    
<section class="gallery-tags">
<h2 class="gallery-tags-title">$ds_lang_gallery_tags_title</h2>
<p class="gallery-tags-list">
#foreach($tag in $_galleryTags)
<a class="tag" href="/$Country/photos/tag/$VelocityHelper.Normalize($tag.InnerText).Replace(' ', '-')">$tag.InnerText</a>
#end
</p>
</section>
#end
#end
#macro(instantAd)
<figure class="op-ad">
<iframe height="250" style="border:0;margin:0;padding:0;" width="300">
<script type="text/javascript">
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement(“script”);
gads.async = true;
gads.type = “text / javascript”;
var useSSL = “https: ” == document.location.protocol;
gads.src = (useSSL ? “https : ”: “http: ”) + “ //www.googletagservices.com/tag/js/gpt.js”;
var node = document.getElementsByTagName(“script”)[0];
node.parentNode.insertBefore(gads, node);
})();
</script>
<script type="text/javascript">
googletag.cmd.push(function() {
googletag.defineSlot("/62955556/foxsports-web/instantArticle/300x100", [
[300, 250]
], "div-gpt-ad-1").addService(googletag.pubads()).setTargeting(“abc”, “xyz”).setTargeting(“123”, “456”);
googletag.pubads().collapseEmptyDivs();
googletag.enableServices();
});
</script>
<div id="div-gpt-ad-1">
<script type="text/javascript">
googletag.cmd.push(function() {
googletag.display("div-gpt-ad-1");
});
</script>
</div>
</iframe>
</figure>
#end
#macro(instantAnalytics)
<figure class="op-tracker">
<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PJ2PHH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</figure>
#end
#macro (instantBigImage $article)
#if(!$article.gallery && !$article.big_picture && !$article.video && !$article.embed)
#if($article.image.InnerText)
#set ($image_620x465 = $article.image.InnerText.ToString())
## Este if chequea que la imagen no sea del site viejo
## Todo: Test this
#if (!$image_620x465.Contains("/11/") && !$image_620x465.Contains("/12/"))
#set ($image_620x465_idx = $image_620x465.LastIndexOf("/"))
#set ($image_620x465 = "$image_620x465.SubString(0, $image_620x465_idx)/620x465${image_620x465.SubString($image_620x465_idx)}")
#end
<figure>
<img src="$image_620x465" alt="$articleImageCaption" />
#if ($articleImageCaption)
<figcaption>$articleImageCaption</figcaption>
#end
</figure>
#end
#end
#end
#macro (instantBody $article)
<body>
<article>
#instantHeader($article)
## Article Body
#set ($articleBody = $article.body.InnerText)
#set ($embedStart = "<blockquote ")
#set ($embedEnd = "</blockquote>")
## We check whether the article has embeds in its body or not.
## If so, we wrap them into their appropiate containers.
## In this case, these are figure.op-interactive > iframe > blockquote.
#if ($articleBody.indexOf($embedStart) > -1)
#set ($articleBody = $articleBody.Replace($embedStart, "<figure class='op-interactive'><iframe><blockquote "))
#set ($embedInstagram = '<script async="" defer="defer" src="//platform.instagram.com/en_US/embeds.js"></script>')
#set ($embedInstagram = $embedInstagram.Trim($Converter.ToChar("/")))
#set ($embedTwitter = '<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>')
#set ($embedTwitter = $embedTwitter.Trim($Converter.ToChar("/")))
#if ($articleBody.indexOf($embedInstagram) > -1)
#set ($articleBody = $articleBody.Replace($embedInstagram, ""))
#set ($articleBody = $articleBody.Replace($embedEnd, '<script async="" defer="defer" src="//platform.instagram.com/en_US/embeds.js"></script></blockquote></figure>'))
#elseif ($articleBody.indexOf($embedTwitter) > -1)
#set ($articleBody = $articleBody.Replace($embedTwitter, ""))
#set ($articleBody = $articleBody.Replace($embedEnd, '<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></blockquote></figure>'))
#end
#set ($articleBody = $articleBody.Replace("<span></span>", ""))
#set ($articleBody = $articleBody.Replace("<p></p>", ""))
#end
## Embeds that are kept apart from the body XML (innerText) are also shown
#if($article.embed.get_Item("values").get_Item(0).embed_code.InnerText != "")
<figure class="op-interactive">
<iframe>
$!article.embed.get_Item("values").get_Item(0).embed_code.InnerText
</iframe>
</figure>
#end
$articleBody
#instantAd()
<footer>
#instantRelated($article)
</footer>
#instantAnalytics()
</article>
</body>
#end
#macro (instantGalleries $article)
#if ($article.gallery)
#set($_gallery_id = $article.gallery.get_Item("values").get_Item(0).gallery_code.InnerText)
#getArticlesCountry()
#set ($_galleries = $ct_rss.ReadRss("http://services.ficfiles.com/v2/gallery/$articlesCountry/$_gallery_id/true", 1, 5).RssItems)
#if($_galleries.Count > 0)
#set ($_gallery = $_galleries.get_Item(0))
#set ($_defaultImage = "")
#getGalleryVars($_gallery)
<figure class="op-slideshow">
#foreach($_image in $_gallery.image)
<figure>
<img src="${galleryImagePath}$_image.InnerText" />
</figure>
#end
</figure>
#end
#end
#end
#macro (instantHead $article)
<head>
<meta charset="utf-8">
<link rel="canonical" href="$productionURL">
<meta property="op:markup_version" content="v1.0">
</head>
#end
#macro (instantHeader $article)
<header>
<!-- The cover image shown inside your article -->
#instantBigImage($article)
#instantVideo($article)
#instantGalleries($article)
<h1>$articleTitle</h1>
<h2>$articleDescription</h2>
#if($articleType == "blogpost")
#getBlogById($articleAuthorId)
#set($blogBlog = $blogBlog.Replace("/columnistas/", "/blogs/"))
<address>
<a rel="$blogBlog" href="$blogBlog">$articleAuthorTitle</a>
</address>
#elseif($articleAuthorTitle && $articleType != "blogpost")
<address>$articleAuthorTitle</address>
#end
<!-- The published and last modified time stamps -->
#set($date = $Converter.ToDatetime($articleDate))
#set($str_date = $date.ToString('yyyy-MM-ddTHH:mm:ssZ'))
<time class="op-published" dateTime="$str_date"></time>
</header>
#end
#macro (instantItem $article)
## #getArticleById($idArticle)
## #getArticleVarsV3($article)
## $articleId
<item>
#instantMeta($article)
<content:encoded>
<![CDATA[
<!doctype html>
<html lang="en" prefix="op: http://media.facebook.com/op#">
#instantHead($article)
#instantBody($article)
</html>
]]>
</content:encoded>
</item>
#end
#macro (instantMeta $article)
<title>$articleTitle</title>
<link>$articleUrl</link>
<guid>$articleId</guid>
<pubDate>$articlePubDate</pubDate>
#if($articleAuthorTitle && $articleType != "blogpost")
<author>$articleAuthorTitle</author>
#end
<description>$articleDescription</description>
#end
#macro (instantRelated $article)
#getArticleRelated($pageArticle)
#if ($relatedArticles.Count < 3)
#getArticlesByLast('news' 8 1)
#set ($relatedArticles = $articlesByLast)
#end
#set($_itemCount = 0)
<ul class="op-related-articles">
#foreach($related in $relatedArticles)
#getArticleVars($related)
## Don't show article page article
#if ($articleId != $_mainArticelId)
#set($_itemCount = $_itemCount + 1)
#set($url = $articleUrl)
<li><a href="$!{url}"></a></li>
#end
## Stop on fourth article
#if ($_itemCount > 2)
#break
#end
#end
</ul>
#end
#macro (instantTwitter $article)
<figure class="op-social">
<iframe>
<!-- Include Twitter embed code here -->
</iframe>
</figure>
#end
#macro(instantVideo $article)
#if($article.video)
#set($articleVideoIds=$article.video.get_Item('values').get_Item(0).video.InnerText)
#set($videoIds = $articleVideoIds.Split($Converter.ToChar(',')))
#set($videoId = $videoIds.get_Item(0))
## #getreleaseurl($videoId)
#getVideoById($videoId)
#if($videoProgressiveUrlHigh)
#set($videoProgressiveUrlMP4 = $videoProgressiveUrlMP4.Replace("_300000.mp4", "_1000000.mp4"))
<figure>
<img src="$videoImage140x80">
<video>
<source src="https:$!videoProgressiveUrlMP4" type="video/mp4">
</video>
</figure>
#end
#end
#end
#macro(showMAMTicker)
<section class="mam loader-inline loader-small">
<div class="mam-container"></div>
</section>
#end
## For testing MAM uncomment _editionXml var in __article.vm in function getHighlightArticles
#macro(showMAMHighlight $_matchVendor $_matchCompetition $_matchCode $_matchLogo $_matchFoxPlay $_matchCast $_articleUrl)
## Demo of expected markup
## <div
##   class="mam-highlight-container loader-inline loader-small mam-block"
##   data-template="#mam-highlight"
##   data-vendor="datafactory"
##   data-competition="copaamerica"
##   data-code="260287"
##   data-logo="bandera"
##   data-foxplayurl="http://bing.com"
##   data-matchcasturl="http://google.com"
##   data-logo-type="${_matchLogo}"></div>
<div
class="mam-highlight-container loader-inline loader-small mam-block"
data-template="#mam-highlight"
data-article-url="$!articleUrl"
data-vendor="$!_matchVendor"
data-competition="$!_matchCompetition"
data-code="$!_matchCode"
data-logo-type="$!_matchLogo"
data-foxplayurl="$!_matchFoxPlay"
data-matchcasturl="$!_matchCast"></div>
#end
#macro(showMAMFeatured $_matchVendor $_matchTitle $_matchCompetition $_matchCode $_matchLogo $_matchFoxPlay $_matchCast $_articleUrl)
<div class="mam-card">
<div
class="mam-featured big loader-inline mam-block"
data-template="#mam-featured"
data-article-url="$!articleUrl"
data-vendor="$!_matchVendor"
data-title ="$!_matchTitle"
data-competition="$!_matchCompetition"
data-code="$!_matchCode"
data-logo-type="$!_matchLogo"
data-foxplayurl="$!_matchFoxPlay"
data-matchcasturl="$!_matchCast"></div>
</div>
#end
#macro(showMAMBlockInNews $_index)
## Only useful in loopArticlesIdsByLast();
#getHomeMatchVars($xmlHomeMatches $_index)
#if($matchVendor != "" && $matchCompetition != "" && $matchCode != "")
#set($articleListSlotsUsed = $articleListSlotsUsed+1)
#showMAMFeatured($matchVendor $matchTitle $matchCompetition $matchCode $matchLogo $matchFoxPlay $matchMatchcast "")
## Added div to fix nth-child
<div></div>
#set($mamBlockShown = true)
#end
#end
#macro( blockCountrySelector )
#languageVars()
<div class="country-dropdown">
<select class="country-dropdown-select" style="display: none;">
<option value="ar" #if($Country == 'ar') selected #end>Argentina</option>
<option value="bo" #if($Country == 'bo') selected #end>Bolivia</option>
<option value="br" #if($Country == 'br') selected #end>Brasil</option>
<option value="cl" #if($Country == 'cl') selected #end>Chile</option>
<option value="co" #if($Country == 'co') selected #end>Colombia</option>
<option value="cr" #if($Country == 'cr') selected #end>Costa Rica</option>
<option value="do" #if($Country == 'do') selected #end>Dominicana</option>
<option value="ec" #if($Country == 'ec') selected #end>Ecuador</option>
<option value="gt" #if($Country == 'gt') selected #end>Guatemala</option>
<option value="hn" #if($Country == 'hn') selected #end>Honduras</option>
<option value="mx" #if($Country == 'mx') selected #end>México</option>
<option value="ni" #if($Country == 'ni') selected #end>Nicaragua</option>
<option value="pa" #if($Country == 'pa') selected #end>Panamá</option>
<option value="pe" #if($Country == 'pe') selected #end>Perú</option>
<option value="py" #if($Country == 'py') selected #end>Paraguay</option>
<option value="sv" #if($Country == 'sv') selected #end>Salvador</option>
<option value="uy" #if($Country == 'uy') selected #end>Uruguay</option>
<option value="ve" #if($Country == 've') selected #end>Venezuela</option>
</select>
</div>
#end
#macro( blockPageTitle $i_pagetitle )
#languageVars()
<section class="page-title">
<h2>$i_pagetitle</h2>
</section>
#end
#macro( scheduleRow $networkId $day)
<div class="schedule-row">
## #set($networkId = "foxsports3")
#getSchedule($networkId $day 0)
#foreach ($_scheduleItem in $schedule)
#getScheduleVars($_scheduleItem)
#set ($_showTitle = $scheduleProdName)
#if($showId)
#set ($_showTitle = $showTitle)
#else
#getShowFPByProdId($scheduleProdId)
#if(!$showFPByProdId && $scheduleProdName != '')
#getShowFPByTitle($scheduleProdName)
#end
#if($showFPId)
#set ($_showTitle = $showFPTitle)
#else
#getSynopsis ($networkId $scheduleProdId $scheduleEpisodeId)
#if($synopsisName && $synopsisName != '')
#set ($_showTitle = $synopsisName)
#end
#end
#end
#if($scheduleProdName.Contains($_showTitle) && $scheduleProdName.Length > $_showTitle.Length)
#set ($_showTitle = $scheduleProdName)
#end
## Item content
## Calculate position of the item
#set($_leftPositionH = $Converter.ToInteger($scheduleStartObject.AddHours(-7).ToString('HH'))*200)
#set($_leftPositionM = $Converter.ToInteger($scheduleStartObject.ToString('mm'))*200/60)
#set($_leftPosition = $_leftPositionH+$_leftPositionM)
## Calculate width of position
#set($_widthH = $Converter.ToInteger($scheduleDuration.Split($Converter.ToChar(":")).get_Item(0))*200)
#set($_widthM = $Converter.ToInteger($scheduleDuration.Split($Converter.ToChar(":")).get_Item(1))*200/60)
#set($_width = $_widthH+$_widthM)
#if($_showTitle != '')
#if($scheduleProdId != 0)
#set($_showSlug = $VelocityHelper.Normalize($_showTitle).Replace(' ', '-').Replace('"', '').Replace('+', ''))
<a href="/$Country/show/${scheduleProdId}-${scheduleEpisodeId}-${_showSlug}" class="schedule-item" style="left:$_leftPosition%;width:$_width%">
#else
<div class="schedule-item" style="left:$_leftPosition%;width:$_width%">
#end
$_showTitle
<div>
$scheduleStartObject.ToString('HH:mm')
$scheduleEndObject.ToString('HH:mm')
</div>
#if ($scheduleOnNow == "True")
<span class="live">$ds_lang_epg_live</span>
#end
#if($scheduleProdId != 0)
</a>
#else
</div>
#end
## #else
##   <div class="schedule-item unknown" style="left:0;width:$_width%">Sin datos disponibles</div>
#end
#end
</div>
#end
#macro(trendingMenu)
## Editorial Trend Menu
## Since #getXmlAttribute does not work on emulator, we have some Demo content for emulator
#if ($Query.get_Item("origin") != "app")
<section class="header-secondary">
<nav class="header-secondary-nav container">
#if($ct_env.environment != "emulator")
#dataSourceUrl()
#set ($_trendMenuXml = $IncludePageHelper.GetPage("15", "$dataSourceUrl/ds_trendMenu.xml"))
#getXmlElements($_trendMenuXml "item" "")
#set ($trendMenuXml = $xmlElements)
<ul>
#foreach($menuItem in $trendMenuXml)
#getXmlAttribute($menuItem "item" "title")
#set($menuItemTitle = $xmlAttribute)
#getXmlAttribute($menuItem "item" "link")
#set($menuItemLink = $xmlAttribute)
#set($menuItemLink = $menuItemLink.Replace('$Country', $Country))
<li class="item"><a href="$menuItemLink">$menuItemTitle</a></li>
#end
</ul>
#else
<ul>
<li class="item"><a href="#">Trend 1</a></li>
<li class="item"><a href="#">Trend 2</a></li>
</ul>
#end
</nav>
</section>
#end
#end
#macro (blockLatestVideos $_title $_quantity)
#if (!$_quantity || $_quantity == "")
#set ($_quantity = 4)
#end
#getLastVideos($_quantity 1)
<section class="latest-videos-container" data-list-size="$_quantity">
<div class="container">
<h2 class="section-title">$_title</h2>
<div class="latest-videos-list" id="latest-videos-list">
#foreach ($video in $lastVideos)
#if ($velocityCount > 2)
#set ($_smaller = true)
#else
#set ($_smaller = false)
#end
#videoItem($video $_smaller)
## Don't ever show more than $_quantity items
#if($velocityCount >= $_quantity)
#break
#end
#end
</div>
</div>
</section>
#end
#macro (blockPlaylistHeader $i_playlist)
<header class="article-header">
<div class="article-topic">
<span class="article-tag article-tag-box">$playlistCategory</span>
</div>
<h1>$i_playlist.name.InnerText</h1>
<h2>$i_playlist.get_Item('playlist-description').InnerText</h2>
</header>
#end
#macro(blockVideoEmbedGenerator $videoId)
#languageVars()
#getAbsoluteURL()
#shareEntities($videoTitle)
#set($htmlEncodedVideoTitle = $shareTextEntities)
#set($urlEncodedVideoTitle = $videoTitle.Replace('"', '%22'))
<div class="content-share">
<div class="content-share-bar">
<div class="toggle toggle-social-box" data-toggle="share-social">
<span class="icon fa fa-share"></span>
<span class="label">$ds_lang_videos_sharing</span>
</div>
<div class="toggle toggle-embed-box" data-toggle="share-embed">
<span class="icon fa fa-link"></span>
<span class="label">$ds_lang_videos_insert</span>
</div>
</div>
<div class="content-share-box embed-share generator" id="share-embed" data-video-id="$videoId">
<input class="generator-input iframe" type="text" readonly value='<iframe width="420" height="315" src="${rootWWWURL}/videos/embed/${videoId}" frameborder="0" allowfullscreen></iframe>'/>
<div class="generator-size">
<span class="label">$ds_lang_videos_size</span>
<select class="select">
<option value="560x315" selected>560 x 315</option>
<option value="640x360">640 x 360</option>
<option value="853x480">853 x 480</option>
<option value="1280x720">1280 x 720</option>
</select>
</div>
</div>
<div class="content-share-box social-share generator" id="share-social">
## Temporarily removed until fully fixed and tested
## <ul class="networks">
##  <li class="facebook-share"><a href="javascript:fbShare('${videoCanonicalUrl}', '${htmlEncodedVideoTitle}', '${videoDescription}','${videoImage640x360}', 640, 480)"><i class="fa fa-facebook"></i></a></li>
##  <li class="twitter-share"><a href="javascript:twShare('${htmlEncodedVideoTitle} - ${videoPageUrl}', 640, 480)"><i class="fa fa-twitter"></i></a></li>
##  <li class="email-share"><a href="mailto:?subject=${urlEncodedVideoTitle}&body=${urlEncodedVideoTitle} ${videoCanonicalUrl}"><i class="fa fa-envelope"></i></a></li>
## </ul>
<div class="copy-data">
<input class="generator-input short" type="text" readonly value="${rootWWWURL}/videos/${videoId}" onclick="$(this).select()"/>
<button class="link-copy">$ds_lang_videos_copy_link</button>
</div>
</div>
</div>
#end
#macro (blockVideoGallery $_type $_categoryTagOrName $_title)
#set ($extraClass = '')
#if($_type == 'last')
#getLastVideos(5 1)
#set ($videos = $lastVideos)
##$firstVideo.get_Item("mf:titleid").InnerText
#elseif($_type == 'show')
#getVideosByShowName($_categoryTagOrName 10)
#set ($videos = $videosByShowName)
#elseif($_type == 'category')
#getVideosByCompetition($_categoryTagOrName 10)
#set ($videos = $videosByCompetition)
#set ($extraClass = ' background-line')
#elseif($_type == 'team')
#getVideosByTeam($_categoryTagOrName 10)
#set ($videos = $videosByTeam)
#elseif($_type == 'name')
#getVideosByKeywords($_categoryTagOrName 10)
#set ($videos = $videosByKeywords)
#elseif($_type == 'idlist')
#getVideosByIds($_categoryTagOrName 10)
#set ($videos = $videosByIds)
#elseif($_type == 'feed')
#getVideosByFeed($_categoryTagOrName 10)
#set ($videos = $videosByFeed)
#end
#if($videos.Count > 0)
#set($firstVideo = $videos.get_Item(0))
#getVideoVars($firstVideo)
<section class="video-gallery${extraClass}">
<div class="video-gallery-container">
<div class="video-gallery-top">
<h2 class="video-gallery-top-title">#titleBoldStyle($_title)</h2>
<a class="see-all" href="/$Country/videos">Ver todos <span class="fa fa-angle-right"></span></a>
</div>
<div class="video-gallery-player">
<h3 class="video-gallery-player-title">$videoTitle</h3>
<div class="video-gallery-player-carousel">
<div class="video-gallery-player-carousel-prev">
<span class="video-gallery-player-carousel-prev-button fa fa-angle-left"></span>
</div>
#printPlayer($videoId false)
<div class="video-gallery-player-carousel-next">
<span class="video-gallery-player-carousel-next-button fa fa-angle-right"></span>
</div>
</div>
</div>
<ul class="video-gallery-list">
#foreach ($_video in $videos)
#if ($velocityCount < 6)
#set ($videoId = $_video.get_Item("mf:titleid").InnerText)
#if(!$videoId)
#set ($ar_videoId = $_video.get_Item("pl:id").InnerText.Split($Converter.ToChar('/')))
#foreach($_partInurlId in $ar_videoId)
#set ($videoId = $_partInurlId)
#end
#end
#getVideoById($videoId)
#if($videoImage640x360 == '')
#set ($videoImage640x360 = 'http://cdn-flac.ficfiles.com/sites/foxsports-br/objects/img/scaled/640x360/fs-default.png')
#end
<li class="video-gallery-list-item #if($velocityCount == 1)active#end">
<a
class="video-gallery-list-item-link #if($velocityCount == 1)active#end"
data-id="$videoId"
data-title="$videoTitle"
poster="${videoImage640x360}"
data-poster="${videoImage640x360}"
data-quality-low="$!{videoProgressiveUrlLow}"
data-quality-mid="$!{videoProgressiveUrlMid}"
data-quality-high="$!{videoProgressiveUrlHigh}"
>
<div class="video-gallery-list-item-link-preview">
<span class="video-gallery-list-item-link-play icon icon-round icon-md icon_play"></span>
<img
data-src="$videoImage640x360.Replace("/640x360/", "/1280x720/scaled/{width}x{height}/")"
data-sizes="auto"
data-ratio="0.5625"
class="video-gallery-list-item-link-image lazyload"
alt="$VelocityHelper.HTMLEncode($videoTitle).Replace('"', '&quot;')"
/>
</div>
<h3 class="video-gallery-list-item-link-title">$videoTitle</h3>
</a>
</li>
#end
#end
</ul>
</div>
</section>
#end
#end
#macro (blockVideoHeader $video)
#getVideoVars($video)
<header class="article-header">
<h1>$videoTitle</h1>
<p>$videoDescription</p>
</header>
#end
#macro (videoItem $_video $__smaller)
#getVideoVars($_video)
#if ($__smaller)
#set ($videoImageMaxSize = '320x180')
#end
#if($videoImage1280x720 == '')
#set ($videoImage1280x720 = 'http://cdn-flac.ficfiles.com/sites/foxsports-br/objects/img/scaled/1280x720/fs-default.png')
#end
<a href="$videoLink" class="video-block" data-video-id="$videoId">
<div class="video-block-image">
<img class="video-block-image-src lazyload" data-src="$videoImage1280x720.Replace("/1280x720/", "/1280x720/scaled/${videoImageMaxSize}/")" data-sizes="auto" alt="$videoTitle" />
</div>
<div class="video-block-meta">
<h3 class="video-block-meta-title">$videoTitle</h3>
</div>
</a>
#end
